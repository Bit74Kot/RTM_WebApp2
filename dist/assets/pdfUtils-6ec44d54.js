import{E}from"./jspdf-121321d7.js";import{c as commonjsGlobal,a as commonjsRequire,r as require$$7}from"./pdfjs-4b185501.js";import{l as lib}from"./mammoth-b46c397b.js";import{F as FileSaver_minExports}from"./index-610270ef.js";var pdf={exports:{}},dommatrix={exports:{}};/*!
* DOMMatrix v1.0.3 (https://thednp.github.io/dommatrix/)
* Copyright 2022 Â© thednp
* Licensed under MIT (https://github.com/thednp/DOMMatrix/blob/master/LICENSE)
*/var hasRequiredDommatrix;function requireDommatrix(){return hasRequiredDommatrix||(hasRequiredDommatrix=1,function(k,i){(function(t,n){k.exports=n()})(commonjsGlobal,function(){function t(c){var h=new M,d=Array.from(c);if(!d.every(function(z){return!Number.isNaN(z)}))throw TypeError('CSSMatrix: "'+c+'" must only have numbers.');if(d.length===16){var a=d[0],s=d[1],g=d[2],p=d[3],C=d[4],B=d[5],I=d[6],J=d[7],Y=d[8],q=d[9],Q=d[10],V=d[11],j=d[12],U=d[13],L=d[14],Z=d[15];h.m11=a,h.a=a,h.m21=C,h.c=C,h.m31=Y,h.m41=j,h.e=j,h.m12=s,h.b=s,h.m22=B,h.d=B,h.m32=q,h.m42=U,h.f=U,h.m13=g,h.m23=I,h.m33=Q,h.m43=L,h.m14=p,h.m24=J,h.m34=V,h.m44=Z}else if(d.length===6){var ce=d[0],be=d[1],Re=d[2],X=d[3],_=d[4],T=d[5];h.m11=ce,h.a=ce,h.m12=be,h.b=be,h.m21=Re,h.c=Re,h.m22=X,h.d=X,h.m41=_,h.e=_,h.m42=T,h.f=T}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return h}function n(c){var h=Object.keys(new M);if(typeof c=="object"&&h.every(function(d){return d in c}))return t([c.m11,c.m12,c.m13,c.m14,c.m21,c.m22,c.m23,c.m24,c.m31,c.m32,c.m33,c.m34,c.m41,c.m42,c.m43,c.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(c)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function o(c){if(typeof c!="string")throw TypeError('CSSMatrix: "'+c+'" is not a string.');var h=String(c).replace(/\s/g,""),d=new M,a='CSSMatrix: invalid transform string "'+c+'"';return h.split(")").filter(function(s){return s}).forEach(function(s){var g=s.split("("),p=g[0],C=g[1];if(!C)throw TypeError(a);var B=C.split(",").map(function(_){return _.includes("rad")?parseFloat(_)*(180/Math.PI):parseFloat(_)}),I=B[0],J=B[1],Y=B[2],q=B[3],Q=[I,J,Y],V=[I,J,Y,q];if(p==="perspective"&&I&&[J,Y].every(function(_){return _===void 0}))d.m34=-1/I;else if(p.includes("matrix")&&[6,16].includes(B.length)&&B.every(function(_){return!Number.isNaN(+_)})){var j=B.map(function(_){return Math.abs(_)<1e-6?0:_});d=d.multiply(t(j))}else if(p==="translate3d"&&Q.every(function(_){return!Number.isNaN(+_)}))d=d.translate(I,J,Y);else if(p==="translate"&&I&&Y===void 0)d=d.translate(I,J||0,0);else if(p==="rotate3d"&&V.every(function(_){return!Number.isNaN(+_)})&&q)d=d.rotateAxisAngle(I,J,Y,q);else if(p==="rotate"&&I&&[J,Y].every(function(_){return _===void 0}))d=d.rotate(0,0,I);else if(p==="scale3d"&&Q.every(function(_){return!Number.isNaN(+_)})&&Q.some(function(_){return _!==1}))d=d.scale(I,J,Y);else if(p==="scale"&&!Number.isNaN(I)&&I!==1&&Y===void 0){var U=Number.isNaN(+J),L=U?I:J;d=d.scale(I,L,1)}else if(p==="skew"&&(I||!Number.isNaN(I)&&J)&&Y===void 0)d=d.skew(I,J||0);else if(/[XYZ]/.test(p)&&I&&[J,Y].every(function(_){return _===void 0})&&["translate","rotate","scale","skew"].some(function(_){return p.includes(_)}))if(["skewX","skewY"].includes(p))d=d[p](I);else{var Z=p.replace(/[XYZ]/,""),ce=p.replace(Z,""),be=["X","Y","Z"].indexOf(ce),Re=Z==="scale"?1:0,X=[be===0?I:Re,be===1?I:Re,be===2?I:Re];d=d[Z].apply(d,X)}else throw TypeError(a)}),d}function m(c,h){return h?[c.a,c.b,c.c,c.d,c.e,c.f]:[c.m11,c.m12,c.m13,c.m14,c.m21,c.m22,c.m23,c.m24,c.m31,c.m32,c.m33,c.m34,c.m41,c.m42,c.m43,c.m44]}function S(c,h,d){var a=new M;return a.m41=c,a.e=c,a.m42=h,a.f=h,a.m43=d,a}function x(c,h,d){var a=new M,s=Math.PI/180,g=c*s,p=h*s,C=d*s,B=Math.cos(g),I=-Math.sin(g),J=Math.cos(p),Y=-Math.sin(p),q=Math.cos(C),Q=-Math.sin(C),V=J*q,j=-J*Q;a.m11=V,a.a=V,a.m12=j,a.b=j,a.m13=Y;var U=I*Y*q+B*Q;a.m21=U,a.c=U;var L=B*q-I*Y*Q;return a.m22=L,a.d=L,a.m23=-I*J,a.m31=I*Q-B*Y*q,a.m32=I*q+B*Y*Q,a.m33=B*J,a}function R(c,h,d,a){var s=new M,g=Math.sqrt(c*c+h*h+d*d);if(g===0)return s;var p=c/g,C=h/g,B=d/g,I=a*(Math.PI/360),J=Math.sin(I),Y=Math.cos(I),q=J*J,Q=p*p,V=C*C,j=B*B,U=1-2*(V+j)*q;s.m11=U,s.a=U;var L=2*(p*C*q+B*J*Y);s.m12=L,s.b=L,s.m13=2*(p*B*q-C*J*Y);var Z=2*(C*p*q-B*J*Y);s.m21=Z,s.c=Z;var ce=1-2*(j+Q)*q;return s.m22=ce,s.d=ce,s.m23=2*(C*B*q+p*J*Y),s.m31=2*(B*p*q+C*J*Y),s.m32=2*(B*C*q-p*J*Y),s.m33=1-2*(Q+V)*q,s}function y(c,h,d){var a=new M;return a.m11=c,a.a=c,a.m22=h,a.d=h,a.m33=d,a}function v(c,h){var d=new M;if(c){var a=c*Math.PI/180,s=Math.tan(a);d.m21=s,d.c=s}if(h){var g=h*Math.PI/180,p=Math.tan(g);d.m12=p,d.b=p}return d}function D(c){return v(c,0)}function u(c){return v(0,c)}function P(c,h){var d=h.m11*c.m11+h.m12*c.m21+h.m13*c.m31+h.m14*c.m41,a=h.m11*c.m12+h.m12*c.m22+h.m13*c.m32+h.m14*c.m42,s=h.m11*c.m13+h.m12*c.m23+h.m13*c.m33+h.m14*c.m43,g=h.m11*c.m14+h.m12*c.m24+h.m13*c.m34+h.m14*c.m44,p=h.m21*c.m11+h.m22*c.m21+h.m23*c.m31+h.m24*c.m41,C=h.m21*c.m12+h.m22*c.m22+h.m23*c.m32+h.m24*c.m42,B=h.m21*c.m13+h.m22*c.m23+h.m23*c.m33+h.m24*c.m43,I=h.m21*c.m14+h.m22*c.m24+h.m23*c.m34+h.m24*c.m44,J=h.m31*c.m11+h.m32*c.m21+h.m33*c.m31+h.m34*c.m41,Y=h.m31*c.m12+h.m32*c.m22+h.m33*c.m32+h.m34*c.m42,q=h.m31*c.m13+h.m32*c.m23+h.m33*c.m33+h.m34*c.m43,Q=h.m31*c.m14+h.m32*c.m24+h.m33*c.m34+h.m34*c.m44,V=h.m41*c.m11+h.m42*c.m21+h.m43*c.m31+h.m44*c.m41,j=h.m41*c.m12+h.m42*c.m22+h.m43*c.m32+h.m44*c.m42,U=h.m41*c.m13+h.m42*c.m23+h.m43*c.m33+h.m44*c.m43,L=h.m41*c.m14+h.m42*c.m24+h.m43*c.m34+h.m44*c.m44;return t([d,a,s,g,p,C,B,I,J,Y,q,Q,V,j,U,L])}var M=function(){for(var h=[],d=arguments.length;d--;)h[d]=arguments[d];var a=this;if(a.a=1,a.b=0,a.c=0,a.d=1,a.e=0,a.f=0,a.m11=1,a.m12=0,a.m13=0,a.m14=0,a.m21=0,a.m22=1,a.m23=0,a.m24=0,a.m31=0,a.m32=0,a.m33=1,a.m34=0,a.m41=0,a.m42=0,a.m43=0,a.m44=1,h.length){var s=[16,6].some(function(g){return g===h.length})?h:h[0];return a.setMatrixValue(s)}return a},A={isIdentity:{configurable:!0},is2D:{configurable:!0}};A.isIdentity.get=function(){var c=this;return c.m11===1&&c.m12===0&&c.m13===0&&c.m14===0&&c.m21===0&&c.m22===1&&c.m23===0&&c.m24===0&&c.m31===0&&c.m32===0&&c.m33===1&&c.m34===0&&c.m41===0&&c.m42===0&&c.m43===0&&c.m44===1},A.is2D.get=function(){var c=this;return c.m31===0&&c.m32===0&&c.m33===1&&c.m34===0&&c.m43===0&&c.m44===1},M.prototype.setMatrixValue=function(h){var d=this;return typeof h=="string"&&h.length&&h!=="none"?o(h):[Array,Float64Array,Float32Array].some(function(a){return h instanceof a})?t(h):[M,DOMMatrix,Object].some(function(a){return h instanceof a})?n(h):d},M.prototype.toFloat32Array=function(h){return Float32Array.from(m(this,h))},M.prototype.toFloat64Array=function(h){return Float64Array.from(m(this,h))},M.prototype.toString=function(){var h=this,d=h.is2D,a=h.toFloat64Array(d).join(", "),s=d?"matrix":"matrix3d";return s+"("+a+")"},M.prototype.toJSON=function(){var h=this,d=h.is2D,a=h.isIdentity;return Object.assign({},h,{is2D:d,isIdentity:a})},M.prototype.multiply=function(h){return P(this,h)},M.prototype.translate=function(h,d,a){var s=h,g=d,p=a;return g===void 0&&(g=0),p===void 0&&(p=0),P(this,S(s,g,p))},M.prototype.scale=function(h,d,a){var s=h,g=d,p=a;return g===void 0&&(g=h),p===void 0&&(p=1),P(this,y(s,g,p))},M.prototype.rotate=function(h,d,a){var s=h,g=d||0,p=a||0;return typeof h=="number"&&d===void 0&&a===void 0&&(p=s,s=0,g=0),P(this,x(s,g,p))},M.prototype.rotateAxisAngle=function(h,d,a,s){if([h,d,a,s].some(function(g){return Number.isNaN(+g)}))throw new TypeError("CSSMatrix: expecting 4 values");return P(this,R(h,d,a,s))},M.prototype.skewX=function(h){return P(this,D(h))},M.prototype.skewY=function(h){return P(this,u(h))},M.prototype.skew=function(h,d){return P(this,v(h,d))},M.prototype.transformPoint=function(h){var d=this,a=d.m11*h.x+d.m21*h.y+d.m31*h.z+d.m41*h.w,s=d.m12*h.x+d.m22*h.y+d.m32*h.z+d.m42*h.w,g=d.m13*h.x+d.m23*h.y+d.m33*h.z+d.m43*h.w,p=d.m14*h.x+d.m24*h.y+d.m34*h.z+d.m44*h.w;return h instanceof DOMPoint?new DOMPoint(a,s,g,p):{x:a,y:s,z:g,w:p}},Object.defineProperties(M.prototype,A),Object.assign(M,{Translate:S,Rotate:x,RotateAxisAngle:R,Scale:y,SkewX:D,SkewY:u,Skew:v,Multiply:P,fromArray:t,fromMatrix:n,fromString:o,toArray:m});var F="1.0.3",N=F;return Object.assign(M,{Version:N}),M})}(dommatrix)),dommatrix.exports}var ponyfill={exports:{}};/**
 * @license
 * web-streams-polyfill v3.3.3
 * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
 * This code is released under the MIT license.
 * SPDX-License-Identifier: MIT
 */var hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(k,i){(function(t,n){n(i)})(commonjsGlobal,function(t){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(e){return"Symbol(".concat(e,")")};function o(e,r){var f={label:0,sent:function(){if(re[0]&1)throw re[1];return re[1]},trys:[],ops:[]},G,K,re,pe;return pe={next:Ce(0),throw:Ce(1),return:Ce(2)},typeof Symbol=="function"&&(pe[Symbol.iterator]=function(){return this}),pe;function Ce(Te){return function(Ue){return Fe([Te,Ue])}}function Fe(Te){if(G)throw new TypeError("Generator is already executing.");for(;pe&&(pe=0,Te[0]&&(f=0)),f;)try{if(G=1,K&&(re=Te[0]&2?K.return:Te[0]?K.throw||((re=K.return)&&re.call(K),0):K.next)&&!(re=re.call(K,Te[1])).done)return re;switch(K=0,re&&(Te=[Te[0]&2,re.value]),Te[0]){case 0:case 1:re=Te;break;case 4:return f.label++,{value:Te[1],done:!1};case 5:f.label++,K=Te[1],Te=[0];continue;case 7:Te=f.ops.pop(),f.trys.pop();continue;default:if(re=f.trys,!(re=re.length>0&&re[re.length-1])&&(Te[0]===6||Te[0]===2)){f=0;continue}if(Te[0]===3&&(!re||Te[1]>re[0]&&Te[1]<re[3])){f.label=Te[1];break}if(Te[0]===6&&f.label<re[1]){f.label=re[1],re=Te;break}if(re&&f.label<re[2]){f.label=re[2],f.ops.push(Te);break}re[2]&&f.ops.pop(),f.trys.pop();continue}Te=r.call(e,f)}catch(Ue){Te=[6,Ue],K=0}finally{G=re=0}if(Te[0]&5)throw Te[1];return{value:Te[0]?Te[1]:void 0,done:!0}}}function m(e){var r=typeof Symbol=="function"&&Symbol.iterator,f=r&&e[r],G=0;if(f)return f.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&G>=e.length&&(e=void 0),{value:e&&e[G++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function x(e,r,f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=f.apply(e,r||[]),K,re=[];return K={},pe("next"),pe("throw"),pe("return"),K[Symbol.asyncIterator]=function(){return this},K;function pe(Ve){G[Ve]&&(K[Ve]=function(st){return new Promise(function(ht,mt){re.push([Ve,st,ht,mt])>1||Ce(Ve,st)})})}function Ce(Ve,st){try{Fe(G[Ve](st))}catch(ht){He(re[0][3],ht)}}function Fe(Ve){Ve.value instanceof S?Promise.resolve(Ve.value.v).then(Te,Ue):He(re[0][2],Ve)}function Te(Ve){Ce("next",Ve)}function Ue(Ve){Ce("throw",Ve)}function He(Ve,st){Ve(st),re.shift(),re.length&&Ce(re[0][0],re[0][1])}}function R(e){var r,f;return r={},G("next"),G("throw",function(K){throw K}),G("return"),r[Symbol.iterator]=function(){return this},r;function G(K,re){r[K]=e[K]?function(pe){return(f=!f)?{value:S(e[K](pe)),done:!1}:re?re(pe):pe}:re}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],f;return r?r.call(e):(e=typeof m=="function"?m(e):e[Symbol.iterator](),f={},G("next"),G("throw"),G("return"),f[Symbol.asyncIterator]=function(){return this},f);function G(re){f[re]=e[re]&&function(pe){return new Promise(function(Ce,Fe){pe=e[re](pe),K(Ce,Fe,pe.done,pe.value)})}}function K(re,pe,Ce,Fe){Promise.resolve(Fe).then(function(Te){re({value:Te,done:Ce})},pe)}}typeof SuppressedError=="function"&&SuppressedError;function v(){}function D(e){return typeof e=="object"&&e!==null||typeof e=="function"}var u=v;function P(e,r){try{Object.defineProperty(e,"name",{value:r,configurable:!0})}catch{}}var M=Promise,A=Promise.prototype.then,F=Promise.reject.bind(M);function N(e){return new M(e)}function c(e){return N(function(r){return r(e)})}function h(e){return F(e)}function d(e,r,f){return A.call(e,r,f)}function a(e,r,f){d(d(e,r,f),void 0,u)}function s(e,r){a(e,r)}function g(e,r){a(e,void 0,r)}function p(e,r,f){return d(e,r,f)}function C(e){d(e,void 0,u)}var B=function(e){if(typeof queueMicrotask=="function")B=queueMicrotask;else{var r=c(void 0);B=function(f){return d(r,f)}}return B(e)};function I(e,r,f){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,f)}function J(e,r,f){try{return c(I(e,r,f))}catch(G){return h(G)}}var Y=16384,q=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(r){var f=this._back,G=f;f._elements.length===Y-1&&(G={_elements:[],_next:void 0}),f._elements.push(r),G!==f&&(this._back=G,f._next=G),++this._size},e.prototype.shift=function(){var r=this._front,f=r,G=this._cursor,K=G+1,re=r._elements,pe=re[G];return K===Y&&(f=r._next,K=0),--this._size,this._cursor=K,r!==f&&(this._front=f),re[G]=void 0,pe},e.prototype.forEach=function(r){for(var f=this._cursor,G=this._front,K=G._elements;(f!==K.length||G._next!==void 0)&&!(f===K.length&&(G=G._next,K=G._elements,f=0,K.length===0));)r(K[f]),++f},e.prototype.peek=function(){var r=this._front,f=this._cursor;return r._elements[f]},e}(),Q=n("[[AbortSteps]]"),V=n("[[ErrorSteps]]"),j=n("[[CancelSteps]]"),U=n("[[PullSteps]]"),L=n("[[ReleaseSteps]]");function Z(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?X(e):r._state==="closed"?T(e):_(e,r._storedError)}function ce(e,r){var f=e._ownerReadableStream;return bt(f,r)}function be(e){var r=e._ownerReadableStream;r._state==="readable"?z(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):$(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),r._readableStreamController[L](),r._reader=void 0,e._ownerReadableStream=void 0}function Re(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function X(e){e._closedPromise=N(function(r,f){e._closedPromise_resolve=r,e._closedPromise_reject=f})}function _(e,r){X(e),z(e,r)}function T(e){X(e),l(e)}function z(e,r){e._closedPromise_reject!==void 0&&(C(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function $(e,r){_(e,r)}function l(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var b=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},w=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function O(e){return typeof e=="object"||typeof e=="function"}function W(e,r){if(e!==void 0&&!O(e))throw new TypeError("".concat(r," is not an object."))}function H(e,r){if(typeof e!="function")throw new TypeError("".concat(r," is not a function."))}function ee(e){return typeof e=="object"&&e!==null||typeof e=="function"}function ne(e,r){if(!ee(e))throw new TypeError("".concat(r," is not an object."))}function se(e,r,f){if(e===void 0)throw new TypeError("Parameter ".concat(r," is required in '").concat(f,"'."))}function ue(e,r,f){if(e===void 0)throw new TypeError("".concat(r," is required in '").concat(f,"'."))}function le(e){return Number(e)}function de(e){return e===0?0:e}function ge(e){return de(w(e))}function Se(e,r){var f=0,G=Number.MAX_SAFE_INTEGER,K=Number(e);if(K=de(K),!b(K))throw new TypeError("".concat(r," is not a finite number"));if(K=ge(K),K<f||K>G)throw new TypeError("".concat(r," is outside the accepted range of ").concat(f," to ").concat(G,", inclusive"));return!b(K)||K===0?0:K}function we(e,r){if(!kt(e))throw new TypeError("".concat(r," is not a ReadableStream."))}function Pe(e){return new Oe(e)}function Ie(e,r){e._reader._readRequests.push(r)}function _e(e,r,f){var G=e._reader,K=G._readRequests.shift();f?K._closeSteps():K._chunkSteps(r)}function Xe(e){return e._reader._readRequests.length}function Qe(e){var r=e._reader;return!(r===void 0||!Ee(r))}var Oe=function(){function e(r){if(se(r,1,"ReadableStreamDefaultReader"),we(r,"First parameter"),Ft(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Z(this,r),this._readRequests=new q}return Object.defineProperty(e.prototype,"closed",{get:function(){return Ee(this)?this._closedPromise:h(Ke("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),Ee(this)?this._ownerReadableStream===void 0?h(Re("cancel")):ce(this,r):h(Ke("cancel"))},e.prototype.read=function(){if(!Ee(this))return h(Ke("read"));if(this._ownerReadableStream===void 0)return h(Re("read from"));var r,f,G=N(function(re,pe){r=re,f=pe}),K={_chunkSteps:function(re){return r({value:re,done:!1})},_closeSteps:function(){return r({value:void 0,done:!0})},_errorSteps:function(re){return f(re)}};return ie(this,K),G},e.prototype.releaseLock=function(){if(!Ee(this))throw Ke("releaseLock");this._ownerReadableStream!==void 0&&ye(this)},e}();Object.defineProperties(Oe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),P(Oe.prototype.cancel,"cancel"),P(Oe.prototype.read,"read"),P(Oe.prototype.releaseLock,"releaseLock"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Oe.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ee(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Oe}function ie(e,r){var f=e._ownerReadableStream;f._disturbed=!0,f._state==="closed"?r._closeSteps():f._state==="errored"?r._errorSteps(f._storedError):f._readableStreamController[U](r)}function ye(e){be(e);var r=new TypeError("Reader was released");Le(e,r)}function Le(e,r){var f=e._readRequests;e._readRequests=new q,f.forEach(function(G){G._errorSteps(r)})}function Ke(e){return new TypeError("ReadableStreamDefaultReader.prototype.".concat(e," can only be used on a ReadableStreamDefaultReader"))}var ve,xe,Ne;function he(e){return e.slice()}function te(e,r,f,G,K){new Uint8Array(e).set(new Uint8Array(f,G,K),r)}var ae=function(e){return typeof e.transfer=="function"?ae=function(r){return r.transfer()}:typeof structuredClone=="function"?ae=function(r){return structuredClone(r,{transfer:[r]})}:ae=function(r){return r},ae(e)},me=function(e){return typeof e.detached=="boolean"?me=function(r){return r.detached}:me=function(r){return r.byteLength===0},me(e)};function Me(e,r,f){if(e.slice)return e.slice(r,f);var G=f-r,K=new ArrayBuffer(G);return te(K,0,e,r,G),K}function Be(e,r){var f=e[r];if(f!=null){if(typeof f!="function")throw new TypeError("".concat(String(r)," is not a function"));return f}}function fe(e){var r,f=(r={},r[n.iterator]=function(){return e.iterator},r),G=function(){return x(this,arguments,function(){return o(this,function(re){switch(re.label){case 0:return[5,m(R(y(f)))];case 1:return[4,S.apply(void 0,[re.sent()])];case 2:return[4,S.apply(void 0,[re.sent()])];case 3:return[2,re.sent()]}})})}(),K=G.next;return{iterator:G,nextMethod:K,done:!1}}var oe=(Ne=(ve=n.asyncIterator)!==null&&ve!==void 0?ve:(xe=n.for)===null||xe===void 0?void 0:xe.call(n,"Symbol.asyncIterator"))!==null&&Ne!==void 0?Ne:"@@asyncIterator";function Ae(e,r,f){if(r===void 0&&(r="sync"),f===void 0)if(r==="async"){if(f=Be(e,oe),f===void 0){var G=Be(e,n.iterator),K=Ae(e,"sync",G);return fe(K)}}else f=Be(e,n.iterator);if(f===void 0)throw new TypeError("The object is not iterable");var re=I(f,e,[]);if(!D(re))throw new TypeError("The iterator method must return an object");var pe=re.next;return{iterator:re,nextMethod:pe,done:!1}}function ke(e){var r=I(e.nextMethod,e.iterator,[]);if(!D(r))throw new TypeError("The iterator.next() method must return an object");return r}function We(e){return!!e.done}function ze(e){return e.value}var je,$e=(je={},je[oe]=function(){return this},je);Object.defineProperty($e,oe,{enumerable:!1});var De=function(){function e(r,f){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=f}return e.prototype.next=function(){var r=this,f=function(){return r._nextSteps()};return this._ongoingPromise=this._ongoingPromise?p(this._ongoingPromise,f,f):f(),this._ongoingPromise},e.prototype.return=function(r){var f=this,G=function(){return f._returnSteps(r)};return this._ongoingPromise?p(this._ongoingPromise,G,G):G()},e.prototype._nextSteps=function(){var r=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var f=this._reader,G,K,re=N(function(Ce,Fe){G=Ce,K=Fe}),pe={_chunkSteps:function(Ce){r._ongoingPromise=void 0,B(function(){return G({value:Ce,done:!1})})},_closeSteps:function(){r._ongoingPromise=void 0,r._isFinished=!0,be(f),G({value:void 0,done:!0})},_errorSteps:function(Ce){r._ongoingPromise=void 0,r._isFinished=!0,be(f),K(Ce)}};return ie(f,pe),re},e.prototype._returnSteps=function(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;var f=this._reader;if(!this._preventCancel){var G=ce(f,r);return be(f),p(G,function(){return{value:r,done:!0}})}return be(f),c({value:r,done:!0})},e}(),Ye={next:function(){return qe(this)?this._asyncIteratorImpl.next():h(Ze("next"))},return:function(e){return qe(this)?this._asyncIteratorImpl.return(e):h(Ze("return"))}};Object.setPrototypeOf(Ye,$e);function at(e,r){var f=Pe(e),G=new De(f,r),K=Object.create(Ye);return K._asyncIteratorImpl=G,K}function qe(e){if(!D(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof De}catch{return!1}}function Ze(e){return new TypeError("ReadableStreamAsyncIterator.".concat(e," can only be used on a ReadableSteamAsyncIterator"))}var it=Number.isNaN||function(e){return e!==e};function et(e){return!(typeof e!="number"||it(e)||e<0)}function ot(e){var r=Me(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function tt(e){var r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function gt(e,r,f){if(!et(f)||f===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:f}),e._queueTotalSize+=f}function Ct(e){var r=e._queue.peek();return r.value}function ut(e){e._queue=new q,e._queueTotalSize=0}function It(e){return e===DataView}function zt(e){return It(e.constructor)}function Dt(e){return It(e)?1:e.BYTES_PER_ELEMENT}var dt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!Or(this))throw Nr("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(r){if(!Or(this))throw Nr("respond");if(se(r,1,"respond"),r=Se(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(me(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");ur(this._associatedReadableByteStreamController,r)},e.prototype.respondWithNewView=function(r){if(!Or(this))throw Nr("respondWithNewView");if(se(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(me(r.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");dr(this._associatedReadableByteStreamController,r)},e}();Object.defineProperties(dt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),P(dt.prototype.respond,"respond"),P(dt.prototype.respondWithNewView,"respondWithNewView"),typeof n.toStringTag=="symbol"&&Object.defineProperty(dt.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var wt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!Lt(this))throw Zt("byobRequest");return Lr(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Lt(this))throw Zt("desiredSize");return hn(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Lt(this))throw Zt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError("The stream (in ".concat(r," state) is not in the readable state and cannot be closed"));Jt(this)},e.prototype.enqueue=function(r){if(!Lt(this))throw Zt("enqueue");if(se(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var f=this._controlledReadableByteStream._state;if(f!=="readable")throw new TypeError("The stream (in ".concat(f," state) is not in the readable state and cannot be enqueued to"));cr(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!Lt(this))throw Zt("error");pt(this,r)},e.prototype[j]=function(r){rn(this),ut(this);var f=this._cancelAlgorithm(r);return lr(this),f},e.prototype[U]=function(r){var f=this._controlledReadableByteStream;if(this._queueTotalSize>0){dn(this,r);return}var G=this._autoAllocateChunkSize;if(G!==void 0){var K=void 0;try{K=new ArrayBuffer(G)}catch(pe){r._errorSteps(pe);return}var re={buffer:K,bufferByteLength:G,byteOffset:0,byteLength:G,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(re)}Ie(f,r),Nt(this)},e.prototype[L]=function(){if(this._pendingPullIntos.length>0){var r=this._pendingPullIntos.peek();r.readerType="none",this._pendingPullIntos=new q,this._pendingPullIntos.push(r)}},e}();Object.defineProperties(wt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),P(wt.prototype.close,"close"),P(wt.prototype.enqueue,"enqueue"),P(wt.prototype.error,"error"),typeof n.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Lt(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof wt}function Or(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof dt}function Nt(e){var r=aa(e);if(r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var f=e._pullAlgorithm();a(f,function(){return e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Nt(e)),null},function(G){return pt(e,G),null})}}function rn(e){Ir(e),e._pendingPullIntos=new q}function Mr(e,r){var f=!1;e._state==="closed"&&(f=!0);var G=nn(r);r.readerType==="default"?_e(e,G,f):ua(e,G,f)}function nn(e){var r=e.bytesFilled,f=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/f)}function or(e,r,f,G){e._queue.push({buffer:r,byteOffset:f,byteLength:G}),e._queueTotalSize+=G}function an(e,r,f,G){var K;try{K=Me(r,f,f+G)}catch(re){throw pt(e,re),re}or(e,K,0,G)}function sn(e,r){r.bytesFilled>0&&an(e,r.buffer,r.byteOffset,r.bytesFilled),$t(e)}function on(e,r){var f=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),G=r.bytesFilled+f,K=f,re=!1,pe=G%r.elementSize,Ce=G-pe;Ce>=r.minimumFill&&(K=Ce-r.bytesFilled,re=!0);for(var Fe=e._queue;K>0;){var Te=Fe.peek(),Ue=Math.min(K,Te.byteLength),He=r.byteOffset+r.bytesFilled;te(r.buffer,He,Te.buffer,Te.byteOffset,Ue),Te.byteLength===Ue?Fe.shift():(Te.byteOffset+=Ue,Te.byteLength-=Ue),e._queueTotalSize-=Ue,ln(e,Ue,r),K-=Ue}return re}function ln(e,r,f){f.bytesFilled+=r}function cn(e){e._queueTotalSize===0&&e._closeRequested?(lr(e),ir(e._controlledReadableByteStream)):Nt(e)}function Ir(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Dr(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var r=e._pendingPullIntos.peek();on(e,r)&&($t(e),Mr(e._controlledReadableByteStream,r))}}function ea(e){for(var r=e._controlledReadableByteStream._reader;r._readRequests.length>0;){if(e._queueTotalSize===0)return;var f=r._readRequests.shift();dn(e,f)}}function ta(e,r,f,G){var K=e._controlledReadableByteStream,re=r.constructor,pe=Dt(re),Ce=r.byteOffset,Fe=r.byteLength,Te=f*pe,Ue;try{Ue=ae(r.buffer)}catch(mt){G._errorSteps(mt);return}var He={buffer:Ue,bufferByteLength:Ue.byteLength,byteOffset:Ce,byteLength:Fe,bytesFilled:0,minimumFill:Te,elementSize:pe,viewConstructor:re,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(He),mn(K,G);return}if(K._state==="closed"){var Ve=new re(He.buffer,He.byteOffset,0);G._closeSteps(Ve);return}if(e._queueTotalSize>0){if(on(e,He)){var st=nn(He);cn(e),G._chunkSteps(st);return}if(e._closeRequested){var ht=new TypeError("Insufficient bytes to fill elements in the given buffer");pt(e,ht),G._errorSteps(ht);return}}e._pendingPullIntos.push(He),mn(K,G),Nt(e)}function ra(e,r){r.readerType==="none"&&$t(e);var f=e._controlledReadableByteStream;if(Br(f))for(;gn(f)>0;){var G=$t(e);Mr(f,G)}}function na(e,r,f){if(ln(e,r,f),f.readerType==="none"){sn(e,f),Dr(e);return}if(!(f.bytesFilled<f.minimumFill)){$t(e);var G=f.bytesFilled%f.elementSize;if(G>0){var K=f.byteOffset+f.bytesFilled;an(e,f.buffer,K-G,G)}f.bytesFilled-=G,Mr(e._controlledReadableByteStream,f),Dr(e)}}function un(e,r){var f=e._pendingPullIntos.peek();Ir(e);var G=e._controlledReadableByteStream._state;G==="closed"?ra(e,f):na(e,r,f),Nt(e)}function $t(e){var r=e._pendingPullIntos.shift();return r}function aa(e){var r=e._controlledReadableByteStream;if(r._state!=="readable"||e._closeRequested||!e._started)return!1;if(Qe(r)&&Xe(r)>0||Br(r)&&gn(r)>0)return!0;var f=hn(e);return f>0}function lr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Jt(e){var r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){var f=e._pendingPullIntos.peek();if(f.bytesFilled%f.elementSize!==0){var G=new TypeError("Insufficient bytes to fill elements in the given buffer");throw pt(e,G),G}}lr(e),ir(r)}}function cr(e,r){var f=e._controlledReadableByteStream;if(!(e._closeRequested||f._state!=="readable")){var G=r.buffer,K=r.byteOffset,re=r.byteLength;if(me(G))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");var pe=ae(G);if(e._pendingPullIntos.length>0){var Ce=e._pendingPullIntos.peek();if(me(Ce.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Ir(e),Ce.buffer=ae(Ce.buffer),Ce.readerType==="none"&&sn(e,Ce)}if(Qe(f))if(ea(e),Xe(f)===0)or(e,pe,K,re);else{e._pendingPullIntos.length>0&&$t(e);var Fe=new Uint8Array(pe,K,re);_e(f,Fe,!1)}else Br(f)?(or(e,pe,K,re),Dr(e)):or(e,pe,K,re);Nt(e)}}function pt(e,r){var f=e._controlledReadableByteStream;f._state==="readable"&&(rn(e),ut(e),lr(e),Un(f,r))}function dn(e,r){var f=e._queue.shift();e._queueTotalSize-=f.byteLength,cn(e);var G=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);r._chunkSteps(G)}function Lr(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var r=e._pendingPullIntos.peek(),f=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),G=Object.create(dt.prototype);sa(G,e,f),e._byobRequest=G}return e._byobRequest}function hn(e){var r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function ur(e,r){var f=e._pendingPullIntos.peek(),G=e._controlledReadableByteStream._state;if(G==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(f.bytesFilled+r>f.byteLength)throw new RangeError("bytesWritten out of range")}f.buffer=ae(f.buffer),un(e,r)}function dr(e,r){var f=e._pendingPullIntos.peek(),G=e._controlledReadableByteStream._state;if(G==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(f.byteOffset+f.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(f.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(f.bytesFilled+r.byteLength>f.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var K=r.byteLength;f.buffer=ae(r.buffer),un(e,K)}function fn(e,r,f,G,K,re,pe){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,ut(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=re,r._pullAlgorithm=G,r._cancelAlgorithm=K,r._autoAllocateChunkSize=pe,r._pendingPullIntos=new q,e._readableStreamController=r;var Ce=f();a(c(Ce),function(){return r._started=!0,Nt(r),null},function(Fe){return pt(r,Fe),null})}function ia(e,r,f){var G=Object.create(wt.prototype),K,re,pe;r.start!==void 0?K=function(){return r.start(G)}:K=function(){},r.pull!==void 0?re=function(){return r.pull(G)}:re=function(){return c(void 0)},r.cancel!==void 0?pe=function(Fe){return r.cancel(Fe)}:pe=function(){return c(void 0)};var Ce=r.autoAllocateChunkSize;if(Ce===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");fn(e,G,K,re,pe,f,Ce)}function sa(e,r,f){e._associatedReadableByteStreamController=r,e._view=f}function Nr(e){return new TypeError("ReadableStreamBYOBRequest.prototype.".concat(e," can only be used on a ReadableStreamBYOBRequest"))}function Zt(e){return new TypeError("ReadableByteStreamController.prototype.".concat(e," can only be used on a ReadableByteStreamController"))}function oa(e,r){W(e,r);var f=e==null?void 0:e.mode;return{mode:f===void 0?void 0:la(f,"".concat(r," has member 'mode' that"))}}function la(e,r){if(e="".concat(e),e!=="byob")throw new TypeError("".concat(r," '").concat(e,"' is not a valid enumeration value for ReadableStreamReaderMode"));return e}function ca(e,r){var f;W(e,r);var G=(f=e==null?void 0:e.min)!==null&&f!==void 0?f:1;return{min:Se(G,"".concat(r," has member 'min' that"))}}function pn(e){return new Rt(e)}function mn(e,r){e._reader._readIntoRequests.push(r)}function ua(e,r,f){var G=e._reader,K=G._readIntoRequests.shift();f?K._closeSteps(r):K._chunkSteps(r)}function gn(e){return e._reader._readIntoRequests.length}function Br(e){var r=e._reader;return!(r===void 0||!Bt(r))}var Rt=function(){function e(r){if(se(r,1,"ReadableStreamBYOBReader"),we(r,"First parameter"),Ft(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Lt(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Z(this,r),this._readIntoRequests=new q}return Object.defineProperty(e.prototype,"closed",{get:function(){return Bt(this)?this._closedPromise:h(hr("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),Bt(this)?this._ownerReadableStream===void 0?h(Re("cancel")):ce(this,r):h(hr("cancel"))},e.prototype.read=function(r,f){if(f===void 0&&(f={}),!Bt(this))return h(hr("read"));if(!ArrayBuffer.isView(r))return h(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return h(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return h(new TypeError("view's buffer must have non-zero byteLength"));if(me(r.buffer))return h(new TypeError("view's buffer has been detached"));var G;try{G=ca(f,"options")}catch(Te){return h(Te)}var K=G.min;if(K===0)return h(new TypeError("options.min must be greater than 0"));if(zt(r)){if(K>r.byteLength)return h(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(K>r.length)return h(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return h(Re("read from"));var re,pe,Ce=N(function(Te,Ue){re=Te,pe=Ue}),Fe={_chunkSteps:function(Te){return re({value:Te,done:!1})},_closeSteps:function(Te){return re({value:Te,done:!0})},_errorSteps:function(Te){return pe(Te)}};return vn(this,r,K,Fe),Ce},e.prototype.releaseLock=function(){if(!Bt(this))throw hr("releaseLock");this._ownerReadableStream!==void 0&&da(this)},e}();Object.defineProperties(Rt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),P(Rt.prototype.cancel,"cancel"),P(Rt.prototype.read,"read"),P(Rt.prototype.releaseLock,"releaseLock"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Bt(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Rt}function vn(e,r,f,G){var K=e._ownerReadableStream;K._disturbed=!0,K._state==="errored"?G._errorSteps(K._storedError):ta(K._readableStreamController,r,f,G)}function da(e){be(e);var r=new TypeError("Reader was released");bn(e,r)}function bn(e,r){var f=e._readIntoRequests;e._readIntoRequests=new q,f.forEach(function(G){G._errorSteps(r)})}function hr(e){return new TypeError("ReadableStreamBYOBReader.prototype.".concat(e," can only be used on a ReadableStreamBYOBReader"))}function er(e,r){var f=e.highWaterMark;if(f===void 0)return r;if(it(f)||f<0)throw new RangeError("Invalid highWaterMark");return f}function fr(e){var r=e.size;return r||function(){return 1}}function pr(e,r){W(e,r);var f=e==null?void 0:e.highWaterMark,G=e==null?void 0:e.size;return{highWaterMark:f===void 0?void 0:le(f),size:G===void 0?void 0:ha(G,"".concat(r," has member 'size' that"))}}function ha(e,r){return H(e,r),function(f){return le(e(f))}}function fa(e,r){W(e,r);var f=e==null?void 0:e.abort,G=e==null?void 0:e.close,K=e==null?void 0:e.start,re=e==null?void 0:e.type,pe=e==null?void 0:e.write;return{abort:f===void 0?void 0:pa(f,e,"".concat(r," has member 'abort' that")),close:G===void 0?void 0:ma(G,e,"".concat(r," has member 'close' that")),start:K===void 0?void 0:ga(K,e,"".concat(r," has member 'start' that")),write:pe===void 0?void 0:va(pe,e,"".concat(r," has member 'write' that")),type:re}}function pa(e,r,f){return H(e,f),function(G){return J(e,r,[G])}}function ma(e,r,f){return H(e,f),function(){return J(e,r,[])}}function ga(e,r,f){return H(e,f),function(G){return I(e,r,[G])}}function va(e,r,f){return H(e,f),function(G,K){return J(e,r,[G,K])}}function yn(e,r){if(!Ht(e))throw new TypeError("".concat(r," is not a WritableStream."))}function ba(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}var ya=typeof AbortController=="function";function Sa(){if(ya)return new AbortController}var xt=function(){function e(r,f){r===void 0&&(r={}),f===void 0&&(f={}),r===void 0?r=null:ne(r,"First parameter");var G=pr(f,"Second parameter"),K=fa(r,"First parameter");An(this);var re=K.type;if(re!==void 0)throw new RangeError("Invalid type is specified");var pe=fr(G),Ce=er(G,1);Ia(this,K,Ce,pe)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!Ht(this))throw yr("locked");return Vt(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),Ht(this)?Vt(this)?h(new TypeError("Cannot abort a stream that already has a writer")):mr(this,r):h(yr("abort"))},e.prototype.close=function(){return Ht(this)?Vt(this)?h(new TypeError("Cannot close a stream that already has a writer")):yt(this)?h(new TypeError("Cannot close an already-closing stream")):_n(this):h(yr("close"))},e.prototype.getWriter=function(){if(!Ht(this))throw yr("getWriter");return Sn(this)},e}();Object.defineProperties(xt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),P(xt.prototype.abort,"abort"),P(xt.prototype.close,"close"),P(xt.prototype.getWriter,"getWriter"),typeof n.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});function Sn(e){return new Et(e)}function Aa(e,r,f,G,K,re){K===void 0&&(K=1),re===void 0&&(re=function(){return 1});var pe=Object.create(xt.prototype);An(pe);var Ce=Object.create(Xt.prototype);return Rn(pe,Ce,e,r,f,G,K,re),pe}function An(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new q,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ht(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof xt}function Vt(e){return e._writer!==void 0}function mr(e,r){var f;if(e._state==="closed"||e._state==="errored")return c(void 0);e._writableStreamController._abortReason=r,(f=e._writableStreamController._abortController)===null||f===void 0||f.abort(r);var G=e._state;if(G==="closed"||G==="errored")return c(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;var K=!1;G==="erroring"&&(K=!0,r=void 0);var re=N(function(pe,Ce){e._pendingAbortRequest={_promise:void 0,_resolve:pe,_reject:Ce,_reason:r,_wasAlreadyErroring:K}});return e._pendingAbortRequest._promise=re,K||Ur(e,r),re}function _n(e){var r=e._state;if(r==="closed"||r==="errored")return h(new TypeError("The stream (in ".concat(r," state) is not in the writable state and cannot be closed")));var f=N(function(K,re){var pe={_resolve:K,_reject:re};e._closeRequest=pe}),G=e._writer;return G!==void 0&&e._backpressure&&r==="writable"&&qr(G),Da(e._writableStreamController),f}function _a(e){var r=N(function(f,G){var K={_resolve:f,_reject:G};e._writeRequests.push(K)});return r}function Wr(e,r){var f=e._state;if(f==="writable"){Ur(e,r);return}jr(e)}function Ur(e,r){var f=e._writableStreamController;e._state="erroring",e._storedError=r;var G=e._writer;G!==void 0&&En(G,r),!Ca(e)&&f._started&&jr(e)}function jr(e){e._state="errored",e._writableStreamController[V]();var r=e._storedError;if(e._writeRequests.forEach(function(K){K._reject(r)}),e._writeRequests=new q,e._pendingAbortRequest===void 0){gr(e);return}var f=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,f._wasAlreadyErroring){f._reject(r),gr(e);return}var G=e._writableStreamController[Q](f._reason);a(G,function(){return f._resolve(),gr(e),null},function(K){return f._reject(K),gr(e),null})}function wa(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Ea(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,Wr(e,r)}function Pa(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var r=e._state;r==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var f=e._writer;f!==void 0&&On(f)}function Ta(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),Wr(e,r)}function yt(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ca(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ra(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function xa(e){e._inFlightWriteRequest=e._writeRequests.shift()}function gr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var r=e._writer;r!==void 0&&Vr(r,e._storedError)}function Gr(e,r){var f=e._writer;f!==void 0&&r!==e._backpressure&&(r?Ga(f):qr(f)),e._backpressure=r}var Et=function(){function e(r){if(se(r,1,"WritableStreamDefaultWriter"),yn(r,"First parameter"),Vt(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;var f=r._state;if(f==="writable")!yt(r)&&r._backpressure?Ar(this):Mn(this),Sr(this);else if(f==="erroring")Xr(this,r._storedError),Sr(this);else if(f==="closed")Mn(this),Ua(this);else{var G=r._storedError;Xr(this,G),Fn(this,G)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return Wt(this)?this._closedPromise:h(Ut("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Wt(this))throw Ut("desiredSize");if(this._ownerWritableStream===void 0)throw rr("desiredSize");return Ma(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return Wt(this)?this._readyPromise:h(Ut("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),Wt(this)?this._ownerWritableStream===void 0?h(rr("abort")):ka(this,r):h(Ut("abort"))},e.prototype.close=function(){if(!Wt(this))return h(Ut("close"));var r=this._ownerWritableStream;return r===void 0?h(rr("close")):yt(r)?h(new TypeError("Cannot close an already-closing stream")):wn(this)},e.prototype.releaseLock=function(){if(!Wt(this))throw Ut("releaseLock");var r=this._ownerWritableStream;r!==void 0&&Pn(this)},e.prototype.write=function(r){return r===void 0&&(r=void 0),Wt(this)?this._ownerWritableStream===void 0?h(rr("write to")):Tn(this,r):h(Ut("write"))},e}();Object.defineProperties(Et.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),P(Et.prototype.abort,"abort"),P(Et.prototype.close,"close"),P(Et.prototype.releaseLock,"releaseLock"),P(Et.prototype.write,"write"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Wt(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Et}function ka(e,r){var f=e._ownerWritableStream;return mr(f,r)}function wn(e){var r=e._ownerWritableStream;return _n(r)}function Fa(e){var r=e._ownerWritableStream,f=r._state;return yt(r)||f==="closed"?c(void 0):f==="errored"?h(r._storedError):wn(e)}function Oa(e,r){e._closedPromiseState==="pending"?Vr(e,r):ja(e,r)}function En(e,r){e._readyPromiseState==="pending"?In(e,r):za(e,r)}function Ma(e){var r=e._ownerWritableStream,f=r._state;return f==="errored"||f==="erroring"?null:f==="closed"?0:xn(r._writableStreamController)}function Pn(e){var r=e._ownerWritableStream,f=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");En(e,f),Oa(e,f),r._writer=void 0,e._ownerWritableStream=void 0}function Tn(e,r){var f=e._ownerWritableStream,G=f._writableStreamController,K=La(G,r);if(f!==e._ownerWritableStream)return h(rr("write to"));var re=f._state;if(re==="errored")return h(f._storedError);if(yt(f)||re==="closed")return h(new TypeError("The stream is closing or closed and cannot be written to"));if(re==="erroring")return h(f._storedError);var pe=_a(f);return Na(G,r,K),pe}var Cn={},Xt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!zr(this))throw Hr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!zr(this))throw Hr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(r){if(r===void 0&&(r=void 0),!zr(this))throw Hr("error");var f=this._controlledWritableStream._state;f==="writable"&&kn(this,r)},e.prototype[Q]=function(r){var f=this._abortAlgorithm(r);return vr(this),f},e.prototype[V]=function(){ut(this)},e}();Object.defineProperties(Xt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Xt.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function zr(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Xt}function Rn(e,r,f,G,K,re,pe,Ce){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,ut(r),r._abortReason=void 0,r._abortController=Sa(),r._started=!1,r._strategySizeAlgorithm=Ce,r._strategyHWM=pe,r._writeAlgorithm=G,r._closeAlgorithm=K,r._abortAlgorithm=re;var Fe=$r(r);Gr(e,Fe);var Te=f(),Ue=c(Te);a(Ue,function(){return r._started=!0,br(r),null},function(He){return r._started=!0,Wr(e,He),null})}function Ia(e,r,f,G){var K=Object.create(Xt.prototype),re,pe,Ce,Fe;r.start!==void 0?re=function(){return r.start(K)}:re=function(){},r.write!==void 0?pe=function(Te){return r.write(Te,K)}:pe=function(){return c(void 0)},r.close!==void 0?Ce=function(){return r.close()}:Ce=function(){return c(void 0)},r.abort!==void 0?Fe=function(Te){return r.abort(Te)}:Fe=function(){return c(void 0)},Rn(e,K,re,pe,Ce,Fe,f,G)}function vr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Da(e){gt(e,Cn,0),br(e)}function La(e,r){try{return e._strategySizeAlgorithm(r)}catch(f){return tr(e,f),1}}function xn(e){return e._strategyHWM-e._queueTotalSize}function Na(e,r,f){try{gt(e,r,f)}catch(re){tr(e,re);return}var G=e._controlledWritableStream;if(!yt(G)&&G._state==="writable"){var K=$r(e);Gr(G,K)}br(e)}function br(e){var r=e._controlledWritableStream;if(e._started&&r._inFlightWriteRequest===void 0){var f=r._state;if(f==="erroring"){jr(r);return}if(e._queue.length!==0){var G=Ct(e);G===Cn?Ba(e):Wa(e,G)}}}function tr(e,r){e._controlledWritableStream._state==="writable"&&kn(e,r)}function Ba(e){var r=e._controlledWritableStream;Ra(r),tt(e);var f=e._closeAlgorithm();vr(e),a(f,function(){return Pa(r),null},function(G){return Ta(r,G),null})}function Wa(e,r){var f=e._controlledWritableStream;xa(f);var G=e._writeAlgorithm(r);a(G,function(){wa(f);var K=f._state;if(tt(e),!yt(f)&&K==="writable"){var re=$r(e);Gr(f,re)}return br(e),null},function(K){return f._state==="writable"&&vr(e),Ea(f,K),null})}function $r(e){var r=xn(e);return r<=0}function kn(e,r){var f=e._controlledWritableStream;vr(e),Ur(f,r)}function yr(e){return new TypeError("WritableStream.prototype.".concat(e," can only be used on a WritableStream"))}function Hr(e){return new TypeError("WritableStreamDefaultController.prototype.".concat(e," can only be used on a WritableStreamDefaultController"))}function Ut(e){return new TypeError("WritableStreamDefaultWriter.prototype.".concat(e," can only be used on a WritableStreamDefaultWriter"))}function rr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Sr(e){e._closedPromise=N(function(r,f){e._closedPromise_resolve=r,e._closedPromise_reject=f,e._closedPromiseState="pending"})}function Fn(e,r){Sr(e),Vr(e,r)}function Ua(e){Sr(e),On(e)}function Vr(e,r){e._closedPromise_reject!==void 0&&(C(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ja(e,r){Fn(e,r)}function On(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Ar(e){e._readyPromise=N(function(r,f){e._readyPromise_resolve=r,e._readyPromise_reject=f}),e._readyPromiseState="pending"}function Xr(e,r){Ar(e),In(e,r)}function Mn(e){Ar(e),qr(e)}function In(e,r){e._readyPromise_reject!==void 0&&(C(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ga(e){Ar(e)}function za(e,r){Xr(e,r)}function qr(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}function $a(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof commonjsGlobal<"u")return commonjsGlobal}var Yr=$a();function Ha(e){if(!(typeof e=="function"||typeof e=="object")||e.name!=="DOMException")return!1;try{return new e,!0}catch{return!1}}function Va(){var e=Yr==null?void 0:Yr.DOMException;return Ha(e)?e:void 0}function Xa(){var e=function(f,G){this.message=f||"",this.name=G||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return P(e,"DOMException"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var qa=Va()||Xa();function Dn(e,r,f,G,K,re){var pe=Pe(e),Ce=Sn(r);e._disturbed=!0;var Fe=!1,Te=c(void 0);return N(function(Ue,He){var Ve;if(re!==void 0){if(Ve=function(){var Ge=re.reason!==void 0?re.reason:new qa("Aborted","AbortError"),Je=[];G||Je.push(function(){return r._state==="writable"?mr(r,Ge):c(void 0)}),K||Je.push(function(){return e._state==="readable"?bt(e,Ge):c(void 0)}),ft(function(){return Promise.all(Je.map(function(nt){return nt()}))},!0,Ge)},re.aborted){Ve();return}re.addEventListener("abort",Ve)}function st(){return N(function(Ge,Je){function nt(_t){_t?Ge():d(ht(),nt,Je)}nt(!1)})}function ht(){return Fe?c(!0):d(Ce._readyPromise,function(){return N(function(Ge,Je){ie(pe,{_chunkSteps:function(nt){Te=d(Tn(Ce,nt),void 0,v),Ge(!1)},_closeSteps:function(){return Ge(!0)},_errorSteps:Je})})})}if(lt(e,pe._closedPromise,function(Ge){return G?Tt(!0,Ge):ft(function(){return mr(r,Ge)},!0,Ge),null}),lt(r,Ce._closedPromise,function(Ge){return K?Tt(!0,Ge):ft(function(){return bt(e,Ge)},!0,Ge),null}),At(e,pe._closedPromise,function(){return f?Tt():ft(function(){return Fa(Ce)}),null}),yt(r)||r._state==="closed"){var mt=new TypeError("the destination writable stream closed before all data could be piped to it");K?Tt(!0,mt):ft(function(){return bt(e,mt)},!0,mt)}C(st());function St(){var Ge=Te;return d(Te,function(){return Ge!==Te?St():void 0})}function lt(Ge,Je,nt){Ge._state==="errored"?nt(Ge._storedError):g(Je,nt)}function At(Ge,Je,nt){Ge._state==="closed"?nt():s(Je,nt)}function ft(Ge,Je,nt){if(Fe)return;Fe=!0,r._state==="writable"&&!yt(r)?s(St(),_t):_t();function _t(){return a(Ge(),function(){return rt(Je,nt)},function(Mt){return rt(!0,Mt)}),null}}function Tt(Ge,Je){Fe||(Fe=!0,r._state==="writable"&&!yt(r)?s(St(),function(){return rt(Ge,Je)}):rt(Ge,Je))}function rt(Ge,Je){return Pn(Ce),be(pe),re!==void 0&&re.removeEventListener("abort",Ve),Ge?He(Je):Ue(void 0),null}})}var Pt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!_r(this))throw Er("desiredSize");return Kr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!_r(this))throw Er("close");if(!Yt(this))throw new TypeError("The stream is not in a state that permits close");jt(this)},e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!_r(this))throw Er("enqueue");if(!Yt(this))throw new TypeError("The stream is not in a state that permits enqueue");return qt(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!_r(this))throw Er("error");vt(this,r)},e.prototype[j]=function(r){ut(this);var f=this._cancelAlgorithm(r);return wr(this),f},e.prototype[U]=function(r){var f=this._controlledReadableStream;if(this._queue.length>0){var G=tt(this);this._closeRequested&&this._queue.length===0?(wr(this),ir(f)):nr(this),r._chunkSteps(G)}else Ie(f,r),nr(this)},e.prototype[L]=function(){},e}();Object.defineProperties(Pt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),P(Pt.prototype.close,"close"),P(Pt.prototype.enqueue,"enqueue"),P(Pt.prototype.error,"error"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function _r(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Pt}function nr(e){var r=Ln(e);if(r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var f=e._pullAlgorithm();a(f,function(){return e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,nr(e)),null},function(G){return vt(e,G),null})}}function Ln(e){var r=e._controlledReadableStream;if(!Yt(e)||!e._started)return!1;if(Ft(r)&&Xe(r)>0)return!0;var f=Kr(e);return f>0}function wr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function jt(e){if(Yt(e)){var r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(wr(e),ir(r))}}function qt(e,r){if(Yt(e)){var f=e._controlledReadableStream;if(Ft(f)&&Xe(f)>0)_e(f,r,!1);else{var G=void 0;try{G=e._strategySizeAlgorithm(r)}catch(K){throw vt(e,K),K}try{gt(e,r,G)}catch(K){throw vt(e,K),K}}nr(e)}}function vt(e,r){var f=e._controlledReadableStream;f._state==="readable"&&(ut(e),wr(e),Un(f,r))}function Kr(e){var r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ya(e){return!Ln(e)}function Yt(e){var r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function Nn(e,r,f,G,K,re,pe){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,ut(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=pe,r._strategyHWM=re,r._pullAlgorithm=G,r._cancelAlgorithm=K,e._readableStreamController=r;var Ce=f();a(c(Ce),function(){return r._started=!0,nr(r),null},function(Fe){return vt(r,Fe),null})}function Ka(e,r,f,G){var K=Object.create(Pt.prototype),re,pe,Ce;r.start!==void 0?re=function(){return r.start(K)}:re=function(){},r.pull!==void 0?pe=function(){return r.pull(K)}:pe=function(){return c(void 0)},r.cancel!==void 0?Ce=function(Fe){return r.cancel(Fe)}:Ce=function(){return c(void 0)},Nn(e,K,re,pe,Ce,f,G)}function Er(e){return new TypeError("ReadableStreamDefaultController.prototype.".concat(e," can only be used on a ReadableStreamDefaultController"))}function Qa(e,r){return Lt(e._readableStreamController)?Za(e):Ja(e)}function Ja(e,r){var f=Pe(e),G=!1,K=!1,re=!1,pe=!1,Ce,Fe,Te,Ue,He,Ve=N(function(lt){He=lt});function st(){if(G)return K=!0,c(void 0);G=!0;var lt={_chunkSteps:function(At){B(function(){K=!1;var ft=At,Tt=At;re||qt(Te._readableStreamController,ft),pe||qt(Ue._readableStreamController,Tt),G=!1,K&&st()})},_closeSteps:function(){G=!1,re||jt(Te._readableStreamController),pe||jt(Ue._readableStreamController),(!re||!pe)&&He(void 0)},_errorSteps:function(){G=!1}};return ie(f,lt),c(void 0)}function ht(lt){if(re=!0,Ce=lt,pe){var At=he([Ce,Fe]),ft=bt(e,At);He(ft)}return Ve}function mt(lt){if(pe=!0,Fe=lt,re){var At=he([Ce,Fe]),ft=bt(e,At);He(ft)}return Ve}function St(){}return Te=ar(St,st,ht),Ue=ar(St,st,mt),g(f._closedPromise,function(lt){return vt(Te._readableStreamController,lt),vt(Ue._readableStreamController,lt),(!re||!pe)&&He(void 0),null}),[Te,Ue]}function Za(e){var r=Pe(e),f=!1,G=!1,K=!1,re=!1,pe=!1,Ce,Fe,Te,Ue,He,Ve=N(function(rt){He=rt});function st(rt){g(rt._closedPromise,function(Ge){return rt!==r||(pt(Te._readableStreamController,Ge),pt(Ue._readableStreamController,Ge),(!re||!pe)&&He(void 0)),null})}function ht(){Bt(r)&&(be(r),r=Pe(e),st(r));var rt={_chunkSteps:function(Ge){B(function(){G=!1,K=!1;var Je=Ge,nt=Ge;if(!re&&!pe)try{nt=ot(Ge)}catch(_t){pt(Te._readableStreamController,_t),pt(Ue._readableStreamController,_t),He(bt(e,_t));return}re||cr(Te._readableStreamController,Je),pe||cr(Ue._readableStreamController,nt),f=!1,G?St():K&&lt()})},_closeSteps:function(){f=!1,re||Jt(Te._readableStreamController),pe||Jt(Ue._readableStreamController),Te._readableStreamController._pendingPullIntos.length>0&&ur(Te._readableStreamController,0),Ue._readableStreamController._pendingPullIntos.length>0&&ur(Ue._readableStreamController,0),(!re||!pe)&&He(void 0)},_errorSteps:function(){f=!1}};ie(r,rt)}function mt(rt,Ge){Ee(r)&&(be(r),r=pn(e),st(r));var Je=Ge?Ue:Te,nt=Ge?Te:Ue,_t={_chunkSteps:function(Mt){B(function(){G=!1,K=!1;var Qt=Ge?pe:re,sr=Ge?re:pe;if(sr)Qt||dr(Je._readableStreamController,Mt);else{var Zn=void 0;try{Zn=ot(Mt)}catch(tn){pt(Je._readableStreamController,tn),pt(nt._readableStreamController,tn),He(bt(e,tn));return}Qt||dr(Je._readableStreamController,Mt),cr(nt._readableStreamController,Zn)}f=!1,G?St():K&&lt()})},_closeSteps:function(Mt){f=!1;var Qt=Ge?pe:re,sr=Ge?re:pe;Qt||Jt(Je._readableStreamController),sr||Jt(nt._readableStreamController),Mt!==void 0&&(Qt||dr(Je._readableStreamController,Mt),!sr&&nt._readableStreamController._pendingPullIntos.length>0&&ur(nt._readableStreamController,0)),(!Qt||!sr)&&He(void 0)},_errorSteps:function(){f=!1}};vn(r,rt,1,_t)}function St(){if(f)return G=!0,c(void 0);f=!0;var rt=Lr(Te._readableStreamController);return rt===null?ht():mt(rt._view,!1),c(void 0)}function lt(){if(f)return K=!0,c(void 0);f=!0;var rt=Lr(Ue._readableStreamController);return rt===null?ht():mt(rt._view,!0),c(void 0)}function At(rt){if(re=!0,Ce=rt,pe){var Ge=he([Ce,Fe]),Je=bt(e,Ge);He(Je)}return Ve}function ft(rt){if(pe=!0,Fe=rt,re){var Ge=he([Ce,Fe]),Je=bt(e,Ge);He(Je)}return Ve}function Tt(){}return Te=Wn(Tt,St,At),Ue=Wn(Tt,lt,ft),st(r),[Te,Ue]}function ei(e){return D(e)&&typeof e.getReader<"u"}function ti(e){return ei(e)?ni(e.getReader()):ri(e)}function ri(e){var r,f=Ae(e,"async"),G=v;function K(){var pe;try{pe=ke(f)}catch(Fe){return h(Fe)}var Ce=c(pe);return p(Ce,function(Fe){if(!D(Fe))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");var Te=We(Fe);if(Te)jt(r._readableStreamController);else{var Ue=ze(Fe);qt(r._readableStreamController,Ue)}})}function re(pe){var Ce=f.iterator,Fe;try{Fe=Be(Ce,"return")}catch(He){return h(He)}if(Fe===void 0)return c(void 0);var Te;try{Te=I(Fe,Ce,[pe])}catch(He){return h(He)}var Ue=c(Te);return p(Ue,function(He){if(!D(He))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return r=ar(G,K,re,0),r}function ni(e){var r,f=v;function G(){var re;try{re=e.read()}catch(pe){return h(pe)}return p(re,function(pe){if(!D(pe))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(pe.done)jt(r._readableStreamController);else{var Ce=pe.value;qt(r._readableStreamController,Ce)}})}function K(re){try{return c(e.cancel(re))}catch(pe){return h(pe)}}return r=ar(f,G,K,0),r}function ai(e,r){W(e,r);var f=e,G=f==null?void 0:f.autoAllocateChunkSize,K=f==null?void 0:f.cancel,re=f==null?void 0:f.pull,pe=f==null?void 0:f.start,Ce=f==null?void 0:f.type;return{autoAllocateChunkSize:G===void 0?void 0:Se(G,"".concat(r," has member 'autoAllocateChunkSize' that")),cancel:K===void 0?void 0:ii(K,f,"".concat(r," has member 'cancel' that")),pull:re===void 0?void 0:si(re,f,"".concat(r," has member 'pull' that")),start:pe===void 0?void 0:oi(pe,f,"".concat(r," has member 'start' that")),type:Ce===void 0?void 0:li(Ce,"".concat(r," has member 'type' that"))}}function ii(e,r,f){return H(e,f),function(G){return J(e,r,[G])}}function si(e,r,f){return H(e,f),function(G){return J(e,r,[G])}}function oi(e,r,f){return H(e,f),function(G){return I(e,r,[G])}}function li(e,r){if(e="".concat(e),e!=="bytes")throw new TypeError("".concat(r," '").concat(e,"' is not a valid enumeration value for ReadableStreamType"));return e}function ci(e,r){W(e,r);var f=e==null?void 0:e.preventCancel;return{preventCancel:!!f}}function Bn(e,r){W(e,r);var f=e==null?void 0:e.preventAbort,G=e==null?void 0:e.preventCancel,K=e==null?void 0:e.preventClose,re=e==null?void 0:e.signal;return re!==void 0&&ui(re,"".concat(r," has member 'signal' that")),{preventAbort:!!f,preventCancel:!!G,preventClose:!!K,signal:re}}function ui(e,r){if(!ba(e))throw new TypeError("".concat(r," is not an AbortSignal."))}function di(e,r){W(e,r);var f=e==null?void 0:e.readable;ue(f,"readable","ReadableWritablePair"),we(f,"".concat(r," has member 'readable' that"));var G=e==null?void 0:e.writable;return ue(G,"writable","ReadableWritablePair"),yn(G,"".concat(r," has member 'writable' that")),{readable:f,writable:G}}var ct=function(){function e(r,f){r===void 0&&(r={}),f===void 0&&(f={}),r===void 0?r=null:ne(r,"First parameter");var G=pr(f,"Second parameter"),K=ai(r,"First parameter");if(Qr(this),K.type==="bytes"){if(G.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var re=er(G,0);ia(this,K,re)}else{var pe=fr(G),re=er(G,1);Ka(this,K,re,pe)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!kt(this))throw Gt("locked");return Ft(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),kt(this)?Ft(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):bt(this,r):h(Gt("cancel"))},e.prototype.getReader=function(r){if(r===void 0&&(r=void 0),!kt(this))throw Gt("getReader");var f=oa(r,"First parameter");return f.mode===void 0?Pe(this):pn(this)},e.prototype.pipeThrough=function(r,f){if(f===void 0&&(f={}),!kt(this))throw Gt("pipeThrough");se(r,1,"pipeThrough");var G=di(r,"First parameter"),K=Bn(f,"Second parameter");if(Ft(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Vt(G.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var re=Dn(this,G.writable,K.preventClose,K.preventAbort,K.preventCancel,K.signal);return C(re),G.readable},e.prototype.pipeTo=function(r,f){if(f===void 0&&(f={}),!kt(this))return h(Gt("pipeTo"));if(r===void 0)return h("Parameter 1 is required in 'pipeTo'.");if(!Ht(r))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var G;try{G=Bn(f,"Second parameter")}catch(K){return h(K)}return Ft(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Vt(r)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Dn(this,r,G.preventClose,G.preventAbort,G.preventCancel,G.signal)},e.prototype.tee=function(){if(!kt(this))throw Gt("tee");var r=Qa(this);return he(r)},e.prototype.values=function(r){if(r===void 0&&(r=void 0),!kt(this))throw Gt("values");var f=ci(r,"First parameter");return at(this,f.preventCancel)},e.prototype[oe]=function(r){return this.values(r)},e.from=function(r){return ti(r)},e}();Object.defineProperties(ct,{from:{enumerable:!0}}),Object.defineProperties(ct.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),P(ct.from,"from"),P(ct.prototype.cancel,"cancel"),P(ct.prototype.getReader,"getReader"),P(ct.prototype.pipeThrough,"pipeThrough"),P(ct.prototype.pipeTo,"pipeTo"),P(ct.prototype.tee,"tee"),P(ct.prototype.values,"values"),typeof n.toStringTag=="symbol"&&Object.defineProperty(ct.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(ct.prototype,oe,{value:ct.prototype.values,writable:!0,configurable:!0});function ar(e,r,f,G,K){G===void 0&&(G=1),K===void 0&&(K=function(){return 1});var re=Object.create(ct.prototype);Qr(re);var pe=Object.create(Pt.prototype);return Nn(re,pe,e,r,f,G,K),re}function Wn(e,r,f){var G=Object.create(ct.prototype);Qr(G);var K=Object.create(wt.prototype);return fn(G,K,e,r,f,0,void 0),G}function Qr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function kt(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof ct}function Ft(e){return e._reader!==void 0}function bt(e,r){if(e._disturbed=!0,e._state==="closed")return c(void 0);if(e._state==="errored")return h(e._storedError);ir(e);var f=e._reader;if(f!==void 0&&Bt(f)){var G=f._readIntoRequests;f._readIntoRequests=new q,G.forEach(function(re){re._closeSteps(void 0)})}var K=e._readableStreamController[j](r);return p(K,v)}function ir(e){e._state="closed";var r=e._reader;if(r!==void 0&&(l(r),Ee(r))){var f=r._readRequests;r._readRequests=new q,f.forEach(function(G){G._closeSteps()})}}function Un(e,r){e._state="errored",e._storedError=r;var f=e._reader;f!==void 0&&(z(f,r),Ee(f)?Le(f,r):bn(f,r))}function Gt(e){return new TypeError("ReadableStream.prototype.".concat(e," can only be used on a ReadableStream"))}function jn(e,r){W(e,r);var f=e==null?void 0:e.highWaterMark;return ue(f,"highWaterMark","QueuingStrategyInit"),{highWaterMark:le(f)}}var Gn=function(e){return e.byteLength};P(Gn,"size");var Pr=function(){function e(r){se(r,1,"ByteLengthQueuingStrategy"),r=jn(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!$n(this))throw zn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!$n(this))throw zn("size");return Gn},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Pr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Pr.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function zn(e){return new TypeError("ByteLengthQueuingStrategy.prototype.".concat(e," can only be used on a ByteLengthQueuingStrategy"))}function $n(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Pr}var Hn=function(){return 1};P(Hn,"size");var Tr=function(){function e(r){se(r,1,"CountQueuingStrategy"),r=jn(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Xn(this))throw Vn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Xn(this))throw Vn("size");return Hn},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Tr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Tr.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Vn(e){return new TypeError("CountQueuingStrategy.prototype.".concat(e," can only be used on a CountQueuingStrategy"))}function Xn(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Tr}function hi(e,r){W(e,r);var f=e==null?void 0:e.cancel,G=e==null?void 0:e.flush,K=e==null?void 0:e.readableType,re=e==null?void 0:e.start,pe=e==null?void 0:e.transform,Ce=e==null?void 0:e.writableType;return{cancel:f===void 0?void 0:gi(f,e,"".concat(r," has member 'cancel' that")),flush:G===void 0?void 0:fi(G,e,"".concat(r," has member 'flush' that")),readableType:K,start:re===void 0?void 0:pi(re,e,"".concat(r," has member 'start' that")),transform:pe===void 0?void 0:mi(pe,e,"".concat(r," has member 'transform' that")),writableType:Ce}}function fi(e,r,f){return H(e,f),function(G){return J(e,r,[G])}}function pi(e,r,f){return H(e,f),function(G){return I(e,r,[G])}}function mi(e,r,f){return H(e,f),function(G,K){return J(e,r,[G,K])}}function gi(e,r,f){return H(e,f),function(G){return J(e,r,[G])}}var Cr=function(){function e(r,f,G){r===void 0&&(r={}),f===void 0&&(f={}),G===void 0&&(G={}),r===void 0&&(r=null);var K=pr(f,"Second parameter"),re=pr(G,"Third parameter"),pe=hi(r,"First parameter");if(pe.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(pe.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Ce=er(re,0),Fe=fr(re),Te=er(K,1),Ue=fr(K),He,Ve=N(function(st){He=st});vi(this,Ve,Te,Ue,Ce,Fe),yi(this,pe),pe.start!==void 0?He(pe.start(this._transformStreamController)):He(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!qn(this))throw Jn("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!qn(this))throw Jn("writable");return this._writable},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Cr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});function vi(e,r,f,G,K,re){function pe(){return r}function Ce(Ve){return _i(e,Ve)}function Fe(Ve){return wi(e,Ve)}function Te(){return Ei(e)}e._writable=Aa(pe,Ce,Te,Fe,f,G);function Ue(){return Pi(e)}function He(Ve){return Ti(e,Ve)}e._readable=ar(pe,Ue,He,K,re),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Rr(e,!0),e._transformStreamController=void 0}function qn(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Cr}function Yn(e,r){vt(e._readable._readableStreamController,r),Jr(e,r)}function Jr(e,r){kr(e._transformStreamController),tr(e._writable._writableStreamController,r),Zr(e)}function Zr(e){e._backpressure&&Rr(e,!1)}function Rr(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=N(function(f){e._backpressureChangePromise_resolve=f}),e._backpressure=r}var Ot=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!xr(this))throw Fr("desiredSize");var r=this._controlledTransformStream._readable._readableStreamController;return Kr(r)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!xr(this))throw Fr("enqueue");Kn(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!xr(this))throw Fr("error");Si(this,r)},e.prototype.terminate=function(){if(!xr(this))throw Fr("terminate");Ai(this)},e}();Object.defineProperties(Ot.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),P(Ot.prototype.enqueue,"enqueue"),P(Ot.prototype.error,"error"),P(Ot.prototype.terminate,"terminate"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function xr(e){return!D(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Ot}function bi(e,r,f,G,K){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=f,r._flushAlgorithm=G,r._cancelAlgorithm=K,r._finishPromise=void 0,r._finishPromise_resolve=void 0,r._finishPromise_reject=void 0}function yi(e,r){var f=Object.create(Ot.prototype),G,K,re;r.transform!==void 0?G=function(pe){return r.transform(pe,f)}:G=function(pe){try{return Kn(f,pe),c(void 0)}catch(Ce){return h(Ce)}},r.flush!==void 0?K=function(){return r.flush(f)}:K=function(){return c(void 0)},r.cancel!==void 0?re=function(pe){return r.cancel(pe)}:re=function(){return c(void 0)},bi(e,f,G,K,re)}function kr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function Kn(e,r){var f=e._controlledTransformStream,G=f._readable._readableStreamController;if(!Yt(G))throw new TypeError("Readable side is not in a state that permits enqueue");try{qt(G,r)}catch(re){throw Jr(f,re),f._readable._storedError}var K=Ya(G);K!==f._backpressure&&Rr(f,!0)}function Si(e,r){Yn(e._controlledTransformStream,r)}function Qn(e,r){var f=e._transformAlgorithm(r);return p(f,void 0,function(G){throw Yn(e._controlledTransformStream,G),G})}function Ai(e){var r=e._controlledTransformStream,f=r._readable._readableStreamController;jt(f);var G=new TypeError("TransformStream terminated");Jr(r,G)}function _i(e,r){var f=e._transformStreamController;if(e._backpressure){var G=e._backpressureChangePromise;return p(G,function(){var K=e._writable,re=K._state;if(re==="erroring")throw K._storedError;return Qn(f,r)})}return Qn(f,r)}function wi(e,r){var f=e._transformStreamController;if(f._finishPromise!==void 0)return f._finishPromise;var G=e._readable;f._finishPromise=N(function(re,pe){f._finishPromise_resolve=re,f._finishPromise_reject=pe});var K=f._cancelAlgorithm(r);return kr(f),a(K,function(){return G._state==="errored"?Kt(f,G._storedError):(vt(G._readableStreamController,r),en(f)),null},function(re){return vt(G._readableStreamController,re),Kt(f,re),null}),f._finishPromise}function Ei(e){var r=e._transformStreamController;if(r._finishPromise!==void 0)return r._finishPromise;var f=e._readable;r._finishPromise=N(function(K,re){r._finishPromise_resolve=K,r._finishPromise_reject=re});var G=r._flushAlgorithm();return kr(r),a(G,function(){return f._state==="errored"?Kt(r,f._storedError):(jt(f._readableStreamController),en(r)),null},function(K){return vt(f._readableStreamController,K),Kt(r,K),null}),r._finishPromise}function Pi(e){return Rr(e,!1),e._backpressureChangePromise}function Ti(e,r){var f=e._transformStreamController;if(f._finishPromise!==void 0)return f._finishPromise;var G=e._writable;f._finishPromise=N(function(re,pe){f._finishPromise_resolve=re,f._finishPromise_reject=pe});var K=f._cancelAlgorithm(r);return kr(f),a(K,function(){return G._state==="errored"?Kt(f,G._storedError):(tr(G._writableStreamController,r),Zr(e),en(f)),null},function(re){return tr(G._writableStreamController,re),Zr(e),Kt(f,re),null}),f._finishPromise}function Fr(e){return new TypeError("TransformStreamDefaultController.prototype.".concat(e," can only be used on a TransformStreamDefaultController"))}function en(e){e._finishPromise_resolve!==void 0&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Kt(e,r){e._finishPromise_reject!==void 0&&(C(e._finishPromise),e._finishPromise_reject(r),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Jn(e){return new TypeError("TransformStream.prototype.".concat(e," can only be used on a TransformStream"))}t.ByteLengthQueuingStrategy=Pr,t.CountQueuingStrategy=Tr,t.ReadableByteStreamController=wt,t.ReadableStream=ct,t.ReadableStreamBYOBReader=Rt,t.ReadableStreamBYOBRequest=dt,t.ReadableStreamDefaultController=Pt,t.ReadableStreamDefaultReader=Oe,t.TransformStream=Cr,t.TransformStreamDefaultController=Ot,t.WritableStream=xt,t.WritableStreamDefaultController=Xt,t.WritableStreamDefaultWriter=Et})}(ponyfill,ponyfill.exports)),ponyfill.exports}(function(module,exports){(function(i,t){module.exports=t()})(globalThis,()=>(()=>{var __webpack_modules__=[,(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.UNSUPPORTED_FEATURES=i.TextRenderingMode=i.StreamType=i.RenderingIntentFlag=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FontType=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.AnnotationType=i.AnnotationStateModelType=i.AnnotationReviewState=i.AnnotationReplyType=i.AnnotationMode=i.AnnotationMarkedState=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.arrayByteLength=se,i.arraysToBytes=ue,i.assert=Re,i.bytesToString=ee,i.createPromiseCapability=Ne,i.createValidAbsoluteUrl=_,i.escapeString=Oe,i.getModificationDate=xe,i.getVerbosityLevel=L,i.info=Z,i.isArrayBuffer=Ke,i.isArrayEqual=ve,i.isAscii=Ee,i.objectFromMap=ge,i.objectSize=de,i.setVerbosityLevel=U,i.shadow=T,i.string32=le,i.stringToBytes=ne,i.stringToPDFString=Qe,i.stringToUTF16BEString=ie,i.stringToUTF8String=ye,i.unreachable=be,i.utf8StringToString=Le,i.warn=ce,t(2);const n=[1,0,0,1,0,0];i.IDENTITY_MATRIX=n;const o=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=o;const m=1.35;i.LINE_FACTOR=m;const S=.35;i.LINE_DESCENT_FACTOR=S;const x={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=x;const R={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=R;const y="pdfjs_internal_editor_";i.AnnotationEditorPrefix=y;const v={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};i.AnnotationEditorType=v;const D={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};i.AnnotationEditorParamsType=D;const u={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=u;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=P;const M={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=M;const A={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=A;const F={MARKED:"Marked",REVIEW:"Review"};i.AnnotationStateModelType=F;const N={MARKED:"Marked",UNMARKED:"Unmarked"};i.AnnotationMarkedState=N;const c={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};i.AnnotationReviewState=c;const h={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=h;const d={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=d;const a={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=a;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=s;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=g;const p={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=p;const C={O:"PageOpen",C:"PageClose"};i.PageActionEventType=C;const B={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};i.StreamType=B;const I={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};i.FontType=I;const J={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=J;const Y={NONE:0,BINARY:1,STREAM:2};i.CMapCompressionType=Y;const q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=q;const Q={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};i.UNSUPPORTED_FEATURES=Q;const V={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=V;let j=J.WARNINGS;function U(he){Number.isInteger(he)&&(j=he)}function L(){return j}function Z(he){j>=J.INFOS&&console.log(`Info: ${he}`)}function ce(he){j>=J.WARNINGS&&console.log(`Warning: ${he}`)}function be(he){throw new Error(he)}function Re(he,te){he||be(te)}function X(he){if(!he)return!1;switch(he.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _(he){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!he)return null;try{if(ae&&typeof he=="string"){if(ae.addDefaultProtocol&&he.startsWith("www.")){const Me=he.match(/\./g);Me&&Me.length>=2&&(he=`http://${he}`)}if(ae.tryConvertEncoding)try{he=ye(he)}catch{}}const me=te?new URL(he,te):new URL(he);if(X(me))return me}catch{}return null}function T(he,te,ae){return Object.defineProperty(he,te,{value:ae,enumerable:!0,configurable:!0,writable:!1}),ae}const z=function(){function te(ae,me){this.constructor===te&&be("Cannot initialize BaseException."),this.message=ae,this.name=me}return te.prototype=new Error,te.constructor=te,te}();i.BaseException=z;class $ extends z{constructor(te,ae){super(te,"PasswordException"),this.code=ae}}i.PasswordException=$;class l extends z{constructor(te,ae){super(te,"UnknownErrorException"),this.details=ae}}i.UnknownErrorException=l;class b extends z{constructor(te){super(te,"InvalidPDFException")}}i.InvalidPDFException=b;class w extends z{constructor(te){super(te,"MissingPDFException")}}i.MissingPDFException=w;class O extends z{constructor(te,ae){super(te,"UnexpectedResponseException"),this.status=ae}}i.UnexpectedResponseException=O;class W extends z{constructor(te){super(te,"FormatError")}}i.FormatError=W;class H extends z{constructor(te){super(te,"AbortException")}}i.AbortException=H;function ee(he){(typeof he!="object"||he===null||he.length===void 0)&&be("Invalid argument for bytesToString");const te=he.length,ae=8192;if(te<ae)return String.fromCharCode.apply(null,he);const me=[];for(let Me=0;Me<te;Me+=ae){const Be=Math.min(Me+ae,te),fe=he.subarray(Me,Be);me.push(String.fromCharCode.apply(null,fe))}return me.join("")}function ne(he){typeof he!="string"&&be("Invalid argument for stringToBytes");const te=he.length,ae=new Uint8Array(te);for(let me=0;me<te;++me)ae[me]=he.charCodeAt(me)&255;return ae}function se(he){if(he.length!==void 0)return he.length;if(he.byteLength!==void 0)return he.byteLength;be("Invalid argument for arrayByteLength")}function ue(he){const te=he.length;if(te===1&&he[0]instanceof Uint8Array)return he[0];let ae=0;for(let Be=0;Be<te;Be++)ae+=se(he[Be]);let me=0;const Me=new Uint8Array(ae);for(let Be=0;Be<te;Be++){let fe=he[Be];fe instanceof Uint8Array||(typeof fe=="string"?fe=ne(fe):fe=new Uint8Array(fe));const oe=fe.byteLength;Me.set(fe,me),me+=oe}return Me}function le(he){return String.fromCharCode(he>>24&255,he>>16&255,he>>8&255,he&255)}function de(he){return Object.keys(he).length}function ge(he){const te=Object.create(null);for(const[ae,me]of he)te[ae]=me;return te}function Se(){const he=new Uint8Array(4);return he[0]=1,new Uint32Array(he.buffer,0,1)[0]===1}function we(){try{return new Function(""),!0}catch{return!1}}class Pe{static get isLittleEndian(){return T(this,"isLittleEndian",Se())}static get isEvalSupported(){return T(this,"isEvalSupported",we())}static get isOffscreenCanvasSupported(){return T(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}i.FeatureTest=Pe;const Ie=[...Array(256).keys()].map(he=>he.toString(16).padStart(2,"0"));class _e{static makeHexColor(te,ae,me){return`#${Ie[te]}${Ie[ae]}${Ie[me]}`}static scaleMinMax(te,ae){let me;te[0]?(te[0]<0&&(me=ae[0],ae[0]=ae[1],ae[1]=me),ae[0]*=te[0],ae[1]*=te[0],te[3]<0&&(me=ae[2],ae[2]=ae[3],ae[3]=me),ae[2]*=te[3],ae[3]*=te[3]):(me=ae[0],ae[0]=ae[2],ae[2]=me,me=ae[1],ae[1]=ae[3],ae[3]=me,te[1]<0&&(me=ae[2],ae[2]=ae[3],ae[3]=me),ae[2]*=te[1],ae[3]*=te[1],te[2]<0&&(me=ae[0],ae[0]=ae[1],ae[1]=me),ae[0]*=te[2],ae[1]*=te[2]),ae[0]+=te[4],ae[1]+=te[4],ae[2]+=te[5],ae[3]+=te[5]}static transform(te,ae){return[te[0]*ae[0]+te[2]*ae[1],te[1]*ae[0]+te[3]*ae[1],te[0]*ae[2]+te[2]*ae[3],te[1]*ae[2]+te[3]*ae[3],te[0]*ae[4]+te[2]*ae[5]+te[4],te[1]*ae[4]+te[3]*ae[5]+te[5]]}static applyTransform(te,ae){const me=te[0]*ae[0]+te[1]*ae[2]+ae[4],Me=te[0]*ae[1]+te[1]*ae[3]+ae[5];return[me,Me]}static applyInverseTransform(te,ae){const me=ae[0]*ae[3]-ae[1]*ae[2],Me=(te[0]*ae[3]-te[1]*ae[2]+ae[2]*ae[5]-ae[4]*ae[3])/me,Be=(-te[0]*ae[1]+te[1]*ae[0]+ae[4]*ae[1]-ae[5]*ae[0])/me;return[Me,Be]}static getAxialAlignedBoundingBox(te,ae){const me=_e.applyTransform(te,ae),Me=_e.applyTransform(te.slice(2,4),ae),Be=_e.applyTransform([te[0],te[3]],ae),fe=_e.applyTransform([te[2],te[1]],ae);return[Math.min(me[0],Me[0],Be[0],fe[0]),Math.min(me[1],Me[1],Be[1],fe[1]),Math.max(me[0],Me[0],Be[0],fe[0]),Math.max(me[1],Me[1],Be[1],fe[1])]}static inverseTransform(te){const ae=te[0]*te[3]-te[1]*te[2];return[te[3]/ae,-te[1]/ae,-te[2]/ae,te[0]/ae,(te[2]*te[5]-te[4]*te[3])/ae,(te[4]*te[1]-te[5]*te[0])/ae]}static apply3dTransform(te,ae){return[te[0]*ae[0]+te[1]*ae[1]+te[2]*ae[2],te[3]*ae[0]+te[4]*ae[1]+te[5]*ae[2],te[6]*ae[0]+te[7]*ae[1]+te[8]*ae[2]]}static singularValueDecompose2dScale(te){const ae=[te[0],te[2],te[1],te[3]],me=te[0]*ae[0]+te[1]*ae[2],Me=te[0]*ae[1]+te[1]*ae[3],Be=te[2]*ae[0]+te[3]*ae[2],fe=te[2]*ae[1]+te[3]*ae[3],oe=(me+fe)/2,Ae=Math.sqrt((me+fe)**2-4*(me*fe-Be*Me))/2,ke=oe+Ae||1,We=oe-Ae||1;return[Math.sqrt(ke),Math.sqrt(We)]}static normalizeRect(te){const ae=te.slice(0);return te[0]>te[2]&&(ae[0]=te[2],ae[2]=te[0]),te[1]>te[3]&&(ae[1]=te[3],ae[3]=te[1]),ae}static intersect(te,ae){const me=Math.max(Math.min(te[0],te[2]),Math.min(ae[0],ae[2])),Me=Math.min(Math.max(te[0],te[2]),Math.max(ae[0],ae[2]));if(me>Me)return null;const Be=Math.max(Math.min(te[1],te[3]),Math.min(ae[1],ae[3])),fe=Math.min(Math.max(te[1],te[3]),Math.max(ae[1],ae[3]));return Be>fe?null:[me,Be,Me,fe]}static bezierBoundingBox(te,ae,me,Me,Be,fe,oe,Ae){const ke=[],We=[[],[]];let ze,je,$e,De,Ye,at,qe,Ze;for(let tt=0;tt<2;++tt){if(tt===0?(je=6*te-12*me+6*Be,ze=-3*te+9*me-9*Be+3*oe,$e=3*me-3*te):(je=6*ae-12*Me+6*fe,ze=-3*ae+9*Me-9*fe+3*Ae,$e=3*Me-3*ae),Math.abs(ze)<1e-12){if(Math.abs(je)<1e-12)continue;De=-$e/je,0<De&&De<1&&ke.push(De);continue}qe=je*je-4*$e*ze,Ze=Math.sqrt(qe),!(qe<0)&&(Ye=(-je+Ze)/(2*ze),0<Ye&&Ye<1&&ke.push(Ye),at=(-je-Ze)/(2*ze),0<at&&at<1&&ke.push(at))}let it=ke.length,et;const ot=it;for(;it--;)De=ke[it],et=1-De,We[0][it]=et*et*et*te+3*et*et*De*me+3*et*De*De*Be+De*De*De*oe,We[1][it]=et*et*et*ae+3*et*et*De*Me+3*et*De*De*fe+De*De*De*Ae;return We[0][ot]=te,We[1][ot]=ae,We[0][ot+1]=oe,We[1][ot+1]=Ae,We[0].length=We[1].length=ot+2,[Math.min(...We[0]),Math.min(...We[1]),Math.max(...We[0]),Math.max(...We[1])]}}i.Util=_e;const Xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Qe(he){if(he[0]>="Ã¯"){let ae;if(he[0]==="Ã¾"&&he[1]==="Ã¿"?ae="utf-16be":he[0]==="Ã¿"&&he[1]==="Ã¾"?ae="utf-16le":he[0]==="Ã¯"&&he[1]==="Â»"&&he[2]==="Â¿"&&(ae="utf-8"),ae)try{const me=new TextDecoder(ae,{fatal:!0}),Me=ne(he);return me.decode(Me)}catch(me){ce(`stringToPDFString: "${me}".`)}}const te=[];for(let ae=0,me=he.length;ae<me;ae++){const Me=Xe[he.charCodeAt(ae)];te.push(Me?String.fromCharCode(Me):he.charAt(ae))}return te.join("")}function Oe(he){return he.replace(/([()\\\n\r])/g,te=>te===`
`?"\\n":te==="\r"?"\\r":`\\${te}`)}function Ee(he){return/^[\x00-\x7F]*$/.test(he)}function ie(he){const te=["Ã¾Ã¿"];for(let ae=0,me=he.length;ae<me;ae++){const Me=he.charCodeAt(ae);te.push(String.fromCharCode(Me>>8&255),String.fromCharCode(Me&255))}return te.join("")}function ye(he){return decodeURIComponent(escape(he))}function Le(he){return unescape(encodeURIComponent(he))}function Ke(he){return typeof he=="object"&&he!==null&&he.byteLength!==void 0}function ve(he,te){if(he.length!==te.length)return!1;for(let ae=0,me=he.length;ae<me;ae++)if(he[ae]!==te[ae])return!1;return!0}function xe(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[he.getUTCFullYear().toString(),(he.getUTCMonth()+1).toString().padStart(2,"0"),he.getUTCDate().toString().padStart(2,"0"),he.getUTCHours().toString().padStart(2,"0"),he.getUTCMinutes().toString().padStart(2,"0"),he.getUTCSeconds().toString().padStart(2,"0")].join("")}function Ne(){const he=Object.create(null);let te=!1;return Object.defineProperty(he,"settled",{get(){return te}}),he.promise=new Promise(function(ae,me){he.resolve=function(Me){te=!0,ae(Me)},he.reject=function(Me){te=!0,me(Me)}}),he}},(k,i,t)=>{var n=t(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!n.isNodeJS||(globalThis.btoa=function(m){return Buffer.from(m,"binary").toString("base64")})}(),function(){globalThis.atob||!n.isNodeJS||(globalThis.atob=function(m){return Buffer.from(m,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!n.isNodeJS||(globalThis.DOMMatrix=requireDommatrix())}(),function(){globalThis.ReadableStream||!n.isNodeJS||(globalThis.ReadableStream=requirePonyfill().ReadableStream)}(),function(){Array.prototype.at||t(4)}(),function(){Uint8Array.prototype.at||t(76)}(),function(){globalThis.structuredClone||t(86)}())},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isNodeJS=void 0;const t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=t},(k,i,t)=>{t(5);var n=t(75);k.exports=n("Array","at")},(k,i,t)=>{var n=t(6),o=t(41),m=t(65),S=t(63),x=t(70);n({target:"Array",proto:!0},{at:function(y){var v=o(this),D=m(v),u=S(y),P=u>=0?u:D+u;return P<0||P>=D?void 0:v[P]}}),x("at")},(k,i,t)=>{var n=t(7),o=t(8).f,m=t(45),S=t(49),x=t(39),R=t(57),y=t(69);k.exports=function(v,D){var u=v.target,P=v.global,M=v.stat,A,F,N,c,h,d;if(P?F=n:M?F=n[u]||x(u,{}):F=(n[u]||{}).prototype,F)for(N in D){if(h=D[N],v.dontCallGetSet?(d=o(F,N),c=d&&d.value):c=F[N],A=y(P?N:u+(M?".":"#")+N,v.forced),!A&&c!==void 0){if(typeof h==typeof c)continue;R(h,c)}(v.sham||c&&c.sham)&&m(h,"sham",!0),S(F,N,h,v)}}},k=>{var i=function(t){return t&&t.Math==Math&&t};k.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(k,i,t)=>{var n=t(9),o=t(11),m=t(13),S=t(14),x=t(15),R=t(20),y=t(40),v=t(43),D=Object.getOwnPropertyDescriptor;i.f=n?D:function(P,M){if(P=x(P),M=R(M),v)try{return D(P,M)}catch{}if(y(P,M))return S(!o(m.f,P,M),P[M])}},(k,i,t)=>{var n=t(10);k.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},k=>{k.exports=function(i){try{return!!i()}catch{return!0}}},(k,i,t)=>{var n=t(12),o=Function.prototype.call;k.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},(k,i,t)=>{var n=t(10);k.exports=!n(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},(k,i)=>{var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!t.call({1:2},1);i.f=o?function(S){var x=n(this,S);return!!x&&x.enumerable}:t},k=>{k.exports=function(i,t){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:t}}},(k,i,t)=>{var n=t(16),o=t(19);k.exports=function(m){return n(o(m))}},(k,i,t)=>{var n=t(17),o=t(10),m=t(18),S=Object,x=n("".split);k.exports=o(function(){return!S("z").propertyIsEnumerable(0)})?function(R){return m(R)=="String"?x(R,""):S(R)}:S},(k,i,t)=>{var n=t(12),o=Function.prototype,m=o.bind,S=o.call,x=n&&m.bind(S,S);k.exports=n?function(R){return R&&x(R)}:function(R){return R&&function(){return S.apply(R,arguments)}}},(k,i,t)=>{var n=t(17),o=n({}.toString),m=n("".slice);k.exports=function(S){return m(o(S),8,-1)}},k=>{var i=TypeError;k.exports=function(t){if(t==null)throw i("Can't call method on "+t);return t}},(k,i,t)=>{var n=t(21),o=t(24);k.exports=function(m){var S=n(m,"string");return o(S)?S:S+""}},(k,i,t)=>{var n=t(11),o=t(22),m=t(24),S=t(31),x=t(34),R=t(35),y=TypeError,v=R("toPrimitive");k.exports=function(D,u){if(!o(D)||m(D))return D;var P=S(D,v),M;if(P){if(u===void 0&&(u="default"),M=n(P,D,u),!o(M)||m(M))return M;throw y("Can't convert object to primitive value")}return u===void 0&&(u="number"),x(D,u)}},(k,i,t)=>{var n=t(23);k.exports=function(o){return typeof o=="object"?o!==null:n(o)}},k=>{k.exports=function(i){return typeof i=="function"}},(k,i,t)=>{var n=t(25),o=t(23),m=t(26),S=t(27),x=Object;k.exports=S?function(R){return typeof R=="symbol"}:function(R){var y=n("Symbol");return o(y)&&m(y.prototype,x(R))}},(k,i,t)=>{var n=t(7),o=t(23),m=function(S){return o(S)?S:void 0};k.exports=function(S,x){return arguments.length<2?m(n[S]):n[S]&&n[S][x]}},(k,i,t)=>{var n=t(17);k.exports=n({}.isPrototypeOf)},(k,i,t)=>{var n=t(28);k.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(k,i,t)=>{var n=t(29),o=t(10);k.exports=!!Object.getOwnPropertySymbols&&!o(function(){var m=Symbol();return!String(m)||!(Object(m)instanceof Symbol)||!Symbol.sham&&n&&n<41})},(k,i,t)=>{var n=t(7),o=t(30),m=n.process,S=n.Deno,x=m&&m.versions||S&&S.version,R=x&&x.v8,y,v;R&&(y=R.split("."),v=y[0]>0&&y[0]<4?1:+(y[0]+y[1])),!v&&o&&(y=o.match(/Edge\/(\d+)/),(!y||y[1]>=74)&&(y=o.match(/Chrome\/(\d+)/),y&&(v=+y[1]))),k.exports=v},(k,i,t)=>{var n=t(25);k.exports=n("navigator","userAgent")||""},(k,i,t)=>{var n=t(32);k.exports=function(o,m){var S=o[m];return S==null?void 0:n(S)}},(k,i,t)=>{var n=t(23),o=t(33),m=TypeError;k.exports=function(S){if(n(S))return S;throw m(o(S)+" is not a function")}},k=>{var i=String;k.exports=function(t){try{return i(t)}catch{return"Object"}}},(k,i,t)=>{var n=t(11),o=t(23),m=t(22),S=TypeError;k.exports=function(x,R){var y,v;if(R==="string"&&o(y=x.toString)&&!m(v=n(y,x))||o(y=x.valueOf)&&!m(v=n(y,x))||R!=="string"&&o(y=x.toString)&&!m(v=n(y,x)))return v;throw S("Can't convert object to primitive value")}},(k,i,t)=>{var n=t(7),o=t(36),m=t(40),S=t(42),x=t(28),R=t(27),y=o("wks"),v=n.Symbol,D=v&&v.for,u=R?v:v&&v.withoutSetter||S;k.exports=function(P){if(!m(y,P)||!(x||typeof y[P]=="string")){var M="Symbol."+P;x&&m(v,P)?y[P]=v[P]:R&&D?y[P]=D(M):y[P]=u(M)}return y[P]}},(k,i,t)=>{var n=t(37),o=t(38);(k.exports=function(m,S){return o[m]||(o[m]=S!==void 0?S:{})})("versions",[]).push({version:"3.24.1",mode:n?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},k=>{k.exports=!1},(k,i,t)=>{var n=t(7),o=t(39),m="__core-js_shared__",S=n[m]||o(m,{});k.exports=S},(k,i,t)=>{var n=t(7),o=Object.defineProperty;k.exports=function(m,S){try{o(n,m,{value:S,configurable:!0,writable:!0})}catch{n[m]=S}return S}},(k,i,t)=>{var n=t(17),o=t(41),m=n({}.hasOwnProperty);k.exports=Object.hasOwn||function(x,R){return m(o(x),R)}},(k,i,t)=>{var n=t(19),o=Object;k.exports=function(m){return o(n(m))}},(k,i,t)=>{var n=t(17),o=0,m=Math.random(),S=n(1 .toString);k.exports=function(x){return"Symbol("+(x===void 0?"":x)+")_"+S(++o+m,36)}},(k,i,t)=>{var n=t(9),o=t(10),m=t(44);k.exports=!n&&!o(function(){return Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a!=7})},(k,i,t)=>{var n=t(7),o=t(22),m=n.document,S=o(m)&&o(m.createElement);k.exports=function(x){return S?m.createElement(x):{}}},(k,i,t)=>{var n=t(9),o=t(46),m=t(14);k.exports=n?function(S,x,R){return o.f(S,x,m(1,R))}:function(S,x,R){return S[x]=R,S}},(k,i,t)=>{var n=t(9),o=t(43),m=t(47),S=t(48),x=t(20),R=TypeError,y=Object.defineProperty,v=Object.getOwnPropertyDescriptor,D="enumerable",u="configurable",P="writable";i.f=n?m?function(A,F,N){if(S(A),F=x(F),S(N),typeof A=="function"&&F==="prototype"&&"value"in N&&P in N&&!N[P]){var c=v(A,F);c&&c[P]&&(A[F]=N.value,N={configurable:u in N?N[u]:c[u],enumerable:D in N?N[D]:c[D],writable:!1})}return y(A,F,N)}:y:function(A,F,N){if(S(A),F=x(F),S(N),o)try{return y(A,F,N)}catch{}if("get"in N||"set"in N)throw R("Accessors not supported");return"value"in N&&(A[F]=N.value),A}},(k,i,t)=>{var n=t(9),o=t(10);k.exports=n&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(k,i,t)=>{var n=t(22),o=String,m=TypeError;k.exports=function(S){if(n(S))return S;throw m(o(S)+" is not an object")}},(k,i,t)=>{var n=t(23),o=t(46),m=t(50),S=t(39);k.exports=function(x,R,y,v){v||(v={});var D=v.enumerable,u=v.name!==void 0?v.name:R;if(n(y)&&m(y,u,v),v.global)D?x[R]=y:S(R,y);else{try{v.unsafe?x[R]&&(D=!0):delete x[R]}catch{}D?x[R]=y:o.f(x,R,{value:y,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return x}},(k,i,t)=>{var n=t(10),o=t(23),m=t(40),S=t(9),x=t(51).CONFIGURABLE,R=t(52),y=t(53),v=y.enforce,D=y.get,u=Object.defineProperty,P=S&&!n(function(){return u(function(){},"length",{value:8}).length!==8}),M=String(String).split("String"),A=k.exports=function(F,N,c){String(N).slice(0,7)==="Symbol("&&(N="["+String(N).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),c&&c.getter&&(N="get "+N),c&&c.setter&&(N="set "+N),(!m(F,"name")||x&&F.name!==N)&&(S?u(F,"name",{value:N,configurable:!0}):F.name=N),P&&c&&m(c,"arity")&&F.length!==c.arity&&u(F,"length",{value:c.arity});try{c&&m(c,"constructor")&&c.constructor?S&&u(F,"prototype",{writable:!1}):F.prototype&&(F.prototype=void 0)}catch{}var h=v(F);return m(h,"source")||(h.source=M.join(typeof N=="string"?N:"")),F};Function.prototype.toString=A(function(){return o(this)&&D(this).source||R(this)},"toString")},(k,i,t)=>{var n=t(9),o=t(40),m=Function.prototype,S=n&&Object.getOwnPropertyDescriptor,x=o(m,"name"),R=x&&(function(){}).name==="something",y=x&&(!n||n&&S(m,"name").configurable);k.exports={EXISTS:x,PROPER:R,CONFIGURABLE:y}},(k,i,t)=>{var n=t(17),o=t(23),m=t(38),S=n(Function.toString);o(m.inspectSource)||(m.inspectSource=function(x){return S(x)}),k.exports=m.inspectSource},(k,i,t)=>{var n=t(54),o=t(7),m=t(17),S=t(22),x=t(45),R=t(40),y=t(38),v=t(55),D=t(56),u="Object already initialized",P=o.TypeError,M=o.WeakMap,A,F,N,c=function(C){return N(C)?F(C):A(C,{})},h=function(C){return function(B){var I;if(!S(B)||(I=F(B)).type!==C)throw P("Incompatible receiver, "+C+" required");return I}};if(n||y.state){var d=y.state||(y.state=new M),a=m(d.get),s=m(d.has),g=m(d.set);A=function(C,B){if(s(d,C))throw new P(u);return B.facade=C,g(d,C,B),B},F=function(C){return a(d,C)||{}},N=function(C){return s(d,C)}}else{var p=v("state");D[p]=!0,A=function(C,B){if(R(C,p))throw new P(u);return B.facade=C,x(C,p,B),B},F=function(C){return R(C,p)?C[p]:{}},N=function(C){return R(C,p)}}k.exports={set:A,get:F,has:N,enforce:c,getterFor:h}},(k,i,t)=>{var n=t(7),o=t(23),m=t(52),S=n.WeakMap;k.exports=o(S)&&/native code/.test(m(S))},(k,i,t)=>{var n=t(36),o=t(42),m=n("keys");k.exports=function(S){return m[S]||(m[S]=o(S))}},k=>{k.exports={}},(k,i,t)=>{var n=t(40),o=t(58),m=t(8),S=t(46);k.exports=function(x,R,y){for(var v=o(R),D=S.f,u=m.f,P=0;P<v.length;P++){var M=v[P];!n(x,M)&&!(y&&n(y,M))&&D(x,M,u(R,M))}}},(k,i,t)=>{var n=t(25),o=t(17),m=t(59),S=t(68),x=t(48),R=o([].concat);k.exports=n("Reflect","ownKeys")||function(v){var D=m.f(x(v)),u=S.f;return u?R(D,u(v)):D}},(k,i,t)=>{var n=t(60),o=t(67),m=o.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(x){return n(x,m)}},(k,i,t)=>{var n=t(17),o=t(40),m=t(15),S=t(61).indexOf,x=t(56),R=n([].push);k.exports=function(y,v){var D=m(y),u=0,P=[],M;for(M in D)!o(x,M)&&o(D,M)&&R(P,M);for(;v.length>u;)o(D,M=v[u++])&&(~S(P,M)||R(P,M));return P}},(k,i,t)=>{var n=t(15),o=t(62),m=t(65),S=function(x){return function(R,y,v){var D=n(R),u=m(D),P=o(v,u),M;if(x&&y!=y){for(;u>P;)if(M=D[P++],M!=M)return!0}else for(;u>P;P++)if((x||P in D)&&D[P]===y)return x||P||0;return!x&&-1}};k.exports={includes:S(!0),indexOf:S(!1)}},(k,i,t)=>{var n=t(63),o=Math.max,m=Math.min;k.exports=function(S,x){var R=n(S);return R<0?o(R+x,0):m(R,x)}},(k,i,t)=>{var n=t(64);k.exports=function(o){var m=+o;return m!==m||m===0?0:n(m)}},k=>{var i=Math.ceil,t=Math.floor;k.exports=Math.trunc||function(o){var m=+o;return(m>0?t:i)(m)}},(k,i,t)=>{var n=t(66);k.exports=function(o){return n(o.length)}},(k,i,t)=>{var n=t(63),o=Math.min;k.exports=function(m){return m>0?o(n(m),9007199254740991):0}},k=>{k.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(k,i)=>{i.f=Object.getOwnPropertySymbols},(k,i,t)=>{var n=t(10),o=t(23),m=/#|\.prototype\./,S=function(D,u){var P=R[x(D)];return P==v?!0:P==y?!1:o(u)?n(u):!!u},x=S.normalize=function(D){return String(D).replace(m,".").toLowerCase()},R=S.data={},y=S.NATIVE="N",v=S.POLYFILL="P";k.exports=S},(k,i,t)=>{var n=t(35),o=t(71),m=t(46).f,S=n("unscopables"),x=Array.prototype;x[S]==null&&m(x,S,{configurable:!0,value:o(null)}),k.exports=function(R){x[S][R]=!0}},(k,i,t)=>{var n=t(48),o=t(72),m=t(67),S=t(56),x=t(74),R=t(44),y=t(55),v=">",D="<",u="prototype",P="script",M=y("IE_PROTO"),A=function(){},F=function(a){return D+P+v+a+D+"/"+P+v},N=function(a){a.write(F("")),a.close();var s=a.parentWindow.Object;return a=null,s},c=function(){var a=R("iframe"),s="java"+P+":",g;return a.style.display="none",x.appendChild(a),a.src=String(s),g=a.contentWindow.document,g.open(),g.write(F("document.F=Object")),g.close(),g.F},h,d=function(){try{h=new ActiveXObject("htmlfile")}catch{}d=typeof document<"u"?document.domain&&h?N(h):c():N(h);for(var a=m.length;a--;)delete d[u][m[a]];return d()};S[M]=!0,k.exports=Object.create||function(s,g){var p;return s!==null?(A[u]=n(s),p=new A,A[u]=null,p[M]=s):p=d(),g===void 0?p:o.f(p,g)}},(k,i,t)=>{var n=t(9),o=t(47),m=t(46),S=t(48),x=t(15),R=t(73);i.f=n&&!o?Object.defineProperties:function(v,D){S(v);for(var u=x(D),P=R(D),M=P.length,A=0,F;M>A;)m.f(v,F=P[A++],u[F]);return v}},(k,i,t)=>{var n=t(60),o=t(67);k.exports=Object.keys||function(S){return n(S,o)}},(k,i,t)=>{var n=t(25);k.exports=n("document","documentElement")},(k,i,t)=>{var n=t(7),o=t(17);k.exports=function(m,S){return o(n[m].prototype[S])}},(k,i,t)=>{t(77)},(k,i,t)=>{var n=t(78),o=t(65),m=t(63),S=n.aTypedArray,x=n.exportTypedArrayMethod;x("at",function(y){var v=S(this),D=o(v),u=m(y),P=u>=0?u:D+u;return P<0||P>=D?void 0:v[P]})},(k,i,t)=>{var n=t(79),o=t(9),m=t(7),S=t(23),x=t(22),R=t(40),y=t(80),v=t(33),D=t(45),u=t(49),P=t(46).f,M=t(26),A=t(82),F=t(84),N=t(35),c=t(42),h=t(53),d=h.enforce,a=h.get,s=m.Int8Array,g=s&&s.prototype,p=m.Uint8ClampedArray,C=p&&p.prototype,B=s&&A(s),I=g&&A(g),J=Object.prototype,Y=m.TypeError,q=N("toStringTag"),Q=c("TYPED_ARRAY_TAG"),V="TypedArrayConstructor",j=n&&!!F&&y(m.opera)!=="Opera",U=!1,L,Z,ce,be={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Re={BigInt64Array:8,BigUint64Array:8},X=function(O){if(!x(O))return!1;var W=y(O);return W==="DataView"||R(be,W)||R(Re,W)},_=function(w){var O=A(w);if(x(O)){var W=a(O);return W&&R(W,V)?W[V]:_(O)}},T=function(w){if(!x(w))return!1;var O=y(w);return R(be,O)||R(Re,O)},z=function(w){if(T(w))return w;throw Y("Target is not a typed array")},$=function(w){if(S(w)&&(!F||M(B,w)))return w;throw Y(v(w)+" is not a typed array constructor")},l=function(w,O,W,H){if(o){if(W)for(var ee in be){var ne=m[ee];if(ne&&R(ne.prototype,w))try{delete ne.prototype[w]}catch{try{ne.prototype[w]=O}catch{}}}(!I[w]||W)&&u(I,w,W?O:j&&g[w]||O,H)}},b=function(w,O,W){var H,ee;if(o){if(F){if(W){for(H in be)if(ee=m[H],ee&&R(ee,w))try{delete ee[w]}catch{}}if(!B[w]||W)try{return u(B,w,W?O:j&&B[w]||O)}catch{}else return}for(H in be)ee=m[H],ee&&(!ee[w]||W)&&u(ee,w,O)}};for(L in be)Z=m[L],ce=Z&&Z.prototype,ce?d(ce)[V]=Z:j=!1;for(L in Re)Z=m[L],ce=Z&&Z.prototype,ce&&(d(ce)[V]=Z);if((!j||!S(B)||B===Function.prototype)&&(B=function(){throw Y("Incorrect invocation")},j))for(L in be)m[L]&&F(m[L],B);if((!j||!I||I===J)&&(I=B.prototype,j))for(L in be)m[L]&&F(m[L].prototype,I);if(j&&A(C)!==I&&F(C,I),o&&!R(I,q)){U=!0,P(I,q,{get:function(){return x(this)?this[Q]:void 0}});for(L in be)m[L]&&D(m[L],Q,L)}k.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:U&&Q,aTypedArray:z,aTypedArrayConstructor:$,exportTypedArrayMethod:l,exportTypedArrayStaticMethod:b,getTypedArrayConstructor:_,isView:X,isTypedArray:T,TypedArray:B,TypedArrayPrototype:I}},k=>{k.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(k,i,t)=>{var n=t(81),o=t(23),m=t(18),S=t(35),x=S("toStringTag"),R=Object,y=m(function(){return arguments}())=="Arguments",v=function(D,u){try{return D[u]}catch{}};k.exports=n?m:function(D){var u,P,M;return D===void 0?"Undefined":D===null?"Null":typeof(P=v(u=R(D),x))=="string"?P:y?m(u):(M=m(u))=="Object"&&o(u.callee)?"Arguments":M}},(k,i,t)=>{var n=t(35),o=n("toStringTag"),m={};m[o]="z",k.exports=String(m)==="[object z]"},(k,i,t)=>{var n=t(40),o=t(23),m=t(41),S=t(55),x=t(83),R=S("IE_PROTO"),y=Object,v=y.prototype;k.exports=x?y.getPrototypeOf:function(D){var u=m(D);if(n(u,R))return u[R];var P=u.constructor;return o(P)&&u instanceof P?P.prototype:u instanceof y?v:null}},(k,i,t)=>{var n=t(10);k.exports=!n(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},(k,i,t)=>{var n=t(17),o=t(48),m=t(85);k.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var S=!1,x={},R;try{R=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),R(x,[]),S=x instanceof Array}catch{}return function(v,D){return o(v),m(D),S?R(v,D):v.__proto__=D,v}}():void 0)},(k,i,t)=>{var n=t(23),o=String,m=TypeError;k.exports=function(S){if(typeof S=="object"||n(S))return S;throw m("Can't set "+o(S)+" as a prototype")}},(k,i,t)=>{t(87),t(93),t(95),t(117),t(119);var n=t(128);k.exports=n.structuredClone},(k,i,t)=>{var n=t(15),o=t(70),m=t(88),S=t(53),x=t(46).f,R=t(89),y=t(37),v=t(9),D="Array Iterator",u=S.set,P=S.getterFor(D);k.exports=R(Array,"Array",function(A,F){u(this,{type:D,target:n(A),index:0,kind:F})},function(){var A=P(this),F=A.target,N=A.kind,c=A.index++;return!F||c>=F.length?(A.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:c,done:!1}:N=="values"?{value:F[c],done:!1}:{value:[c,F[c]],done:!1}},"values");var M=m.Arguments=m.Array;if(o("keys"),o("values"),o("entries"),!y&&v&&M.name!=="values")try{x(M,"name",{value:"values"})}catch{}},k=>{k.exports={}},(k,i,t)=>{var n=t(6),o=t(11),m=t(37),S=t(51),x=t(23),R=t(90),y=t(82),v=t(84),D=t(92),u=t(45),P=t(49),M=t(35),A=t(88),F=t(91),N=S.PROPER,c=S.CONFIGURABLE,h=F.IteratorPrototype,d=F.BUGGY_SAFARI_ITERATORS,a=M("iterator"),s="keys",g="values",p="entries",C=function(){return this};k.exports=function(B,I,J,Y,q,Q,V){R(J,I,Y);var j=function(z){if(z===q&&be)return be;if(!d&&z in Z)return Z[z];switch(z){case s:return function(){return new J(this,z)};case g:return function(){return new J(this,z)};case p:return function(){return new J(this,z)}}return function(){return new J(this)}},U=I+" Iterator",L=!1,Z=B.prototype,ce=Z[a]||Z["@@iterator"]||q&&Z[q],be=!d&&ce||j(q),Re=I=="Array"&&Z.entries||ce,X,_,T;if(Re&&(X=y(Re.call(new B)),X!==Object.prototype&&X.next&&(!m&&y(X)!==h&&(v?v(X,h):x(X[a])||P(X,a,C)),D(X,U,!0,!0),m&&(A[U]=C))),N&&q==g&&ce&&ce.name!==g&&(!m&&c?u(Z,"name",g):(L=!0,be=function(){return o(ce,this)})),q)if(_={values:j(g),keys:Q?be:j(s),entries:j(p)},V)for(T in _)(d||L||!(T in Z))&&P(Z,T,_[T]);else n({target:I,proto:!0,forced:d||L},_);return(!m||V)&&Z[a]!==be&&P(Z,a,be,{name:q}),A[I]=be,_}},(k,i,t)=>{var n=t(91).IteratorPrototype,o=t(71),m=t(14),S=t(92),x=t(88),R=function(){return this};k.exports=function(y,v,D,u){var P=v+" Iterator";return y.prototype=o(n,{next:m(+!u,D)}),S(y,P,!1,!0),x[P]=R,y}},(k,i,t)=>{var n=t(10),o=t(23),m=t(71),S=t(82),x=t(49),R=t(35),y=t(37),v=R("iterator"),D=!1,u,P,M;[].keys&&(M=[].keys(),"next"in M?(P=S(S(M)),P!==Object.prototype&&(u=P)):D=!0);var A=u==null||n(function(){var F={};return u[v].call(F)!==F});A?u={}:y&&(u=m(u)),o(u[v])||x(u,v,function(){return this}),k.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:D}},(k,i,t)=>{var n=t(46).f,o=t(40),m=t(35),S=m("toStringTag");k.exports=function(x,R,y){x&&!y&&(x=x.prototype),x&&!o(x,S)&&n(x,S,{configurable:!0,value:R})}},(k,i,t)=>{var n=t(81),o=t(49),m=t(94);n||o(Object.prototype,"toString",m,{unsafe:!0})},(k,i,t)=>{var n=t(81),o=t(80);k.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},(k,i,t)=>{t(96)},(k,i,t)=>{var n=t(97),o=t(114);n("Map",function(m){return function(){return m(this,arguments.length?arguments[0]:void 0)}},o)},(k,i,t)=>{var n=t(6),o=t(7),m=t(17),S=t(69),x=t(49),R=t(98),y=t(105),v=t(111),D=t(23),u=t(22),P=t(10),M=t(112),A=t(92),F=t(113);k.exports=function(N,c,h){var d=N.indexOf("Map")!==-1,a=N.indexOf("Weak")!==-1,s=d?"set":"add",g=o[N],p=g&&g.prototype,C=g,B={},I=function(U){var L=m(p[U]);x(p,U,U=="add"?function(ce){return L(this,ce===0?0:ce),this}:U=="delete"?function(Z){return a&&!u(Z)?!1:L(this,Z===0?0:Z)}:U=="get"?function(ce){return a&&!u(ce)?void 0:L(this,ce===0?0:ce)}:U=="has"?function(ce){return a&&!u(ce)?!1:L(this,ce===0?0:ce)}:function(ce,be){return L(this,ce===0?0:ce,be),this})},J=S(N,!D(g)||!(a||p.forEach&&!P(function(){new g().entries().next()})));if(J)C=h.getConstructor(c,N,d,s),R.enable();else if(S(N,!0)){var Y=new C,q=Y[s](a?{}:-0,1)!=Y,Q=P(function(){Y.has(1)}),V=M(function(U){new g(U)}),j=!a&&P(function(){for(var U=new g,L=5;L--;)U[s](L,L);return!U.has(-0)});V||(C=c(function(U,L){v(U,p);var Z=F(new g,U,C);return L!=null&&y(L,Z[s],{that:Z,AS_ENTRIES:d}),Z}),C.prototype=p,p.constructor=C),(Q||j)&&(I("delete"),I("has"),d&&I("get")),(j||q)&&I(s),a&&p.clear&&delete p.clear}return B[N]=C,n({global:!0,constructor:!0,forced:C!=g},B),A(C,N),a||h.setStrong(C,N,d),C}},(k,i,t)=>{var n=t(6),o=t(17),m=t(56),S=t(22),x=t(40),R=t(46).f,y=t(59),v=t(99),D=t(102),u=t(42),P=t(104),M=!1,A=u("meta"),F=0,N=function(g){R(g,A,{value:{objectID:"O"+F++,weakData:{}}})},c=function(g,p){if(!S(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!x(g,A)){if(!D(g))return"F";if(!p)return"E";N(g)}return g[A].objectID},h=function(g,p){if(!x(g,A)){if(!D(g))return!0;if(!p)return!1;N(g)}return g[A].weakData},d=function(g){return P&&M&&D(g)&&!x(g,A)&&N(g),g},a=function(){s.enable=function(){},M=!0;var g=y.f,p=o([].splice),C={};C[A]=1,g(C).length&&(y.f=function(B){for(var I=g(B),J=0,Y=I.length;J<Y;J++)if(I[J]===A){p(I,J,1);break}return I},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:v.f}))},s=k.exports={enable:a,fastKey:c,getWeakData:h,onFreeze:d};m[A]=!0},(k,i,t)=>{var n=t(18),o=t(15),m=t(59).f,S=t(100),x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],R=function(y){try{return m(y)}catch{return S(x)}};k.exports.f=function(v){return x&&n(v)=="Window"?R(v):m(o(v))}},(k,i,t)=>{var n=t(62),o=t(65),m=t(101),S=Array,x=Math.max;k.exports=function(R,y,v){for(var D=o(R),u=n(y,D),P=n(v===void 0?D:v,D),M=S(x(P-u,0)),A=0;u<P;u++,A++)m(M,A,R[u]);return M.length=A,M}},(k,i,t)=>{var n=t(20),o=t(46),m=t(14);k.exports=function(S,x,R){var y=n(x);y in S?o.f(S,y,m(0,R)):S[y]=R}},(k,i,t)=>{var n=t(10),o=t(22),m=t(18),S=t(103),x=Object.isExtensible,R=n(function(){});k.exports=R||S?function(v){return!o(v)||S&&m(v)=="ArrayBuffer"?!1:x?x(v):!0}:x},(k,i,t)=>{var n=t(10);k.exports=n(function(){if(typeof ArrayBuffer=="function"){var o=new ArrayBuffer(8);Object.isExtensible(o)&&Object.defineProperty(o,"a",{value:8})}})},(k,i,t)=>{var n=t(10);k.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},(k,i,t)=>{var n=t(106),o=t(11),m=t(48),S=t(33),x=t(107),R=t(65),y=t(26),v=t(108),D=t(109),u=t(110),P=TypeError,M=function(F,N){this.stopped=F,this.result=N},A=M.prototype;k.exports=function(F,N,c){var h=c&&c.that,d=!!(c&&c.AS_ENTRIES),a=!!(c&&c.IS_RECORD),s=!!(c&&c.IS_ITERATOR),g=!!(c&&c.INTERRUPTED),p=n(N,h),C,B,I,J,Y,q,Q,V=function(U){return C&&u(C,"normal",U),new M(!0,U)},j=function(U){return d?(m(U),g?p(U[0],U[1],V):p(U[0],U[1])):g?p(U,V):p(U)};if(a)C=F.iterator;else if(s)C=F;else{if(B=D(F),!B)throw P(S(F)+" is not iterable");if(x(B)){for(I=0,J=R(F);J>I;I++)if(Y=j(F[I]),Y&&y(A,Y))return Y;return new M(!1)}C=v(F,B)}for(q=a?F.next:C.next;!(Q=o(q,C)).done;){try{Y=j(Q.value)}catch(U){u(C,"throw",U)}if(typeof Y=="object"&&Y&&y(A,Y))return Y}return new M(!1)}},(k,i,t)=>{var n=t(17),o=t(32),m=t(12),S=n(n.bind);k.exports=function(x,R){return o(x),R===void 0?x:m?S(x,R):function(){return x.apply(R,arguments)}}},(k,i,t)=>{var n=t(35),o=t(88),m=n("iterator"),S=Array.prototype;k.exports=function(x){return x!==void 0&&(o.Array===x||S[m]===x)}},(k,i,t)=>{var n=t(11),o=t(32),m=t(48),S=t(33),x=t(109),R=TypeError;k.exports=function(y,v){var D=arguments.length<2?x(y):v;if(o(D))return m(n(D,y));throw R(S(y)+" is not iterable")}},(k,i,t)=>{var n=t(80),o=t(31),m=t(88),S=t(35),x=S("iterator");k.exports=function(R){if(R!=null)return o(R,x)||o(R,"@@iterator")||m[n(R)]}},(k,i,t)=>{var n=t(11),o=t(48),m=t(31);k.exports=function(S,x,R){var y,v;o(S);try{if(y=m(S,"return"),!y){if(x==="throw")throw R;return R}y=n(y,S)}catch(D){v=!0,y=D}if(x==="throw")throw R;if(v)throw y;return o(y),R}},(k,i,t)=>{var n=t(26),o=TypeError;k.exports=function(m,S){if(n(S,m))return m;throw o("Incorrect invocation")}},(k,i,t)=>{var n=t(35),o=n("iterator"),m=!1;try{var S=0,x={next:function(){return{done:!!S++}},return:function(){m=!0}};x[o]=function(){return this},Array.from(x,function(){throw 2})}catch{}k.exports=function(R,y){if(!y&&!m)return!1;var v=!1;try{var D={};D[o]=function(){return{next:function(){return{done:v=!0}}}},R(D)}catch{}return v}},(k,i,t)=>{var n=t(23),o=t(22),m=t(84);k.exports=function(S,x,R){var y,v;return m&&n(y=x.constructor)&&y!==R&&o(v=y.prototype)&&v!==R.prototype&&m(S,v),S}},(k,i,t)=>{var n=t(46).f,o=t(71),m=t(115),S=t(106),x=t(111),R=t(105),y=t(89),v=t(116),D=t(9),u=t(98).fastKey,P=t(53),M=P.set,A=P.getterFor;k.exports={getConstructor:function(F,N,c,h){var d=F(function(C,B){x(C,a),M(C,{type:N,index:o(null),first:void 0,last:void 0,size:0}),D||(C.size=0),B!=null&&R(B,C[h],{that:C,AS_ENTRIES:c})}),a=d.prototype,s=A(N),g=function(C,B,I){var J=s(C),Y=p(C,B),q,Q;return Y?Y.value=I:(J.last=Y={index:Q=u(B,!0),key:B,value:I,previous:q=J.last,next:void 0,removed:!1},J.first||(J.first=Y),q&&(q.next=Y),D?J.size++:C.size++,Q!=="F"&&(J.index[Q]=Y)),C},p=function(C,B){var I=s(C),J=u(B),Y;if(J!=="F")return I.index[J];for(Y=I.first;Y;Y=Y.next)if(Y.key==B)return Y};return m(a,{clear:function(){for(var B=this,I=s(B),J=I.index,Y=I.first;Y;)Y.removed=!0,Y.previous&&(Y.previous=Y.previous.next=void 0),delete J[Y.index],Y=Y.next;I.first=I.last=void 0,D?I.size=0:B.size=0},delete:function(C){var B=this,I=s(B),J=p(B,C);if(J){var Y=J.next,q=J.previous;delete I.index[J.index],J.removed=!0,q&&(q.next=Y),Y&&(Y.previous=q),I.first==J&&(I.first=Y),I.last==J&&(I.last=q),D?I.size--:B.size--}return!!J},forEach:function(B){for(var I=s(this),J=S(B,arguments.length>1?arguments[1]:void 0),Y;Y=Y?Y.next:I.first;)for(J(Y.value,Y.key,this);Y&&Y.removed;)Y=Y.previous},has:function(B){return!!p(this,B)}}),m(a,c?{get:function(B){var I=p(this,B);return I&&I.value},set:function(B,I){return g(this,B===0?0:B,I)}}:{add:function(B){return g(this,B=B===0?0:B,B)}}),D&&n(a,"size",{get:function(){return s(this).size}}),d},setStrong:function(F,N,c){var h=N+" Iterator",d=A(N),a=A(h);y(F,N,function(s,g){M(this,{type:h,target:s,state:d(s),kind:g,last:void 0})},function(){for(var s=a(this),g=s.kind,p=s.last;p&&p.removed;)p=p.previous;return!s.target||!(s.last=p=p?p.next:s.state.first)?(s.target=void 0,{value:void 0,done:!0}):g=="keys"?{value:p.key,done:!1}:g=="values"?{value:p.value,done:!1}:{value:[p.key,p.value],done:!1}},c?"entries":"values",!c,!0),v(N)}}},(k,i,t)=>{var n=t(49);k.exports=function(o,m,S){for(var x in m)n(o,x,m[x],S);return o}},(k,i,t)=>{var n=t(25),o=t(46),m=t(35),S=t(9),x=m("species");k.exports=function(R){var y=n(R),v=o.f;S&&y&&!y[x]&&v(y,x,{configurable:!0,get:function(){return this}})}},(k,i,t)=>{t(118)},(k,i,t)=>{var n=t(97),o=t(114);n("Set",function(m){return function(){return m(this,arguments.length?arguments[0]:void 0)}},o)},(k,i,t)=>{var n=t(37),o=t(6),m=t(7),S=t(25),x=t(17),R=t(10),y=t(42),v=t(23),D=t(120),u=t(22),P=t(24),M=t(105),A=t(48),F=t(80),N=t(40),c=t(101),h=t(45),d=t(65),a=t(121),s=t(122),g=t(124),p=t(29),C=t(125),B=t(126),I=t(127),J=m.Object,Y=m.Date,q=m.Error,Q=m.EvalError,V=m.RangeError,j=m.ReferenceError,U=m.SyntaxError,L=m.TypeError,Z=m.URIError,ce=m.PerformanceMark,be=m.WebAssembly,Re=be&&be.CompileError||q,X=be&&be.LinkError||q,_=be&&be.RuntimeError||q,T=S("DOMException"),z=S("Set"),$=S("Map"),l=$.prototype,b=x(l.has),w=x(l.get),O=x(l.set),W=x(z.prototype.add),H=S("Object","keys"),ee=x([].push),ne=x((!0).valueOf),se=x(1 .valueOf),ue=x("".valueOf),le=x(Y.prototype.getTime),de=y("structuredClone"),ge="DataCloneError",Se="Transferring",we=function(ve){return!R(function(){var xe=new m.Set([7]),Ne=ve(xe),he=ve(J(7));return Ne==xe||!Ne.has(7)||typeof he!="object"||he!=7})&&ve},Pe=function(ve,xe){return!R(function(){var Ne=new xe,he=ve({a:Ne,b:Ne});return!(he&&he.a===he.b&&he.a instanceof xe&&he.a.stack===Ne.stack)})},Ie=function(ve){return!R(function(){var xe=ve(new m.AggregateError([1],de,{cause:3}));return xe.name!="AggregateError"||xe.errors[0]!=1||xe.message!=de||xe.cause!=3})},_e=m.structuredClone,Xe=n||!Pe(_e,q)||!Pe(_e,T)||!Ie(_e),Qe=!_e&&we(function(ve){return new ce(de,{detail:ve}).detail}),Oe=we(_e)||Qe,Ee=function(ve){throw new T("Uncloneable type: "+ve,ge)},ie=function(ve,xe){throw new T((xe||"Cloning")+" of "+ve+" cannot be properly polyfilled in this engine",ge)},ye=function(ve,xe){if(P(ve)&&Ee("Symbol"),!u(ve))return ve;if(xe){if(b(xe,ve))return w(xe,ve)}else xe=new $;var Ne=F(ve),he=!1,te,ae,me,Me,Be,fe,oe,Ae,ke,We;switch(Ne){case"Array":me=[],he=!0;break;case"Object":me={},he=!0;break;case"Map":me=new $,he=!0;break;case"Set":me=new z,he=!0;break;case"RegExp":me=new RegExp(ve.source,s(ve));break;case"Error":switch(ae=ve.name,ae){case"AggregateError":me=S("AggregateError")([]);break;case"EvalError":me=Q();break;case"RangeError":me=V();break;case"ReferenceError":me=j();break;case"SyntaxError":me=U();break;case"TypeError":me=L();break;case"URIError":me=Z();break;case"CompileError":me=Re();break;case"LinkError":me=X();break;case"RuntimeError":me=_();break;default:me=q()}he=!0;break;case"DOMException":me=new T(ve.message,ve.name),he=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":te=m[Ne],u(te)||ie(Ne),me=new te(ye(ve.buffer,xe),ve.byteOffset,Ne==="DataView"?ve.byteLength:ve.length);break;case"DOMQuad":try{me=new DOMQuad(ye(ve.p1,xe),ye(ve.p2,xe),ye(ve.p3,xe),ye(ve.p4,xe))}catch{Oe?me=Oe(ve):ie(Ne)}break;case"FileList":if(te=m.DataTransfer,D(te)){for(Me=new te,Be=0,fe=d(ve);Be<fe;Be++)Me.items.add(ye(ve[Be],xe));me=Me.files}else Oe?me=Oe(ve):ie(Ne);break;case"ImageData":try{me=new ImageData(ye(ve.data,xe),ve.width,ve.height,{colorSpace:ve.colorSpace})}catch{Oe?me=Oe(ve):ie(Ne)}break;default:if(Oe)me=Oe(ve);else switch(Ne){case"BigInt":me=J(ve.valueOf());break;case"Boolean":me=J(ne(ve));break;case"Number":me=J(se(ve));break;case"String":me=J(ue(ve));break;case"Date":me=new Y(le(ve));break;case"ArrayBuffer":te=m.DataView,!te&&typeof ve.slice!="function"&&ie(Ne);try{if(typeof ve.slice=="function")me=ve.slice(0);else for(fe=ve.byteLength,me=new ArrayBuffer(fe),ke=new te(ve),We=new te(me),Be=0;Be<fe;Be++)We.setUint8(Be,ke.getUint8(Be))}catch{throw new T("ArrayBuffer is detached",ge)}break;case"SharedArrayBuffer":me=ve;break;case"Blob":try{me=ve.slice(0,ve.size,ve.type)}catch{ie(Ne)}break;case"DOMPoint":case"DOMPointReadOnly":te=m[Ne];try{me=te.fromPoint?te.fromPoint(ve):new te(ve.x,ve.y,ve.z,ve.w)}catch{ie(Ne)}break;case"DOMRect":case"DOMRectReadOnly":te=m[Ne];try{me=te.fromRect?te.fromRect(ve):new te(ve.x,ve.y,ve.width,ve.height)}catch{ie(Ne)}break;case"DOMMatrix":case"DOMMatrixReadOnly":te=m[Ne];try{me=te.fromMatrix?te.fromMatrix(ve):new te(ve)}catch{ie(Ne)}break;case"AudioData":case"VideoFrame":v(ve.clone)||ie(Ne);try{me=ve.clone()}catch{Ee(Ne)}break;case"File":try{me=new File([ve],ve.name,ve)}catch{ie(Ne)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ie(Ne);default:Ee(Ne)}}if(O(xe,ve,me),he)switch(Ne){case"Array":case"Object":for(oe=H(ve),Be=0,fe=d(oe);Be<fe;Be++)Ae=oe[Be],c(me,Ae,ye(ve[Ae],xe));break;case"Map":ve.forEach(function(ze,je){O(me,ye(je,xe),ye(ze,xe))});break;case"Set":ve.forEach(function(ze){W(me,ye(ze,xe))});break;case"Error":h(me,"message",ye(ve.message,xe)),N(ve,"cause")&&h(me,"cause",ye(ve.cause,xe)),ae=="AggregateError"&&(me.errors=ye(ve.errors,xe));case"DOMException":g&&h(me,"stack",ye(ve.stack,xe))}return me},Le=_e&&!R(function(){if(B&&p>92||I&&p>94||C&&p>97)return!1;var ve=new ArrayBuffer(8),xe=_e(ve,{transfer:[ve]});return ve.byteLength!=0||xe.byteLength!=8}),Ke=function(ve,xe){if(!u(ve))throw L("Transfer option cannot be converted to a sequence");var Ne=[];M(ve,function(ke){ee(Ne,A(ke))});var he=0,te=d(Ne),ae,me,Me,Be,fe,oe,Ae;if(Le)for(Be=_e(Ne,{transfer:Ne});he<te;)O(xe,Ne[he],Be[he++]);else for(;he<te;){if(ae=Ne[he++],b(xe,ae))throw new T("Duplicate transferable",ge);switch(me=F(ae),me){case"ImageBitmap":Me=m.OffscreenCanvas,D(Me)||ie(me,Se);try{oe=new Me(ae.width,ae.height),Ae=oe.getContext("bitmaprenderer"),Ae.transferFromImageBitmap(ae),fe=oe.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!v(ae.clone)||!v(ae.close))&&ie(me,Se);try{fe=ae.clone(),ae.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ie(me,Se)}if(fe===void 0)throw new T("This object cannot be transferred: "+me,ge);O(xe,ae,fe)}};o({global:!0,enumerable:!0,sham:!Le,forced:Xe},{structuredClone:function(xe){var Ne=a(arguments.length,1)>1&&arguments[1]!=null?A(arguments[1]):void 0,he=Ne?Ne.transfer:void 0,te;return he!==void 0&&(te=new $,Ke(he,te)),ye(xe,te)}})},(k,i,t)=>{var n=t(17),o=t(10),m=t(23),S=t(80),x=t(25),R=t(52),y=function(){},v=[],D=x("Reflect","construct"),u=/^\s*(?:class|function)\b/,P=n(u.exec),M=!u.exec(y),A=function(c){if(!m(c))return!1;try{return D(y,v,c),!0}catch{return!1}},F=function(c){if(!m(c))return!1;switch(S(c)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return M||!!P(u,R(c))}catch{return!0}};F.sham=!0,k.exports=!D||o(function(){var N;return A(A.call)||!A(Object)||!A(function(){N=!0})||N})?F:A},k=>{var i=TypeError;k.exports=function(t,n){if(t<n)throw i("Not enough arguments");return t}},(k,i,t)=>{var n=t(11),o=t(40),m=t(26),S=t(123),x=RegExp.prototype;k.exports=function(R){var y=R.flags;return y===void 0&&!("flags"in x)&&!o(R,"flags")&&m(x,R)?n(S,R):y}},(k,i,t)=>{var n=t(48);k.exports=function(){var o=n(this),m="";return o.hasIndices&&(m+="d"),o.global&&(m+="g"),o.ignoreCase&&(m+="i"),o.multiline&&(m+="m"),o.dotAll&&(m+="s"),o.unicode&&(m+="u"),o.unicodeSets&&(m+="v"),o.sticky&&(m+="y"),m}},(k,i,t)=>{var n=t(10),o=t(14);k.exports=!n(function(){var m=Error("a");return"stack"in m?(Object.defineProperty(m,"stack",o(1,7)),m.stack!==7):!0})},(k,i,t)=>{var n=t(126),o=t(127);k.exports=!n&&!o&&typeof window=="object"&&typeof document=="object"},k=>{k.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(k,i,t)=>{var n=t(18),o=t(7);k.exports=n(o.process)=="process"},(k,i,t)=>{var n=t(7);k.exports=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(130),_display_utils=__w_pdfjs_require__(133),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(k,i){_checkPrivateRedeclaration(k,i),i.add(k)}function _classPrivateMethodGet(k,i,t){if(!i.has(k))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldInitSpec(k,i,t){_checkPrivateRedeclaration(k,i),i.set(k,t)}function _checkPrivateRedeclaration(k,i){if(i.has(k))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(k,i,t){var n=_classExtractFieldDescriptor(k,i,"set");return _classApplyDescriptorSet(k,n,t),t}function _classPrivateFieldGet(k,i){var t=_classExtractFieldDescriptor(k,i,"get");return _classApplyDescriptorGet(k,t)}function _classExtractFieldDescriptor(k,i,t){if(!i.has(k))throw new TypeError("attempted to "+t+" private field on non-instance");return i.get(k)}function _classStaticPrivateFieldSpecSet(k,i,t,n){return _classCheckPrivateStaticAccess(k,i),_classCheckPrivateStaticFieldDescriptor(t,"set"),_classApplyDescriptorSet(k,t,n),n}function _classApplyDescriptorSet(k,i,t){if(i.set)i.set.call(k,t);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=t}}function _classStaticPrivateFieldSpecGet(k,i,t){return _classCheckPrivateStaticAccess(k,i),_classCheckPrivateStaticFieldDescriptor(t,"get"),_classApplyDescriptorGet(k,t)}function _classCheckPrivateStaticFieldDescriptor(k,i){if(k===void 0)throw new TypeError("attempted to "+i+" private static field before its declaration")}function _classCheckPrivateStaticAccess(k,i){if(k!==i)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(k,i){return i.get?i.get.call(k):i.value}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:k,NodeCMapReaderFactory:i,NodeStandardFontDataFactory:t}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=k,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=i,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=t}let createPDFNetworkStream;function setPDFNetworkStreamFactory(k){createPDFNetworkStream=k}function getDocument(k){const i=new PDFDocumentLoadingTask;let t;if(typeof k=="string"||k instanceof URL)t={url:k};else if((0,_util.isArrayBuffer)(k))t={data:k};else if(k instanceof PDFDataRangeTransport)t={range:k};else{if(typeof k!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!k.url&&!k.data&&!k.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=k}const n=Object.create(null);let o=null,m=null;for(const x in t){const R=t[x];switch(x){case"url":if(typeof window<"u")try{n[x]=new URL(R,window.location).href;continue}catch(y){(0,_util.warn)(`Cannot create valid URL: "${y}".`)}else if(typeof R=="string"||R instanceof URL){n[x]=R.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=R;continue;case"worker":m=R;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&R instanceof Buffer)n[x]=new Uint8Array(R);else{if(R instanceof Uint8Array)break;if(typeof R=="string")n[x]=(0,_util.stringToBytes)(R);else if(typeof R=="object"&&R!==null&&!isNaN(R.length))n[x]=new Uint8Array(R);else if((0,_util.isArrayBuffer)(R))n[x]=new Uint8Array(R);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}n[x]=R}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=n.stopAtErrors!==!0,n.fontExtraProperties=n.fontExtraProperties===!0,n.pdfBug=n.pdfBug===!0,n.enableXfa=n.enableXfa===!0,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof n.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),typeof n.cMapUrl!="string"&&(n.cMapUrl=null),typeof n.standardFontDataUrl!="string"&&(n.standardFontDataUrl=null),typeof n.useWorkerFetch!="boolean"&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof n.isEvalSupported!="boolean"&&(n.isEvalSupported=!0),typeof n.disableFontFace!="boolean"&&(n.disableFontFace=_is_node.isNodeJS),typeof n.useSystemFonts!="boolean"&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),(typeof n.ownerDocument!="object"||n.ownerDocument===null)&&(n.ownerDocument=globalThis.document),typeof n.disableRange!="boolean"&&(n.disableRange=!1),typeof n.disableStream!="boolean"&&(n.disableStream=!1),typeof n.disableAutoFetch!="boolean"&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!m){const x={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};m=x.port?PDFWorker.fromPort(x):new PDFWorker(x),i._worker=m}const S=i.docId;return m.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");const x=_fetchDocument(m,n,o,S),R=new Promise(function(y){let v;o?v=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},o):n.data||(v=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),y(v)});return Promise.all([x,R]).then(function(y){let[v,D]=y;if(i.destroyed)throw new Error("Loading aborted");const u=new _message_handler.MessageHandler(S,v,m.port),P=new WorkerTransport(u,i,D,n);i._transport=P,u.send("Ready",null)})}).catch(i._capability.reject),i}async function _fetchDocument(k,i,t,n){if(k.destroyed)throw new Error("Worker was destroyed");t&&(i.length=t.length,i.initialData=t.initialData,i.progressiveDone=t.progressiveDone,i.contentDispositionFilename=t.contentDispositionFilename);const o=await k.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.105",source:{data:i.data,url:i.url,password:i.password,disableAutoFetch:i.disableAutoFetch,rangeChunkSize:i.rangeChunkSize,length:i.length},maxImageSize:i.maxImageSize,disableFontFace:i.disableFontFace,docBaseUrl:i.docBaseUrl,ignoreErrors:i.ignoreErrors,isEvalSupported:i.isEvalSupported,fontExtraProperties:i.fontExtraProperties,enableXfa:i.enableXfa,useSystemFonts:i.useSystemFonts,cMapUrl:i.useWorkerFetch?i.cMapUrl:null,standardFontDataUrl:i.useWorkerFetch?i.standardFontDataUrl:null});if(i.data&&(i.data=null),k.destroyed)throw new Error("Worker was destroyed");return o}class PDFDocumentLoadingTask{constructor(){var i,t;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(i=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),t=i++,i)),t}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var i;this.destroyed=!0,await((i=this._transport)===null||i===void 0?void 0:i.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};class PDFDataRangeTransport{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=i,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(i){this._rangeListeners.push(i)}addProgressListener(i){this._progressListeners.push(i)}addProgressiveReadListener(i){this._progressiveReadListeners.push(i)}addProgressiveDoneListener(i){this._progressiveDoneListeners.push(i)}onDataRange(i,t){for(const n of this._rangeListeners)n(i,t)}onDataProgress(i,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(i,t)})}onDataProgressiveRead(i){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(i)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const i of this._progressiveDoneListeners)i()})}transportReady(){this._readyCapability.resolve()}requestDataRange(i,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(i,t){this._pdfInfo=i,this._transport=t,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(i){return this._transport.getPage(i)}getPageIndex(i){return this._transport.getPageIndex(i)}getDestinations(){return this._transport.getDestinations()}getDestination(i){return this._transport.getDestination(i)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(i||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(i,t,n,o){let m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=i,this._pageInfo=t,this._ownerDocument=o,this._transport=n,this._stats=m?new _display_utils.StatTimer:null,this._pdfBug=m,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:i,rotation:t=this.rotate,offsetX:n=0,offsetY:o=0,dontFlip:m=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:i,rotation:t,offsetX:n,offsetY:o,dontFlip:m})}getAnnotations(){let{intent:i="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._transport.getRenderingIntent(i);let n=this._annotationPromises.get(t.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,t.renderingIntent),this._annotationPromises.set(t.cacheKey,n),n=n.then(o=>{for(const m of o)m.titleObj!==void 0&&Object.defineProperty(m,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),m.titleObj.str}}),m.contentsObj!==void 0&&Object.defineProperty(m,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),m.contentsObj.str}});return o})),n}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var i;return((i=this._transport._htmlForXfa)===null||i===void 0?void 0:i.children[this._pageIndex])||null}render(i){var t,n,o;let{canvasContext:m,viewport:S,intent:x="display",annotationMode:R=_util.AnnotationMode.ENABLE,transform:y=null,imageLayer:v=null,canvasFactory:D=null,background:u=null,optionalContentConfigPromise:P=null,annotationCanvasMap:M=null,pageColors:A=null,printAnnotationStorage:F=null}=i;((t=arguments[0])===null||t===void 0?void 0:t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_FORMS)),((n=arguments[0])===null||n===void 0?void 0:n.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const N=this._transport.getRenderingIntent(x,R,F);this.pendingCleanup=!1,P||(P=this._transport.getOptionalContentConfig());let c=this._intentStates.get(N.cacheKey);c||(c=Object.create(null),this._intentStates.set(N.cacheKey,c)),c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null);const h=D||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),d=!!(N.renderingIntent&_util.RenderingIntentFlag.PRINT);c.displayReadyCapability||(c.displayReadyCapability=(0,_util.createPromiseCapability)(),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(N));const a=p=>{c.renderTasks.delete(s),(this.cleanupAfterRender||d)&&(this.pendingCleanup=!0),this._tryCleanup(),p?(s.capability.reject(p),this._abortOperatorList({intentState:c,reason:p instanceof Error?p:new Error(p)})):s.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},s=new InternalRenderTask({callback:a,params:{canvasContext:m,viewport:S,transform:y,imageLayer:v,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:M,operatorList:c.operatorList,pageIndex:this._pageIndex,canvasFactory:h,useRequestAnimationFrame:!d,pdfBug:this._pdfBug,pageColors:A});((o=c).renderTasks||(o.renderTasks=new Set)).add(s);const g=s.task;return Promise.all([c.displayReadyCapability.promise,P]).then(p=>{let[C,B]=p;if(this.pendingCleanup){a();return}this._stats&&this._stats.time("Rendering"),s.initializeGraphics({transparency:C,optionalContentConfig:B}),s.operatorListChanged()}).catch(a),g}getOperatorList(){let{intent:i="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function o(){S.operatorList.lastChunk&&(S.opListReadCapability.resolve(S.operatorList),S.renderTasks.delete(x))}const m=this._transport.getRenderingIntent(i,t,n,!0);let S=this._intentStates.get(m.cacheKey);S||(S=Object.create(null),this._intentStates.set(m.cacheKey,S));let x;if(!S.opListReadCapability){var R;x=Object.create(null),x.operatorListChanged=o,S.opListReadCapability=(0,_util.createPromiseCapability)(),((R=S).renderTasks||(R.renderTasks=new Set)).add(x),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(m)}return S.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:i=!1,includeMarkedContent:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:i!==!0,includeMarkedContent:t===!0},{highWaterMark:n,size(o){return o.items.length}})}getTextContent(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(n=>_xfa_text.XfaText.textContent(n));const t=this.streamTextContent(i);return new Promise(function(n,o){function m(){S.read().then(function(R){let{value:y,done:v}=R;if(v){n(x);return}Object.assign(x.styles,y.styles),x.items.push(...y.items),m()},o)}const S=t.getReader(),x={items:[],styles:Object.create(null)};m()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const i=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)i.push(n.completed),n.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(i)}cleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(i)}_tryCleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,i&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(i,t){const n=this._intentStates.get(t);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(i))}_renderPageChunk(i,t){for(let n=0,o=i.length;n<o;n++)t.operatorList.fnArray.push(i.fnArray[n]),t.operatorList.argsArray.push(i.argsArray[n]);t.operatorList.lastChunk=i.lastChunk,t.operatorList.separateAnnots=i.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();i.lastChunk&&this._tryCleanup()}_pumpOperatorList(i){let{renderingIntent:t,cacheKey:n,annotationStorageMap:o}=i;const S=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o}).getReader(),x=this._intentStates.get(n);x.streamReader=S;const R=()=>{S.read().then(y=>{let{value:v,done:D}=y;if(D){x.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,x),R())},y=>{if(x.streamReader=null,!this._transport.destroyed){if(x.operatorList){x.operatorList.lastChunk=!0;for(const v of x.renderTasks)v.operatorListChanged();this._tryCleanup()}if(x.displayReadyCapability)x.displayReadyCapability.reject(y);else if(x.opListReadCapability)x.opListReadCapability.reject(y);else throw y}})};R()}_abortOperatorList(i){let{intentState:t,reason:n,force:o=!1}=i;if(t.streamReader){if(!o){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:n,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[m,S]of this._intentStates)if(S===t){this._intentStates.delete(m);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(i,t){const n={data:structuredClone(i,t)};this._deferred.then(()=>{for(const o of this._listeners)o.call(this,n)})}addEventListener(i,t){this._listeners.push(t)}removeEventListener(i,t){const n=this._listeners.indexOf(t);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const k=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;k&&(PDFWorkerUtil.fallbackWorkerSrc=k.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(k,i){let t;try{if(t=new URL(k),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(i,t);return t.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(k){const i=`importScripts("${k}");`;return URL.createObjectURL(new Blob([i]))}}class PDFWorker{constructor(){let{name:k=null,port:i=null,verbosity:t=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(i&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(i))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=k,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,i){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(k){this._port=k,this._messageHandler=new _message_handler.MessageHandler("main","worker",k),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:k}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,k)||(k=PDFWorkerUtil.createCDNWrapper(new URL(k,window.location).href));const i=new Worker(k),t=new _message_handler.MessageHandler("main","worker",i),n=()=>{i.removeEventListener("error",o),t.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||n()};i.addEventListener("error",o),t.on("test",S=>{if(i.removeEventListener("error",o),this.destroyed){n();return}S?(this._messageHandler=t,this._port=i,this._webWorker=i,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),i.terminate())}),t.on("ready",S=>{if(i.removeEventListener("error",o),this.destroyed){n();return}try{m()}catch{this._setupFakeWorker()}});const m=()=>{const S=new Uint8Array;t.send("test",S,[S.buffer])};m();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(k=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new LoopbackPort;this._port=i;const t=`fake${PDFWorkerUtil.fakeWorkerId++}`,n=new _message_handler.MessageHandler(t+"_worker",t,i);k.setup(n,i);const o=new _message_handler.MessageHandler(t,t+"_worker",i);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(k=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${k.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(k){if(!(k!=null&&k.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(k.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(k.port):new PDFWorker(k)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var k;return((k=globalThis.pdfjsWorker)===null||k===void 0?void 0:k.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(i,t,n,o){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=i,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,o.useWorkerFetch||(this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.StandardFontDataFactory=new o.StandardFontDataFactory({baseUrl:o.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,m=_util.RenderingIntentFlag.DISPLAY,S=null;switch(i){case"any":m=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":m=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${i}`)}switch(t){case _util.AnnotationMode.DISABLE:m+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:m+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:m+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,S=(m&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return o&&(m+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:m,cacheKey:`${m}_${_annotation_storage.AnnotationStorage.getHash(S)}`,annotationStorageMap:S}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const i=[];for(const n of _classPrivateFieldGet(this,_pageCache).values())i.push(n._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return i.push(t),Promise.all(i).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:i,loadingTask:t}=this;i.on("GetReader",(n,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=m=>{this._lastProgress={loaded:m.loaded,total:m.total}},o.onPull=()=>{this._fullReader.read().then(function(m){let{value:S,done:x}=m;if(x){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(S),"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(S),1,[S])}).catch(m=>{o.error(m)})},o.onCancel=m=>{this._fullReader.cancel(m),o.ready.catch(S=>{if(!this.destroyed)throw S})}}),i.on("ReaderHeadersReady",n=>{const o=(0,_util.createPromiseCapability)(),m=this._fullReader;return m.headersReady.then(()=>{if(!m.isStreamingSupported||!m.isRangeSupported){if(this._lastProgress){var S;(S=t.onProgress)===null||S===void 0||S.call(t,this._lastProgress)}m.onProgress=x=>{var R;(R=t.onProgress)===null||R===void 0||R.call(t,{loaded:x.loaded,total:x.total})}}o.resolve({isStreamingSupported:m.isStreamingSupported,isRangeSupported:m.isRangeSupported,contentLength:m.contentLength})},o.reject),o.promise}),i.on("GetRangeReader",(n,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const m=this._networkStream.getRangeReader(n.begin,n.end);if(!m){o.close();return}o.onPull=()=>{m.read().then(function(S){let{value:x,done:R}=S;if(R){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(x),"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(x),1,[x])}).catch(S=>{o.error(S)})},o.onCancel=S=>{m.cancel(S),o.ready.catch(x=>{if(!this.destroyed)throw x})}}),i.on("GetDoc",n=>{let{pdfInfo:o}=n;this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(o,this))}),i.on("DocException",function(n){let o;switch(n.name){case"PasswordException":o=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":o=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(o)}),i.on("PasswordRequest",n=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const o=m=>{m instanceof Error?this._passwordCapability.reject(m):this._passwordCapability.resolve({password:m})};try{t.onPassword(o,n.code)}catch(m){this._passwordCapability.reject(m)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),i.on("DataLoaded",n=>{var o;(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),i.on("StartRenderPage",n=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),i.on("commonobj",n=>{var o;let[m,S,x]=n;if(!this.destroyed&&!this.commonObjs.has(m))switch(S){case"Font":const R=this._params;if("error"in x){const D=x.error;(0,_util.warn)(`Error during font loading: ${D}`),this.commonObjs.resolve(m,D);break}let y=null;R.pdfBug&&(o=globalThis.FontInspector)!==null&&o!==void 0&&o.enabled&&(y={registerFont(D,u){globalThis.FontInspector.fontAdded(D,u)}});const v=new _font_loader.FontFaceObject(x,{isEvalSupported:R.isEvalSupported,disableFontFace:R.disableFontFace,ignoreErrors:R.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:y});this.fontLoader.bind(v).catch(D=>i.sendWithPromise("FontFallback",{id:m})).finally(()=>{!R.fontExtraProperties&&v.data&&(v.data=null),this.commonObjs.resolve(m,v)});break;case"FontPath":case"Image":this.commonObjs.resolve(m,x);break;default:throw new Error(`Got unknown common object type ${S}`)}}),i.on("obj",n=>{let[o,m,S,x]=n;if(this.destroyed)return;const R=_classPrivateFieldGet(this,_pageCache).get(m);if(!R.objs.has(o))switch(S){case"Image":R.objs.resolve(o,x);const v=8e6;if(x){let D;if(x.bitmap){const{bitmap:u,width:P,height:M}=x;D=P*M*4,R._bitmaps.add(u)}else{var y;D=((y=x.data)===null||y===void 0?void 0:y.length)||0}D>v&&(R.cleanupAfterRender=!0)}break;case"Pattern":R.objs.resolve(o,x);break;default:throw new Error(`Got unknown object type ${S}`)}}),i.on("DocProgress",n=>{var o;this.destroyed||(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:n.loaded,total:n.total})}),i.on("DocStats",n=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(n.streamTypes),fontTypes:Object.freeze(n.fontTypes)}))}),i.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),i.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),i.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(i){var t,n;let{featureId:o}=i;this.destroyed||(t=(n=this.loadingTask).onUnsupportedFeature)===null||t===void 0||t.call(n,o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(i){if(!Number.isInteger(i)||i<=0||i>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=i-1,n=_classPrivateFieldGet(this,_pagePromises).get(t);if(n)return n;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(m=>{if(this.destroyed)throw new Error("Transport destroyed");const S=new PDFPageProxy(t,m,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(t,S),S});return _classPrivateFieldGet(this,_pagePromises).set(t,o),o}getPageIndex(i){return typeof i!="object"||i===null||!Number.isInteger(i.num)||i.num<0||!Number.isInteger(i.gen)||i.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:i.num,gen:i.gen})}getAnnotations(i,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:i,intent:t})}saveDocument(){var i,t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(i=(t=this._fullReader)===null||t===void 0?void 0:t.filename)!==null&&i!==void 0?i:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(i){return typeof i!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:i})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(i){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:i})}getStructTree(i){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:i})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(i=>new _optional_content_config.OptionalContentConfig(i))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(i=>{var t,n,o,m;return{info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:(t=(n=this._fullReader)===null||n===void 0?void 0:n.filename)!==null&&t!==void 0?t:null,contentLength:(o=(m=this._fullReader)===null||m===void 0?void 0:m.contentLength)!==null&&o!==void 0?o:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const t of _classPrivateFieldGet(this,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),i||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const i=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:i.disableAutoFetch,enableXfa:i.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t){const o=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,i);return o.capability.promise.then(()=>t(o.data)),null}const n=_classPrivateFieldGet(this,_objs)[i];if(!(n!=null&&n.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${i}.`);return n.data}has(i){const t=_classPrivateFieldGet(this,_objs)[i];return(t==null?void 0:t.capability.settled)||!1}resolve(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,i);n.data=t,n.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(k){const i=_classPrivateFieldGet(this,_objs)[k];return i||(_classPrivateFieldGet(this,_objs)[k]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(i){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,i),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:i}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!i)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(this,_internalRenderTask);return i.form||i.canvas&&(t==null?void 0:t.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(i){let{callback:t,params:n,objs:o,commonObjs:m,annotationCanvasMap:S,operatorList:x,pageIndex:R,canvasFactory:y,useRequestAnimationFrame:v=!1,pdfBug:D=!1,pageColors:u=null}=i;this.callback=t,this.params=n,this.objs=o,this.commonObjs=m,this.annotationCanvasMap=S,this.operatorListIdx=null,this.operatorList=x,this._pageIndex=R,this.canvasFactory=y,this._pdfBug=D,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=v===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(i){var t;let{transparency:n=!1,optionalContentConfig:o}=i;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&(t=globalThis.StepperManager)!==null&&t!==void 0&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:m,viewport:S,transform:x,imageLayer:R,background:y}=this.params;this.gfx=new _canvas.CanvasGraphics(m,this.commonObjs,this.objs,this.canvasFactory,R,o,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:x,viewport:S,transparency:n,background:y}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(i||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback())))}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var n=t(1),o=t(131),m=t(135);function S(d,a,s){P(d,a),a.set(d,s)}function x(d,a){var s=v(d,a,"get");return R(d,s)}function R(d,a){return a.get?a.get.call(d):a.value}function y(d,a,s){var g=v(d,a,"set");return D(d,g,s),s}function v(d,a,s){if(!a.has(d))throw new TypeError("attempted to "+s+" private field on non-instance");return a.get(d)}function D(d,a,s){if(a.set)a.set.call(d,s);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=s}}function u(d,a){P(d,a),a.add(d)}function P(d,a){if(a.has(d))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(d,a,s){if(!a.has(d))throw new TypeError("attempted to get private field on non-instance");return s}var A=new WeakSet;class F{constructor(){u(this,A),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,s){const g=this._storage.get(a);return g===void 0?s:Object.assign(s,g)}getRawValue(a){return this._storage.get(a)}remove(a){if(this._storage.delete(a),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of this._storage.values())if(s instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(a,s){const g=this._storage.get(a);let p=!1;if(g!==void 0)for(const[C,B]of Object.entries(s))g[C]!==B&&(p=!0,g[C]=B);else p=!0,this._storage.set(a,s);p&&M(this,A,N).call(this),s instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(a){return this._storage.has(a)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(this._storage.size===0)return null;const a=new Map;for(const[s,g]of this._storage){const p=g instanceof o.AnnotationEditor?g.serialize():g;p&&a.set(s,p)}return a}static getHash(a){if(!a)return"";const s=new m.MurmurHash3_64;for(const[g,p]of a)s.update(`${g}:${JSON.stringify(p)}`);return s.hexdigest()}}i.AnnotationStorage=F;function N(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}var c=new WeakMap;class h extends F{constructor(a){super(),S(this,c,{writable:!0,value:null}),y(this,c,structuredClone(a.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return x(this,c)}}i.PrintAnnotationStorage=h},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var n=t(132),o=t(1);function m(d,a,s){return a in d?Object.defineProperty(d,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):d[a]=s,d}function S(d,a,s){x(d,a),a.set(d,s)}function x(d,a){if(a.has(d))throw new TypeError("Cannot initialize the same private elements twice on an object")}function R(d,a,s){var g=D(d,a,"set");return y(d,g,s),s}function y(d,a,s){if(a.set)a.set.call(d,s);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=s}}function v(d,a){var s=D(d,a,"get");return u(d,s)}function D(d,a,s){if(!a.has(d))throw new TypeError("attempted to "+s+" private field on non-instance");return a.get(d)}function u(d,a){return a.get?a.get.call(d):a.value}var P=new WeakMap,M=new WeakMap,A=new WeakMap,F=new WeakMap,N=new WeakMap,c=new WeakMap;class h{constructor(a){S(this,P,{writable:!0,value:this.focusin.bind(this)}),S(this,M,{writable:!0,value:this.focusout.bind(this)}),S(this,A,{writable:!0,value:!1}),S(this,F,{writable:!0,value:!1}),S(this,N,{writable:!0,value:!1}),S(this,c,{writable:!0,value:h._zIndex++}),this.constructor===h&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null;const[s,g]=this.parent.viewportBaseDimensions;this.x=a.x/s,this.y=a.y/g,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=v(this,c)}focusin(a){v(this,A)?R(this,A,!1):this.parent.setSelected(this)}focusout(a){if(!this.isAttachedToDOM)return;const s=a.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(a.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(a){const s=this.parent.div.getBoundingClientRect();this.startX=a.clientX-s.x,this.startY=a.clientY-s.y,a.dataTransfer.setData("text/plain",this.id),a.dataTransfer.effectAllowed="move"}setAt(a,s,g,p){const[C,B]=this.parent.viewportBaseDimensions;[g,p]=this.screenToPageTranslation(g,p),this.x=(a+g)/C,this.y=(s+p)/B,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(a,s){const[g,p]=this.parent.viewportBaseDimensions;[a,s]=this.screenToPageTranslation(a,s),this.x+=a/g,this.y+=s/p,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(a,s){const{rotation:g}=this.parent.viewport;switch(g){case 90:return[s,-a];case 180:return[-a,-s];case 270:return[-s,a];default:return[a,s]}}setDims(a,s){const[g,p]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*a/g}%`,this.div.style.height=`${100*s/p}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",v(this,P)),this.div.addEventListener("focusout",v(this,M));const[a,s]=this.getInitialTranslation();return this.translate(a,s),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(a){const s=n.KeyboardManager.platform.isMac;if(a.button!==0||a.ctrlKey&&s){a.preventDefault();return}a.ctrlKey&&!s||a.shiftKey||a.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this),R(this,A,!0)}getRect(a,s){const[g,p]=this.parent.viewportBaseDimensions,[C,B]=this.parent.pageDimensions,I=C*a/g,J=B*s/p,Y=this.x*C,q=this.y*B,Q=this.width*C,V=this.height*B;switch(this.rotation){case 0:return[Y+I,B-q-J-V,Y+I+Q,B-q-J];case 90:return[Y+J,B-q+I,Y+J+V,B-q+I+Q];case 180:return[Y-I-Q,B-q+J,Y-I,B-q+J+V];case 270:return[Y-J-V,B-q-I-Q,Y-J,B-q-I];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,s){const[g,p,C,B]=a,I=C-g,J=B-p;switch(this.rotation){case 0:return[g,s-B,I,J];case 90:return[g,s-p,J,I];case 180:return[C,s-p,I,J];case 270:return[C,s-B,J,I];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){R(this,N,!0)}disableEditMode(){R(this,N,!1)}isInEditMode(){return v(this,N)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a;(a=this.div)===null||a===void 0||a.addEventListener("focusin",v(this,P))}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(a,s){const g=new this.prototype.constructor({parent:s,id:s.getNextId()});g.rotation=a.rotation;const[p,C]=s.pageDimensions,[B,I,J,Y]=g.getRectInCurrentCoords(a.rect,C);return g.x=B/p,g.y=I/C,g.width=J/p,g.height=Y/C,g}remove(){this.div.removeEventListener("focusin",v(this,P)),this.div.removeEventListener("focusout",v(this,M)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var a;(a=this.div)===null||a===void 0||a.classList.add("selectedEditor")}unselect(){var a;(a=this.div)===null||a===void 0||a.classList.remove("selectedEditor")}updateParams(a,s){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return v(this,F)}set isEditing(a){R(this,F,a),a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}i.AnnotationEditor=h,m(h,"_colorManager",new n.ColorManager),m(h,"_zIndex",1)},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=A,i.opacityToHex=F;var n=t(1),o=t(133);function m(Ee,ie,ye){return ie in Ee?Object.defineProperty(Ee,ie,{value:ye,enumerable:!0,configurable:!0,writable:!0}):Ee[ie]=ye,Ee}function S(Ee,ie){y(Ee,ie),ie.add(Ee)}function x(Ee,ie,ye){if(!ie.has(Ee))throw new TypeError("attempted to get private field on non-instance");return ye}function R(Ee,ie,ye){y(Ee,ie),ie.set(Ee,ye)}function y(Ee,ie){if(ie.has(Ee))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(Ee,ie,ye){var Le=P(Ee,ie,"set");return D(Ee,Le,ye),ye}function D(Ee,ie,ye){if(ie.set)ie.set.call(Ee,ye);else{if(!ie.writable)throw new TypeError("attempted to set read only private field");ie.value=ye}}function u(Ee,ie){var ye=P(Ee,ie,"get");return M(Ee,ye)}function P(Ee,ie,ye){if(!ie.has(Ee))throw new TypeError("attempted to "+ye+" private field on non-instance");return ie.get(Ee)}function M(Ee,ie){return ie.get?ie.get.call(Ee):ie.value}function A(Ee,ie,ye){for(const Le of ye)ie.addEventListener(Le,Ee[Le].bind(Ee))}function F(Ee){return Math.round(Math.min(255,Math.max(1,255*Ee))).toString(16).padStart(2,"0")}var N=new WeakMap;class c{constructor(){R(this,N,{writable:!0,value:0})}getId(){var ie,ye;return`${n.AnnotationEditorPrefix}${v(this,N,(ie=u(this,N),ye=ie++,ie)),ye}`}}var h=new WeakMap,d=new WeakMap,a=new WeakMap,s=new WeakMap;class g{constructor(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;R(this,h,{writable:!0,value:[]}),R(this,d,{writable:!0,value:!1}),R(this,a,{writable:!0,value:void 0}),R(this,s,{writable:!0,value:-1}),v(this,a,ie)}add(ie){let{cmd:ye,undo:Le,mustExec:Ke,type:ve=NaN,overwriteIfSameType:xe=!1,keepUndo:Ne=!1}=ie;if(Ke&&ye(),u(this,d))return;const he={cmd:ye,undo:Le,type:ve};if(u(this,s)===-1){u(this,h).length>0&&(u(this,h).length=0),v(this,s,0),u(this,h).push(he);return}if(xe&&u(this,h)[u(this,s)].type===ve){Ne&&(he.undo=u(this,h)[u(this,s)].undo),u(this,h)[u(this,s)]=he;return}const te=u(this,s)+1;te===u(this,a)?u(this,h).splice(0,1):(v(this,s,te),te<u(this,h).length&&u(this,h).splice(te)),u(this,h).push(he)}undo(){u(this,s)!==-1&&(v(this,d,!0),u(this,h)[u(this,s)].undo(),v(this,d,!1),v(this,s,u(this,s)-1))}redo(){u(this,s)<u(this,h).length-1&&(v(this,s,u(this,s)+1),v(this,d,!0),u(this,h)[u(this,s)].cmd(),v(this,d,!1))}hasSomethingToUndo(){return u(this,s)!==-1}hasSomethingToRedo(){return u(this,s)<u(this,h).length-1}destroy(){v(this,h,null)}}i.CommandManager=g;var p=new WeakSet;class C{constructor(ie){S(this,p),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ye=C.platform.isMac;for(const[Le,Ke]of ie)for(const ve of Le){const xe=ve.startsWith("mac+");ye&&xe?(this.callbacks.set(ve.slice(4),Ke),this.allKeys.add(ve.split("+").at(-1))):!ye&&!xe&&(this.callbacks.set(ve,Ke),this.allKeys.add(ve.split("+").at(-1)))}}static get platform(){const ie=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:ie.includes("Win"),isMac:ie.includes("Mac")})}exec(ie,ye){if(!this.allKeys.has(ye.key))return;const Le=this.callbacks.get(x(this,p,B).call(this,ye));Le&&(Le.bind(ie)(),ye.stopPropagation(),ye.preventDefault())}}i.KeyboardManager=C;function B(Ee){Ee.altKey&&this.buffer.push("alt"),Ee.ctrlKey&&this.buffer.push("ctrl"),Ee.metaKey&&this.buffer.push("meta"),Ee.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ee.key);const ie=this.buffer.join("+");return this.buffer.length=0,ie}var I=new WeakMap;class J{constructor(){R(this,I,{writable:!0,value:null})}copy(ie){ie&&(Array.isArray(ie)?v(this,I,ie.map(ye=>ye.serialize())):v(this,I,[ie.serialize()]),v(this,I,u(this,I).filter(ye=>!!ye)),u(this,I).length===0&&v(this,I,null))}paste(){return u(this,I)}isEmpty(){return u(this,I)===null}destroy(){v(this,I,null)}}class Y{get _colors(){const ie=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(ie),(0,n.shadow)(this,"_colors",ie)}convert(ie){const ye=(0,o.getRGB)(ie);if(!window.matchMedia("(forced-colors: active)").matches)return ye;for(const[Le,Ke]of this._colors)if(Ke.every((ve,xe)=>ve===ye[xe]))return Y._colorsMapping.get(Le);return ye}getHexCode(ie){const ye=this._colors.get(ie);return ye?n.Util.makeHexColor(...ye):ie}}i.ColorManager=Y,m(Y,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var q=new WeakMap,Q=new WeakMap,V=new WeakMap,j=new WeakMap,U=new WeakMap,L=new WeakMap,Z=new WeakMap,ce=new WeakMap,be=new WeakMap,Re=new WeakMap,X=new WeakMap,_=new WeakMap,T=new WeakMap,z=new WeakMap,$=new WeakMap,l=new WeakMap,b=new WeakMap,w=new WeakSet,O=new WeakSet,W=new WeakSet,H=new WeakSet,ee=new WeakSet,ne=new WeakSet,se=new WeakSet,ue=new WeakSet,le=new WeakSet;class de{constructor(ie,ye){S(this,le),S(this,ue),S(this,se),S(this,ne),S(this,ee),S(this,H),S(this,W),S(this,O),S(this,w),R(this,q,{writable:!0,value:null}),R(this,Q,{writable:!0,value:new Map}),R(this,V,{writable:!0,value:new Map}),R(this,j,{writable:!0,value:new J}),R(this,U,{writable:!0,value:new g}),R(this,L,{writable:!0,value:0}),R(this,Z,{writable:!0,value:null}),R(this,ce,{writable:!0,value:null}),R(this,be,{writable:!0,value:new c}),R(this,Re,{writable:!0,value:!1}),R(this,X,{writable:!0,value:n.AnnotationEditorType.NONE}),R(this,_,{writable:!0,value:new Set}),R(this,T,{writable:!0,value:this.keydown.bind(this)}),R(this,z,{writable:!0,value:this.onEditingAction.bind(this)}),R(this,$,{writable:!0,value:this.onPageChanging.bind(this)}),R(this,l,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),R(this,b,{writable:!0,value:null}),v(this,b,ie),v(this,ce,ye),u(this,ce)._on("editingaction",u(this,z)),u(this,ce)._on("pagechanging",u(this,$))}destroy(){x(this,O,Se).call(this),u(this,ce)._off("editingaction",u(this,z)),u(this,ce)._off("pagechanging",u(this,$));for(const ie of u(this,V).values())ie.destroy();u(this,V).clear(),u(this,Q).clear(),v(this,q,null),u(this,_).clear(),u(this,j).destroy(),u(this,U).destroy()}onPageChanging(ie){let{pageNumber:ye}=ie;v(this,L,ye-1)}focusMainContainer(){u(this,b).focus()}keydown(ie){var ye;(ye=this.getActive())!==null&&ye!==void 0&&ye.shouldGetKeyboardEvents()||de._keyboardManager.exec(this,ie)}onEditingAction(ie){["undo","redo","cut","copy","paste","delete","selectAll"].includes(ie.name)&&this[ie.name]()}setEditingState(ie){ie?(x(this,w,ge).call(this),x(this,W,we).call(this,{isEditing:u(this,X)!==n.AnnotationEditorType.NONE,isEmpty:x(this,ue,Qe).call(this),hasSomethingToUndo:u(this,U).hasSomethingToUndo(),hasSomethingToRedo:u(this,U).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:u(this,j).isEmpty()})):(x(this,O,Se).call(this),x(this,W,we).call(this,{isEditing:!1}))}registerEditorTypes(ie){v(this,Z,ie);for(const ye of u(this,Z))x(this,H,Pe).call(this,ye.defaultPropertiesToUpdate)}getId(){return u(this,be).getId()}addLayer(ie){u(this,V).set(ie.pageIndex,ie),u(this,Re)?ie.enable():ie.disable()}removeLayer(ie){u(this,V).delete(ie.pageIndex)}updateMode(ie){if(v(this,X,ie),ie===n.AnnotationEditorType.NONE)this.setEditingState(!1),x(this,ne,_e).call(this);else{this.setEditingState(!0),x(this,ee,Ie).call(this);for(const ye of u(this,V).values())ye.updateMode(ie)}}updateToolbar(ie){ie!==u(this,X)&&u(this,ce).dispatch("switchannotationeditormode",{source:this,mode:ie})}updateParams(ie,ye){for(const Le of u(this,_))Le.updateParams(ie,ye);for(const Le of u(this,Z))Le.updateDefaultParams(ie,ye)}getEditors(ie){const ye=[];for(const Le of u(this,Q).values())Le.pageIndex===ie&&ye.push(Le);return ye}getEditor(ie){return u(this,Q).get(ie)}addEditor(ie){u(this,Q).set(ie.id,ie)}removeEditor(ie){u(this,Q).delete(ie.id),this.unselect(ie)}setActiveEditor(ie){u(this,q)!==ie&&(v(this,q,ie),ie&&x(this,H,Pe).call(this,ie.propertiesToUpdate))}toggleSelected(ie){if(u(this,_).has(ie)){u(this,_).delete(ie),ie.unselect(),x(this,W,we).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,_).add(ie),ie.select(),x(this,H,Pe).call(this,ie.propertiesToUpdate),x(this,W,we).call(this,{hasSelectedEditor:!0})}setSelected(ie){for(const ye of u(this,_))ye!==ie&&ye.unselect();u(this,_).clear(),u(this,_).add(ie),ie.select(),x(this,H,Pe).call(this,ie.propertiesToUpdate),x(this,W,we).call(this,{hasSelectedEditor:!0})}isSelected(ie){return u(this,_).has(ie)}unselect(ie){ie.unselect(),u(this,_).delete(ie),x(this,W,we).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,_).size!==0}undo(){u(this,U).undo(),x(this,W,we).call(this,{hasSomethingToUndo:u(this,U).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,ue,Qe).call(this)})}redo(){u(this,U).redo(),x(this,W,we).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,U).hasSomethingToRedo(),isEmpty:x(this,ue,Qe).call(this)})}addCommands(ie){u(this,U).add(ie),x(this,W,we).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,ue,Qe).call(this)})}delete(){if(u(this,q)&&u(this,q).commitOrRemove(),!this.hasSelection)return;const ie=[...u(this,_)],ye=()=>{for(const Ke of ie)Ke.remove()},Le=()=>{for(const Ke of ie)x(this,se,Xe).call(this,Ke)};this.addCommands({cmd:ye,undo:Le,mustExec:!0})}copy(){if(u(this,q)&&u(this,q).commitOrRemove(),this.hasSelection){const ie=[];for(const ye of u(this,_))ye.isEmpty()||ie.push(ye);if(ie.length===0)return;u(this,j).copy(ie),x(this,W,we).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(u(this,j).isEmpty())return;this.unselectAll();const ie=u(this,V).get(u(this,L)),ye=u(this,j).paste().map(ve=>ie.deserialize(ve)),Le=()=>{for(const ve of ye)x(this,se,Xe).call(this,ve);x(this,le,Oe).call(this,ye)},Ke=()=>{for(const ve of ye)ve.remove()};this.addCommands({cmd:Le,undo:Ke,mustExec:!0})}selectAll(){for(const ie of u(this,_))ie.commit();x(this,le,Oe).call(this,u(this,Q).values())}unselectAll(){if(u(this,q)){u(this,q).commitOrRemove();return}if(x(this,le,Oe).size!==0){for(const ie of u(this,_))ie.unselect();u(this,_).clear(),x(this,W,we).call(this,{hasSelectedEditor:!1})}}isActive(ie){return u(this,q)===ie}getActive(){return u(this,q)}getMode(){return u(this,X)}}i.AnnotationEditorUIManager=de;function ge(){u(this,b).addEventListener("keydown",u(this,T))}function Se(){u(this,b).removeEventListener("keydown",u(this,T))}function we(Ee){Object.entries(Ee).some(ye=>{let[Le,Ke]=ye;return u(this,l)[Le]!==Ke})&&u(this,ce).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,l),Ee)})}function Pe(Ee){u(this,ce).dispatch("annotationeditorparamschanged",{source:this,details:Ee})}function Ie(){if(!u(this,Re)){v(this,Re,!0);for(const Ee of u(this,V).values())Ee.enable()}}function _e(){if(this.unselectAll(),u(this,Re)){v(this,Re,!1);for(const Ee of u(this,V).values())Ee.disable()}}function Xe(Ee){const ie=u(this,V).get(Ee.pageIndex);ie?ie.addOrRebuild(Ee):this.addEditor(Ee)}function Qe(){if(u(this,Q).size===0)return!0;if(u(this,Q).size===1)for(const Ee of u(this,Q).values())return Ee.isEmpty();return!1}function Oe(Ee){u(this,_).clear();for(const ie of Ee)ie.isEmpty()||(u(this,_).add(ie),ie.select());x(this,W,we).call(this,{hasSelectedEditor:!0})}m(de,"_keyboardManager",new C([[["ctrl+a","mac+meta+a"],de.prototype.selectAll],[["ctrl+c","mac+meta+c"],de.prototype.copy],[["ctrl+v","mac+meta+v"],de.prototype.paste],[["ctrl+x","mac+meta+x"],de.prototype.cut],[["ctrl+z","mac+meta+z"],de.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],de.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],de.prototype.delete],[["Escape","mac+Escape"],de.prototype.unselectAll]]))},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=i.AnnotationPrefix=void 0,i.deprecated=g,i.getColorValues=J,i.getCurrentTransform=Y,i.getCurrentTransformInverse=q,i.getFilenameFromUrl=c,i.getPdfFilenameFromUrl=h,i.getRGB=I,i.getXfaPageViewport=B,i.isDataScheme=F,i.isPdfFile=N,i.isValidFetchUrl=a,i.loadScript=s;var n=t(134),o=t(1);function m(Q,V,j){return V in Q?Object.defineProperty(Q,V,{value:j,enumerable:!0,configurable:!0,writable:!0}):Q[V]=j,Q}const S="http://www.w3.org/2000/svg",x="pdfjs_internal_id_";i.AnnotationPrefix=x;class R{}i.PixelsPerInch=R,m(R,"CSS",96),m(R,"PDF",72),m(R,"PDF_TO_CSS_UNITS",R.CSS/R.PDF);class y extends n.BaseCanvasFactory{constructor(){let{ownerDocument:V=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=V}_createCanvas(V,j){const U=this._document.createElement("canvas");return U.width=V,U.height=j,U}}i.DOMCanvasFactory=y;async function v(Q){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a(Q,document.baseURI)){const j=await fetch(Q);if(!j.ok)throw new Error(j.statusText);return V?new Uint8Array(await j.arrayBuffer()):(0,o.stringToBytes)(await j.text())}return new Promise((j,U)=>{const L=new XMLHttpRequest;L.open("GET",Q,!0),V&&(L.responseType="arraybuffer"),L.onreadystatechange=()=>{if(L.readyState===XMLHttpRequest.DONE){if(L.status===200||L.status===0){let Z;if(V&&L.response?Z=new Uint8Array(L.response):!V&&L.responseText&&(Z=(0,o.stringToBytes)(L.responseText)),Z){j(Z);return}}U(new Error(L.statusText))}},L.send(null)})}class D extends n.BaseCMapReaderFactory{_fetchData(V,j){return v(V,this.isCompressed).then(U=>({cMapData:U,compressionType:j}))}}i.DOMCMapReaderFactory=D;class u extends n.BaseStandardFontDataFactory{_fetchData(V){return v(V,!0)}}i.DOMStandardFontDataFactory=u;class P extends n.BaseSVGFactory{_createSVG(V){return document.createElementNS(S,V)}}i.DOMSVGFactory=P;class M{constructor(V){let{viewBox:j,scale:U,rotation:L,offsetX:Z=0,offsetY:ce=0,dontFlip:be=!1}=V;this.viewBox=j,this.scale=U,this.rotation=L,this.offsetX=Z,this.offsetY=ce;const Re=(j[2]+j[0])/2,X=(j[3]+j[1])/2;let _,T,z,$;switch(L%=360,L<0&&(L+=360),L){case 180:_=-1,T=0,z=0,$=1;break;case 90:_=0,T=1,z=1,$=0;break;case 270:_=0,T=-1,z=-1,$=0;break;case 0:_=1,T=0,z=0,$=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}be&&(z=-z,$=-$);let l,b,w,O;_===0?(l=Math.abs(X-j[1])*U+Z,b=Math.abs(Re-j[0])*U+ce,w=Math.abs(j[3]-j[1])*U,O=Math.abs(j[2]-j[0])*U):(l=Math.abs(Re-j[0])*U+Z,b=Math.abs(X-j[1])*U+ce,w=Math.abs(j[2]-j[0])*U,O=Math.abs(j[3]-j[1])*U),this.transform=[_*U,T*U,z*U,$*U,l-_*U*Re-z*U*X,b-T*U*Re-$*U*X],this.width=w,this.height=O}clone(){let{scale:V=this.scale,rotation:j=this.rotation,offsetX:U=this.offsetX,offsetY:L=this.offsetY,dontFlip:Z=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new M({viewBox:this.viewBox.slice(),scale:V,rotation:j,offsetX:U,offsetY:L,dontFlip:Z})}convertToViewportPoint(V,j){return o.Util.applyTransform([V,j],this.transform)}convertToViewportRectangle(V){const j=o.Util.applyTransform([V[0],V[1]],this.transform),U=o.Util.applyTransform([V[2],V[3]],this.transform);return[j[0],j[1],U[0],U[1]]}convertToPdfPoint(V,j){return o.Util.applyInverseTransform([V,j],this.transform)}}i.PageViewport=M;class A extends o.BaseException{constructor(V,j){super(V,"RenderingCancelledException"),this.type=j}}i.RenderingCancelledException=A;function F(Q){const V=Q.length;let j=0;for(;j<V&&Q[j].trim()==="";)j++;return Q.substring(j,j+5).toLowerCase()==="data:"}function N(Q){return typeof Q=="string"&&/\.pdf$/i.test(Q)}function c(Q){const V=Q.indexOf("#"),j=Q.indexOf("?"),U=Math.min(V>0?V:Q.length,j>0?j:Q.length);return Q.substring(Q.lastIndexOf("/",U)+1,U)}function h(Q){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof Q!="string")return V;if(F(Q))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const j=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,U=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,L=j.exec(Q);let Z=U.exec(L[1])||U.exec(L[2])||U.exec(L[3]);if(Z&&(Z=Z[0],Z.includes("%")))try{Z=U.exec(decodeURIComponent(Z))[0]}catch{}return Z||V}class d{constructor(){this.started=Object.create(null),this.times=[]}time(V){V in this.started&&(0,o.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,o.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let j=0;for(const U of this.times){const L=U.name;L.length>j&&(j=L.length)}for(const U of this.times){const L=U.end-U.start;V.push(`${U.name.padEnd(j)} ${L}ms
`)}return V.join("")}}i.StatTimer=d;function a(Q,V){try{const{protocol:j}=V?new URL(Q,V):new URL(Q);return j==="http:"||j==="https:"}catch{return!1}}function s(Q){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((j,U)=>{const L=document.createElement("script");L.src=Q,L.onload=function(Z){V&&L.remove(),j(Z)},L.onerror=function(){U(new Error(`Cannot load script at: ${L.src}`))},(document.head||document.documentElement).append(L)})}function g(Q){console.log("Deprecated API usage: "+Q)}let p;class C{static toDateObject(V){if(!V||typeof V!="string")return null;p||(p=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const j=p.exec(V);if(!j)return null;const U=parseInt(j[1],10);let L=parseInt(j[2],10);L=L>=1&&L<=12?L-1:0;let Z=parseInt(j[3],10);Z=Z>=1&&Z<=31?Z:1;let ce=parseInt(j[4],10);ce=ce>=0&&ce<=23?ce:0;let be=parseInt(j[5],10);be=be>=0&&be<=59?be:0;let Re=parseInt(j[6],10);Re=Re>=0&&Re<=59?Re:0;const X=j[7]||"Z";let _=parseInt(j[8],10);_=_>=0&&_<=23?_:0;let T=parseInt(j[9],10)||0;return T=T>=0&&T<=59?T:0,X==="-"?(ce+=_,be+=T):X==="+"&&(ce-=_,be-=T),new Date(Date.UTC(U,L,Z,ce,be,Re))}}i.PDFDateString=C;function B(Q,V){let{scale:j=1,rotation:U=0}=V;const{width:L,height:Z}=Q.attributes.style,ce=[0,0,parseInt(L),parseInt(Z)];return new M({viewBox:ce,scale:j,rotation:U})}function I(Q){if(Q.startsWith("#")){const V=parseInt(Q.slice(1),16);return[(V&16711680)>>16,(V&65280)>>8,V&255]}return Q.startsWith("rgb(")?Q.slice(4,-1).split(",").map(V=>parseInt(V)):Q.startsWith("rgba(")?Q.slice(5,-1).split(",").map(V=>parseInt(V)).slice(0,3):((0,o.warn)(`Not a valid color format: "${Q}"`),[0,0,0])}function J(Q){const V=document.createElement("span");V.style.visibility="hidden",document.body.append(V);for(const j of Q.keys()){V.style.color=j;const U=window.getComputedStyle(V).color;Q.set(j,I(U))}V.remove()}function Y(Q){const{a:V,b:j,c:U,d:L,e:Z,f:ce}=Q.getTransform();return[V,j,U,L,Z,ce]}function q(Q){const{a:V,b:j,c:U,d:L,e:Z,f:ce}=Q.getTransform().invertSelf();return[V,j,U,L,Z,ce]}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var n=t(1);class o{constructor(){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,v){if(y<=0||v<=0)throw new Error("Invalid canvas size");const D=this._createCanvas(y,v);return{canvas:D,context:D.getContext("2d")}}reset(y,v,D){if(!y.canvas)throw new Error("Canvas is not specified");if(v<=0||D<=0)throw new Error("Invalid canvas size");y.canvas.width=v,y.canvas.height=D}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,v){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=o;class m{constructor(y){let{baseUrl:v=null,isCompressed:D=!1}=y;this.constructor===m&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=D}async fetch(y){let{name:v}=y;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const D=this.baseUrl+v+(this.isCompressed?".bcmap":""),u=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(D,u).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${D}`)})}_fetchData(y,v){(0,n.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=m;class S{constructor(y){let{baseUrl:v=null}=y;this.constructor===S&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}async fetch(y){let{filename:v}=y;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const D=`${this.baseUrl}${v}`;return this._fetchData(D).catch(u=>{throw new Error(`Unable to load font data at: ${D}`)})}_fetchData(y){(0,n.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=S;class x{constructor(){this.constructor===x&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,v){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(y<=0||v<=0)throw new Error("Invalid SVG dimensions");const u=this._createSVG("svg:svg");return u.setAttribute("version","1.1"),D||(u.setAttribute("width",`${y}px`),u.setAttribute("height",`${v}px`)),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("viewBox",`0 0 ${y} ${v}`),u}createElement(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,n.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=x},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var n=t(1);const o=3285377520,m=4294901760,S=65535;class x{constructor(y){this.h1=y?y&4294967295:o,this.h2=y?y&4294967295:o}update(y){let v,D;if(typeof y=="string"){v=new Uint8Array(y.length*2),D=0;for(let g=0,p=y.length;g<p;g++){const C=y.charCodeAt(g);C<=255?v[D++]=C:(v[D++]=C>>>8,v[D++]=C&255)}}else if((0,n.isArrayBuffer)(y))v=y.slice(),D=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const u=D>>2,P=D-u*4,M=new Uint32Array(v.buffer,0,u);let A=0,F=0,N=this.h1,c=this.h2;const h=3432918353,d=461845907,a=h&S,s=d&S;for(let g=0;g<u;g++)g&1?(A=M[g],A=A*h&m|A*a&S,A=A<<15|A>>>17,A=A*d&m|A*s&S,N^=A,N=N<<13|N>>>19,N=N*5+3864292196):(F=M[g],F=F*h&m|F*a&S,F=F<<15|F>>>17,F=F*d&m|F*s&S,c^=F,c=c<<13|c>>>19,c=c*5+3864292196);switch(A=0,P){case 3:A^=v[u*4+2]<<16;case 2:A^=v[u*4+1]<<8;case 1:A^=v[u*4],A=A*h&m|A*a&S,A=A<<15|A>>>17,A=A*d&m|A*s&S,u&1?N^=A:c^=A}this.h1=N,this.h2=c}hexdigest(){let y=this.h1,v=this.h2;y^=v>>>1,y=y*3981806797&m|y*36045&S,v=v*4283543511&m|((v<<16|y>>>16)*2950163797&m)>>>16,y^=v>>>1,y=y*444984403&m|y*60499&S,v=v*3301882366&m|((v<<16|y>>>16)*3120437893&m)>>>16,y^=v>>>1;const D=(y>>>0).toString(16),u=(v>>>0).toString(16);return D.padStart(8,"0")+u.padStart(8,"0")}}i.MurmurHash3_64=x},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var n=t(1);class o{constructor(R){let{docId:y,onUnsupportedFeature:v,ownerDocument:D=globalThis.document,styleElement:u=null}=R;this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=y,this._onUnsupportedFeature=v,this._document=D,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(R){this.nativeFontFaces.push(R),this._document.fonts.add(R)}insertRule(R){let y=this.styleElement;y||(y=this.styleElement=this._document.createElement("style"),y.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(y));const v=y.sheet;v.insertRule(R,v.cssRules.length)}clear(){for(const R of this.nativeFontFaces)this._document.fonts.delete(R);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(R){if(R.attached||R.missingFile)return;if(R.attached=!0,this.isFontLoadingAPISupported){const v=R.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(D){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${v.family}': '${D}'.`),R.disableFontFace=!0,D}}return}const y=R.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const D=this._queueLoadingCallback(v);this._prepareFontLoadEvent([y],[R],D)})}}_queueLoadingCallback(R){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var R;const y=!!((R=this._document)!==null&&R!==void 0&&R.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",y)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(R,y,v){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let m;i.FontLoader=m,i.FontLoader=m=class extends o{constructor(R){super(R),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let R=!1;if(typeof navigator>"u")R=!0;else{const y=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(y==null?void 0:y[1])>=14&&(R=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",R)}_queueLoadingCallback(R){function y(){for((0,n.assert)(!D.done,"completeRequest() cannot be called twice."),D.done=!0;v.requests.length>0&&v.requests[0].done;){const u=v.requests.shift();setTimeout(u.callback,0)}}const v=this.loadingContext,D={id:`pdfjs-font-loading-${v.nextRequestId++}`,done:!1,complete:y,callback:R};return v.requests.push(D),D}get _loadTestFont(){const R=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",R())}_prepareFontLoadEvent(R,y,v){function D(Y,q){return Y.charCodeAt(q)<<24|Y.charCodeAt(q+1)<<16|Y.charCodeAt(q+2)<<8|Y.charCodeAt(q+3)&255}function u(Y,q,Q,V){const j=Y.substring(0,q),U=Y.substring(q+Q);return j+V+U}let P,M;const A=this._document.createElement("canvas");A.width=1,A.height=1;const F=A.getContext("2d");let N=0;function c(Y,q){if(N++,N>30){(0,n.warn)("Load test font never loaded."),q();return}if(F.font="30px "+Y,F.fillText(".",0,20),F.getImageData(0,0,1,1).data[3]>0){q();return}setTimeout(c.bind(null,Y,q))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=u(d,976,h.length,h);const s=16,g=1482184792;let p=D(d,s);for(P=0,M=h.length-3;P<M;P+=4)p=p-g+D(h,P)|0;P<h.length&&(p=p-g+D(h+"XXX",P)|0),d=u(d,s,4,(0,n.string32)(p));const C=`url(data:font/opentype;base64,${btoa(d)});`,B=`@font-face {font-family:"${h}";src:${C}}`;this.insertRule(B);const I=[];for(const Y of y)I.push(Y.loadedName);I.push(h);const J=this._document.createElement("div");J.style.visibility="hidden",J.style.width=J.style.height="10px",J.style.position="absolute",J.style.top=J.style.left="0px";for(const Y of I){const q=this._document.createElement("span");q.textContent="Hi",q.style.fontFamily=Y,J.append(q)}this._document.body.append(J),c(h,()=>{J.remove(),v.complete()})}};class S{constructor(R,y){let{isEvalSupported:v=!0,disableFontFace:D=!1,ignoreErrors:u=!1,onUnsupportedFeature:P,fontRegistry:M=null}=y;this.compiledGlyphs=Object.create(null);for(const A in R)this[A]=R[A];this.isEvalSupported=v!==!1,this.disableFontFace=D===!0,this.ignoreErrors=u===!0,this._onUnsupportedFeature=P,this.fontRegistry=M}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let R;if(!this.cssFontInfo)R=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),R=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return this.fontRegistry&&this.fontRegistry.registerFont(this),R}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const R=(0,n.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(R)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${y}}`;else{let D=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(D+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${D}src:${y}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,y),v}getPathGenerator(R,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let v;try{v=R.get(this.loadedName+"_path_"+y)}catch(D){if(!this.ignoreErrors)throw D;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${D}".`),this.compiledGlyphs[y]=function(u,P){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const D=[];for(const u of v){const P=u.args!==void 0?u.args.join(","):"";D.push("c.",u.cmd,"(",P,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",D.join(""))}return this.compiledGlyphs[y]=function(D,u){for(const P of v)P.cmd==="scale"&&(P.args=[u,-u]),D[P.cmd].apply(D,P.args)}}}i.FontFaceObject=S},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var n=t(133),o=t(1),m=t(138),S=t(139),x=t(3);function R(X,_){y(X,_),_.add(X)}function y(X,_){if(_.has(X))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(X,_,T){if(!_.has(X))throw new TypeError("attempted to get private field on non-instance");return T}const D=16,u=100,P=4096,M=15,A=10,F=x.isNodeJS&&typeof Path2D>"u"?-1:1e3,N=16;function c(X,_){if(X._removeMirroring)throw new Error("Context is already forwarding operations.");X.__originalSave=X.save,X.__originalRestore=X.restore,X.__originalRotate=X.rotate,X.__originalScale=X.scale,X.__originalTranslate=X.translate,X.__originalTransform=X.transform,X.__originalSetTransform=X.setTransform,X.__originalResetTransform=X.resetTransform,X.__originalClip=X.clip,X.__originalMoveTo=X.moveTo,X.__originalLineTo=X.lineTo,X.__originalBezierCurveTo=X.bezierCurveTo,X.__originalRect=X.rect,X.__originalClosePath=X.closePath,X.__originalBeginPath=X.beginPath,X._removeMirroring=()=>{X.save=X.__originalSave,X.restore=X.__originalRestore,X.rotate=X.__originalRotate,X.scale=X.__originalScale,X.translate=X.__originalTranslate,X.transform=X.__originalTransform,X.setTransform=X.__originalSetTransform,X.resetTransform=X.__originalResetTransform,X.clip=X.__originalClip,X.moveTo=X.__originalMoveTo,X.lineTo=X.__originalLineTo,X.bezierCurveTo=X.__originalBezierCurveTo,X.rect=X.__originalRect,X.closePath=X.__originalClosePath,X.beginPath=X.__originalBeginPath,delete X._removeMirroring},X.save=function(){_.save(),this.__originalSave()},X.restore=function(){_.restore(),this.__originalRestore()},X.translate=function(z,$){_.translate(z,$),this.__originalTranslate(z,$)},X.scale=function(z,$){_.scale(z,$),this.__originalScale(z,$)},X.transform=function(z,$,l,b,w,O){_.transform(z,$,l,b,w,O),this.__originalTransform(z,$,l,b,w,O)},X.setTransform=function(z,$,l,b,w,O){_.setTransform(z,$,l,b,w,O),this.__originalSetTransform(z,$,l,b,w,O)},X.resetTransform=function(){_.resetTransform(),this.__originalResetTransform()},X.rotate=function(z){_.rotate(z),this.__originalRotate(z)},X.clip=function(z){_.clip(z),this.__originalClip(z)},X.moveTo=function(T,z){_.moveTo(T,z),this.__originalMoveTo(T,z)},X.lineTo=function(T,z){_.lineTo(T,z),this.__originalLineTo(T,z)},X.bezierCurveTo=function(T,z,$,l,b,w){_.bezierCurveTo(T,z,$,l,b,w),this.__originalBezierCurveTo(T,z,$,l,b,w)},X.rect=function(T,z,$,l){_.rect(T,z,$,l),this.__originalRect(T,z,$,l)},X.closePath=function(){_.closePath(),this.__originalClosePath()},X.beginPath=function(){_.beginPath(),this.__originalBeginPath()}}class h{constructor(_){this.canvasFactory=_,this.cache=Object.create(null)}getCanvas(_,T,z){let $;return this.cache[_]!==void 0?($=this.cache[_],this.canvasFactory.reset($,T,z)):($=this.canvasFactory.create(T,z),this.cache[_]=$),$}delete(_){delete this.cache[_]}clear(){for(const _ in this.cache){const T=this.cache[_];this.canvasFactory.destroy(T),delete this.cache[_]}}}function d(X,_,T,z,$,l,b,w,O,W){const[H,ee,ne,se,ue,le]=(0,n.getCurrentTransform)(X);if(ee===0&&ne===0){const Se=b*H+ue,we=Math.round(Se),Pe=w*se+le,Ie=Math.round(Pe),_e=(b+O)*H+ue,Xe=Math.abs(Math.round(_e)-we)||1,Qe=(w+W)*se+le,Oe=Math.abs(Math.round(Qe)-Ie)||1;return X.setTransform(Math.sign(H),0,0,Math.sign(se),we,Ie),X.drawImage(_,T,z,$,l,0,0,Xe,Oe),X.setTransform(H,ee,ne,se,ue,le),[Xe,Oe]}if(H===0&&se===0){const Se=w*ne+ue,we=Math.round(Se),Pe=b*ee+le,Ie=Math.round(Pe),_e=(w+W)*ne+ue,Xe=Math.abs(Math.round(_e)-we)||1,Qe=(b+O)*ee+le,Oe=Math.abs(Math.round(Qe)-Ie)||1;return X.setTransform(0,Math.sign(ee),Math.sign(ne),0,we,Ie),X.drawImage(_,T,z,$,l,0,0,Oe,Xe),X.setTransform(H,ee,ne,se,ue,le),[Oe,Xe]}X.drawImage(_,T,z,$,l,b,w,O,W);const de=Math.hypot(H,ee),ge=Math.hypot(ne,se);return[de*O,ge*W]}function a(X){const{width:_,height:T}=X;if(_>F||T>F)return null;const z=1e3,$=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=_+1;let b=new Uint8Array(l*(T+1)),w,O,W;const H=_+7&-8;let ee=new Uint8Array(H*T),ne=0;for(const ge of X.data){let Se=128;for(;Se>0;)ee[ne++]=ge&Se?0:255,Se>>=1}let se=0;for(ne=0,ee[ne]!==0&&(b[0]=1,++se),O=1;O<_;O++)ee[ne]!==ee[ne+1]&&(b[O]=ee[ne]?2:1,++se),ne++;for(ee[ne]!==0&&(b[O]=2,++se),w=1;w<T;w++){ne=w*H,W=w*l,ee[ne-H]!==ee[ne]&&(b[W]=ee[ne]?1:8,++se);let ge=(ee[ne]?4:0)+(ee[ne-H]?8:0);for(O=1;O<_;O++)ge=(ge>>2)+(ee[ne+1]?4:0)+(ee[ne-H+1]?8:0),$[ge]&&(b[W+O]=$[ge],++se),ne++;if(ee[ne-H]!==ee[ne]&&(b[W+O]=ee[ne]?2:4,++se),se>z)return null}for(ne=H*(T-1),W=w*l,ee[ne]!==0&&(b[W]=8,++se),O=1;O<_;O++)ee[ne]!==ee[ne+1]&&(b[W+O]=ee[ne]?4:8,++se),ne++;if(ee[ne]!==0&&(b[W+O]=4,++se),se>z)return null;const ue=new Int32Array([0,l,-1,0,-l,0,0,0,1]),le=new Path2D;for(w=0;se&&w<=T;w++){let ge=w*l;const Se=ge+_;for(;ge<Se&&!b[ge];)ge++;if(ge===Se)continue;le.moveTo(ge%l,w);const we=ge;let Pe=b[ge];do{const Ie=ue[Pe];do ge+=Ie;while(!b[ge]);const _e=b[ge];_e!==5&&_e!==10?(Pe=_e,b[ge]=0):(Pe=_e&51*Pe>>4,b[ge]&=Pe>>2|Pe<<2),le.lineTo(ge%l,ge/l|0),b[ge]||--se}while(we!==ge);--w}return ee=null,b=null,function(ge){ge.save(),ge.scale(1/_,-1/T),ge.translate(0,-T),ge.fill(le),ge.beginPath(),ge.restore()}}class s{constructor(_,T){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,_,T])}clone(){const _=Object.create(this);return _.clipBox=this.clipBox.slice(),_}setCurrentPoint(_,T){this.x=_,this.y=T}updatePathMinMax(_,T,z){[T,z]=o.Util.applyTransform([T,z],_),this.minX=Math.min(this.minX,T),this.minY=Math.min(this.minY,z),this.maxX=Math.max(this.maxX,T),this.maxY=Math.max(this.maxY,z)}updateRectMinMax(_,T){const z=o.Util.applyTransform(T,_),$=o.Util.applyTransform(T.slice(2),_);this.minX=Math.min(this.minX,z[0],$[0]),this.minY=Math.min(this.minY,z[1],$[1]),this.maxX=Math.max(this.maxX,z[0],$[0]),this.maxY=Math.max(this.maxY,z[1],$[1])}updateScalingPathMinMax(_,T){o.Util.scaleMinMax(_,T),this.minX=Math.min(this.minX,T[0]),this.maxX=Math.max(this.maxX,T[1]),this.minY=Math.min(this.minY,T[2]),this.maxY=Math.max(this.maxY,T[3])}updateCurvePathMinMax(_,T,z,$,l,b,w,O,W,H){const ee=o.Util.bezierBoundingBox(T,z,$,l,b,w,O,W);if(H){H[0]=Math.min(H[0],ee[0],ee[2]),H[1]=Math.max(H[1],ee[0],ee[2]),H[2]=Math.min(H[2],ee[1],ee[3]),H[3]=Math.max(H[3],ee[1],ee[3]);return}this.updateRectMinMax(_,ee)}getPathBoundingBox(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.PathType.FILL,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const z=[this.minX,this.minY,this.maxX,this.maxY];if(_===m.PathType.STROKE){T||(0,o.unreachable)("Stroke bounding box must include transform.");const $=o.Util.singularValueDecompose2dScale(T),l=$[0]*this.lineWidth/2,b=$[1]*this.lineWidth/2;z[0]-=l,z[1]-=b,z[2]+=l,z[3]+=b}return z}updateClipFromPath(){const _=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(_||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(_){this.clipBox=_,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.PathType.FILL,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o.Util.intersect(this.clipBox,this.getPathBoundingBox(_,T))}}function g(X,_){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData<"u"&&_ instanceof ImageData){X.putImageData(_,0,0);return}const z=_.height,$=_.width,l=z%N,b=(z-l)/N,w=l===0?b:b+1,O=X.createImageData($,N);let W=0,H;const ee=_.data,ne=O.data;let se,ue,le,de,ge,Se,we,Pe;if(T)switch(T.length){case 1:ge=T[0],Se=T[0],we=T[0],Pe=T[0];break;case 4:ge=T[0],Se=T[1],we=T[2],Pe=T[3];break}if(_.kind===o.ImageKind.GRAYSCALE_1BPP){const Ie=ee.byteLength,_e=new Uint32Array(ne.buffer,0,ne.byteLength>>2),Xe=_e.length,Qe=$+7>>3;let Oe=4294967295,Ee=o.FeatureTest.isLittleEndian?4278190080:255;for(Pe&&Pe[0]===255&&Pe[255]===0&&([Oe,Ee]=[Ee,Oe]),se=0;se<w;se++){for(le=se<b?N:l,H=0,ue=0;ue<le;ue++){const ie=Ie-W;let ye=0;const Le=ie>Qe?$:ie*8-7,Ke=Le&-8;let ve=0,xe=0;for(;ye<Ke;ye+=8)xe=ee[W++],_e[H++]=xe&128?Oe:Ee,_e[H++]=xe&64?Oe:Ee,_e[H++]=xe&32?Oe:Ee,_e[H++]=xe&16?Oe:Ee,_e[H++]=xe&8?Oe:Ee,_e[H++]=xe&4?Oe:Ee,_e[H++]=xe&2?Oe:Ee,_e[H++]=xe&1?Oe:Ee;for(;ye<Le;ye++)ve===0&&(xe=ee[W++],ve=128),_e[H++]=xe&ve?Oe:Ee,ve>>=1}for(;H<Xe;)_e[H++]=0;X.putImageData(O,0,se*N)}}else if(_.kind===o.ImageKind.RGBA_32BPP){const Ie=!!(ge||Se||we);for(ue=0,de=$*N*4,se=0;se<b;se++){if(ne.set(ee.subarray(W,W+de)),W+=de,Ie)for(let _e=0;_e<de;_e+=4)ge&&(ne[_e+0]=ge[ne[_e+0]]),Se&&(ne[_e+1]=Se[ne[_e+1]]),we&&(ne[_e+2]=we[ne[_e+2]]);X.putImageData(O,0,ue),ue+=N}if(se<w){if(de=$*l*4,ne.set(ee.subarray(W,W+de)),Ie)for(let _e=0;_e<de;_e+=4)ge&&(ne[_e+0]=ge[ne[_e+0]]),Se&&(ne[_e+1]=Se[ne[_e+1]]),we&&(ne[_e+2]=we[ne[_e+2]]);X.putImageData(O,0,ue)}}else if(_.kind===o.ImageKind.RGB_24BPP){const Ie=!!(ge||Se||we);for(le=N,de=$*le,se=0;se<w;se++){for(se>=b&&(le=l,de=$*le),H=0,ue=de;ue--;)ne[H++]=ee[W++],ne[H++]=ee[W++],ne[H++]=ee[W++],ne[H++]=255;if(Ie)for(let _e=0;_e<H;_e+=4)ge&&(ne[_e+0]=ge[ne[_e+0]]),Se&&(ne[_e+1]=Se[ne[_e+1]]),we&&(ne[_e+2]=we[ne[_e+2]]);X.putImageData(O,0,se*N)}}else throw new Error(`bad image kind: ${_.kind}`)}function p(X,_){if(_.bitmap){X.drawImage(_.bitmap,0,0);return}const T=_.height,z=_.width,$=T%N,l=(T-$)/N,b=$===0?l:l+1,w=X.createImageData(z,N);let O=0;const W=_.data,H=w.data;for(let ee=0;ee<b;ee++){const ne=ee<l?N:$;({srcPos:O}=(0,S.applyMaskImageData)({src:W,srcPos:O,dest:H,width:z,height:ne})),X.putImageData(w,0,ee*N)}}function C(X,_){const T=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let z=0,$=T.length;z<$;z++){const l=T[z];X[l]!==void 0&&(_[l]=X[l])}X.setLineDash!==void 0&&(_.setLineDash(X.getLineDash()),_.lineDashOffset=X.lineDashOffset)}function B(X,_){X.strokeStyle=X.fillStyle=_||"#000000",X.fillRule="nonzero",X.globalAlpha=1,X.lineWidth=1,X.lineCap="butt",X.lineJoin="miter",X.miterLimit=10,X.globalCompositeOperation="source-over",X.font="10px sans-serif",X.setLineDash!==void 0&&(X.setLineDash([]),X.lineDashOffset=0)}function I(X,_,T,z){const $=X.length;for(let l=3;l<$;l+=4){const b=X[l];if(b===0)X[l-3]=_,X[l-2]=T,X[l-1]=z;else if(b<255){const w=255-b;X[l-3]=X[l-3]*b+_*w>>8,X[l-2]=X[l-2]*b+T*w>>8,X[l-1]=X[l-1]*b+z*w>>8}}}function J(X,_,T){const z=X.length,$=1/255;for(let l=3;l<z;l+=4){const b=T?T[X[l]]:X[l];_[l]=_[l]*b*$|0}}function Y(X,_,T){const z=X.length;for(let $=3;$<z;$+=4){const l=X[$-3]*77+X[$-2]*152+X[$-1]*28;_[$]=T?_[$]*T[l>>8]>>8:_[$]*l>>16}}function q(X,_,T,z,$,l,b,w,O,W,H){const ee=!!l,ne=ee?l[0]:0,se=ee?l[1]:0,ue=ee?l[2]:0;let le;$==="Luminosity"?le=Y:le=J;const ge=Math.min(z,Math.ceil(1048576/T));for(let Se=0;Se<z;Se+=ge){const we=Math.min(ge,z-Se),Pe=X.getImageData(w-W,Se+(O-H),T,we),Ie=_.getImageData(w,Se+O,T,we);ee&&I(Pe.data,ne,se,ue),le(Pe.data,Ie.data,b),_.putImageData(Ie,w,Se+O)}}function Q(X,_,T,z){const $=z[0],l=z[1],b=z[2]-$,w=z[3]-l;b===0||w===0||(q(_.context,T,b,w,_.subtype,_.backdrop,_.transferMap,$,l,_.offsetX,_.offsetY),X.save(),X.globalAlpha=1,X.globalCompositeOperation="source-over",X.setTransform(1,0,0,1,0,0),X.drawImage(T.canvas,0,0),X.restore())}function V(X,_){const T=o.Util.singularValueDecompose2dScale(X);T[0]=Math.fround(T[0]),T[1]=Math.fround(T[1]);const z=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return _!==void 0?_:T[0]<=z||T[1]<=z}const j=["butt","round","square"],U=["miter","round","bevel"],L={},Z={};var ce=new WeakSet;class be{constructor(_,T,z,$,l,b,w,O){R(this,ce),this.ctx=_,this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=T,this.objs=z,this.canvasFactory=$,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=b,this.cachedCanvases=new h(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=w,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(O==null?void 0:O.background)||null,this.foregroundColor=(O==null?void 0:O.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(_){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof _=="string"?_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_):T}beginDrawing(_){let{transform:T,viewport:z,transparency:$=!1,background:l=null}=_;const b=this.ctx.canvas.width,w=this.ctx.canvas.height,O=l||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const W=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const H=this.backgroundColor=this.ctx.fillStyle;let ee=!0,ne=O;if(this.ctx.fillStyle=O,ne=this.ctx.fillStyle,ee=typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne),W==="#000000"&&H==="#ffffff"||W===H||!ee)this.foregroundColor=this.backgroundColor=null;else{const[se,ue,le]=(0,n.getRGB)(ne),de=Se=>(Se/=255,Se<=.03928?Se/12.92:((Se+.055)/1.055)**2.4),ge=Math.round(.2126*de(se)+.7152*de(ue)+.0722*de(le));this.selectColor=(Se,we,Pe)=>{const Ie=.2126*de(Se)+.7152*de(we)+.0722*de(Pe);return Math.round(Ie)===ge?H:W}}}if(this.ctx.fillStyle=this.backgroundColor||O,this.ctx.fillRect(0,0,b,w),this.ctx.restore(),$){const W=this.cachedCanvases.getCanvas("transparent",b,w);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),B(this.ctx,this.foregroundColor),T&&(this.ctx.transform(...T),this.outputScaleX=T[0],this.outputScaleY=T[0]),this.ctx.transform(...z.transform),this.viewportScale=z.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(_,T,z,$){const l=_.argsArray,b=_.fnArray;let w=T||0;const O=l.length;if(O===w)return w;const W=O-w>A&&typeof z=="function",H=W?Date.now()+M:0;let ee=0;const ne=this.commonObjs,se=this.objs;let ue;for(;;){if($!==void 0&&w===$.nextBreakPoint)return $.breakIt(w,z),w;if(ue=b[w],ue!==o.OPS.dependency)this[ue].apply(this,l[w]);else for(const le of l[w]){const de=le.startsWith("g_")?ne:se;if(!de.has(le))return de.get(le,z),w}if(w++,w===O)return w;if(W&&++ee>A){if(Date.now()>H)return z(),w;ee=0}}}endDrawing(){v(this,ce,Re).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const _ of this._cachedBitmapsMap.values()){for(const T of _.values())typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement&&(T.width=T.height=0);_.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(_,T){const z=_.width,$=_.height;let l=Math.max(Math.hypot(T[0],T[1]),1),b=Math.max(Math.hypot(T[2],T[3]),1),w=z,O=$,W="prescale1",H,ee;for(;l>2&&w>1||b>2&&O>1;){let ne=w,se=O;l>2&&w>1&&(ne=Math.ceil(w/2),l/=w/ne),b>2&&O>1&&(se=Math.ceil(O/2),b/=O/se),H=this.cachedCanvases.getCanvas(W,ne,se),ee=H.context,ee.clearRect(0,0,ne,se),ee.drawImage(_,0,0,w,O,0,0,ne,se),_=H.canvas,w=ne,O=se,W=W==="prescale1"?"prescale2":"prescale1"}return{img:_,paintWidth:w,paintHeight:O}}_createMaskCanvas(_){const T=this.ctx,{width:z,height:$}=_,l=this.current.fillColor,b=this.current.patternFill,w=(0,n.getCurrentTransform)(T);let O,W,H,ee;if((_.bitmap||_.data)&&_.count>1){const Xe=_.bitmap||_.data.buffer,Qe=w.slice(0,4);W=JSON.stringify(b?Qe:[Qe,l]),O=this._cachedBitmapsMap.get(Xe),O||(O=new Map,this._cachedBitmapsMap.set(Xe,O));const Oe=O.get(W);if(Oe&&!b){const Ee=Math.round(Math.min(w[0],w[2])+w[4]),ie=Math.round(Math.min(w[1],w[3])+w[5]);return{canvas:Oe,offsetX:Ee,offsetY:ie}}H=Oe}H||(ee=this.cachedCanvases.getCanvas("maskCanvas",z,$),p(ee.context,_));let ne=o.Util.transform(w,[1/z,0,0,-1/$,0,0]);ne=o.Util.transform(ne,[1,0,0,1,0,-$]);const se=o.Util.applyTransform([0,0],ne),ue=o.Util.applyTransform([z,$],ne),le=o.Util.normalizeRect([se[0],se[1],ue[0],ue[1]]),de=Math.round(le[2]-le[0])||1,ge=Math.round(le[3]-le[1])||1,Se=this.cachedCanvases.getCanvas("fillCanvas",de,ge),we=Se.context,Pe=Math.min(se[0],ue[0]),Ie=Math.min(se[1],ue[1]);we.translate(-Pe,-Ie),we.transform(...ne),H||(H=this._scaleImage(ee.canvas,(0,n.getCurrentTransformInverse)(we)),H=H.img,O&&b&&O.set(W,H)),we.imageSmoothingEnabled=V((0,n.getCurrentTransform)(we),_.interpolate),d(we,H,0,0,H.width,H.height,0,0,z,$),we.globalCompositeOperation="source-in";const _e=o.Util.transform((0,n.getCurrentTransformInverse)(we),[1,0,0,1,-Pe,-Ie]);return we.fillStyle=b?l.getPattern(T,this,_e,m.PathType.FILL):l,we.fillRect(0,0,z,$),O&&!b&&(this.cachedCanvases.delete("fillCanvas"),O.set(W,Se.canvas)),{canvas:Se.canvas,offsetX:Math.round(Pe),offsetY:Math.round(Ie)}}setLineWidth(_){_!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=_,this.ctx.lineWidth=_}setLineCap(_){this.ctx.lineCap=j[_]}setLineJoin(_){this.ctx.lineJoin=U[_]}setMiterLimit(_){this.ctx.miterLimit=_}setDash(_,T){const z=this.ctx;z.setLineDash!==void 0&&(z.setLineDash(_),z.lineDashOffset=T)}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(let T=0,z=_.length;T<z;T++){const $=_[T],l=$[0],b=$[1];switch(l){case"LW":this.setLineWidth(b);break;case"LC":this.setLineCap(b);break;case"LJ":this.setLineJoin(b);break;case"ML":this.setMiterLimit(b);break;case"D":this.setDash(b[0],b[1]);break;case"RI":this.setRenderingIntent(b);break;case"FL":this.setFlatness(b);break;case"Font":this.setFont(b[0],b[1]);break;case"CA":this.current.strokeAlpha=$[1];break;case"ca":this.current.fillAlpha=$[1],this.ctx.globalAlpha=$[1];break;case"BM":this.ctx.globalCompositeOperation=b;break;case"SMask":this.current.activeSMask=b?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=b}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const _=this.inSMaskMode;this.current.activeSMask&&!_?this.beginSMaskMode():!this.current.activeSMask&&_&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const _=this.ctx.canvas.width,T=this.ctx.canvas.height,z="smaskGroupAt"+this.groupLevel,$=this.cachedCanvases.getCanvas(z,_,T);this.suspendedCtx=this.ctx,this.ctx=$.context;const l=this.ctx;l.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),C(this.suspendedCtx,l),c(l,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(_){if(!this.current.activeSMask)return;_?(_[0]=Math.floor(_[0]),_[1]=Math.floor(_[1]),_[2]=Math.ceil(_[2]),_[3]=Math.ceil(_[3])):_=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const T=this.current.activeSMask,z=this.suspendedCtx;Q(z,T,this.ctx,_),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const _=this.current;this.stateStack.push(_),this.current=_.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(_,T,z,$,l,b){this.ctx.transform(_,T,z,$,l,b),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(_,T,z){const $=this.ctx,l=this.current;let b=l.x,w=l.y,O,W;const H=(0,n.getCurrentTransform)($),ee=H[0]===0&&H[3]===0||H[1]===0&&H[2]===0,ne=ee?z.slice(0):null;for(let se=0,ue=0,le=_.length;se<le;se++)switch(_[se]|0){case o.OPS.rectangle:b=T[ue++],w=T[ue++];const de=T[ue++],ge=T[ue++],Se=b+de,we=w+ge;$.moveTo(b,w),de===0||ge===0?$.lineTo(Se,we):($.lineTo(Se,w),$.lineTo(Se,we),$.lineTo(b,we)),ee||l.updateRectMinMax(H,[b,w,Se,we]),$.closePath();break;case o.OPS.moveTo:b=T[ue++],w=T[ue++],$.moveTo(b,w),ee||l.updatePathMinMax(H,b,w);break;case o.OPS.lineTo:b=T[ue++],w=T[ue++],$.lineTo(b,w),ee||l.updatePathMinMax(H,b,w);break;case o.OPS.curveTo:O=b,W=w,b=T[ue+4],w=T[ue+5],$.bezierCurveTo(T[ue],T[ue+1],T[ue+2],T[ue+3],b,w),l.updateCurvePathMinMax(H,O,W,T[ue],T[ue+1],T[ue+2],T[ue+3],b,w,ne),ue+=6;break;case o.OPS.curveTo2:O=b,W=w,$.bezierCurveTo(b,w,T[ue],T[ue+1],T[ue+2],T[ue+3]),l.updateCurvePathMinMax(H,O,W,b,w,T[ue],T[ue+1],T[ue+2],T[ue+3],ne),b=T[ue+2],w=T[ue+3],ue+=4;break;case o.OPS.curveTo3:O=b,W=w,b=T[ue+2],w=T[ue+3],$.bezierCurveTo(T[ue],T[ue+1],b,w,b,w),l.updateCurvePathMinMax(H,O,W,T[ue],T[ue+1],b,w,b,w,ne),ue+=4;break;case o.OPS.closePath:$.closePath();break}ee&&l.updateScalingPathMinMax(H,ne),l.setCurrentPoint(b,w)}closePath(){this.ctx.closePath()}stroke(_){_=typeof _<"u"?_:!0;const T=this.ctx,z=this.current.strokeColor;T.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof z=="object"&&z!==null&&z!==void 0&&z.getPattern?(T.save(),T.strokeStyle=z.getPattern(T,this,(0,n.getCurrentTransformInverse)(T),m.PathType.STROKE),this.rescaleAndStroke(!1),T.restore()):this.rescaleAndStroke(!0)),_&&this.consumePath(this.current.getClippedPathBoundingBox()),T.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(_){_=typeof _<"u"?_:!0;const T=this.ctx,z=this.current.fillColor,$=this.current.patternFill;let l=!1;$&&(T.save(),T.fillStyle=z.getPattern(T,this,(0,n.getCurrentTransformInverse)(T),m.PathType.FILL),l=!0);const b=this.current.getClippedPathBoundingBox();this.contentVisible&&b!==null&&(this.pendingEOFill?(T.fill("evenodd"),this.pendingEOFill=!1):T.fill()),l&&T.restore(),_&&this.consumePath(b)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=L}eoClip(){this.pendingClip=Z}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const _=this.pendingTextPaths,T=this.ctx;if(_===void 0){T.beginPath();return}T.save(),T.beginPath();for(const z of _)T.setTransform(...z.transform),T.translate(z.x,z.y),z.addToPath(T,z.fontSize);T.restore(),T.clip(),T.beginPath(),delete this.pendingTextPaths}setCharSpacing(_){this.current.charSpacing=_}setWordSpacing(_){this.current.wordSpacing=_}setHScale(_){this.current.textHScale=_/100}setLeading(_){this.current.leading=-_}setFont(_,T){const z=this.commonObjs.get(_),$=this.current;if(!z)throw new Error(`Can't find font for ${_}`);if($.fontMatrix=z.fontMatrix||o.FONT_IDENTITY_MATRIX,($.fontMatrix[0]===0||$.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+_),T<0?(T=-T,$.fontDirection=-1):$.fontDirection=1,this.current.font=z,this.current.fontSize=T,z.isType3Font)return;const l=z.loadedName||"sans-serif";let b="normal";z.black?b="900":z.bold&&(b="bold");const w=z.italic?"italic":"normal",O=`"${l}", ${z.fallbackName}`;let W=T;T<D?W=D:T>u&&(W=u),this.current.fontSizeScale=T/W,this.ctx.font=`${w} ${b} ${W}px ${O}`}setTextRenderingMode(_){this.current.textRenderingMode=_}setTextRise(_){this.current.textRise=_}moveText(_,T){this.current.x=this.current.lineX+=_,this.current.y=this.current.lineY+=T}setLeadingMoveText(_,T){this.setLeading(-T),this.moveText(_,T)}setTextMatrix(_,T,z,$,l,b){this.current.textMatrix=[_,T,z,$,l,b],this.current.textMatrixScale=Math.hypot(_,T),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(_,T,z,$){const l=this.ctx,b=this.current,w=b.font,O=b.textRenderingMode,W=b.fontSize/b.fontSizeScale,H=O&o.TextRenderingMode.FILL_STROKE_MASK,ee=!!(O&o.TextRenderingMode.ADD_TO_PATH_FLAG),ne=b.patternFill&&!w.missingFile;let se;(w.disableFontFace||ee||ne)&&(se=w.getPathGenerator(this.commonObjs,_)),w.disableFontFace||ne?(l.save(),l.translate(T,z),l.beginPath(),se(l,W),$&&l.setTransform(...$),(H===o.TextRenderingMode.FILL||H===o.TextRenderingMode.FILL_STROKE)&&l.fill(),(H===o.TextRenderingMode.STROKE||H===o.TextRenderingMode.FILL_STROKE)&&l.stroke(),l.restore()):((H===o.TextRenderingMode.FILL||H===o.TextRenderingMode.FILL_STROKE)&&l.fillText(_,T,z),(H===o.TextRenderingMode.STROKE||H===o.TextRenderingMode.FILL_STROKE)&&l.strokeText(_,T,z)),ee&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(l),x:T,y:z,fontSize:W,addToPath:se})}get isFontSubpixelAAEnabled(){const{context:_}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);_.scale(1.5,1),_.fillText("I",0,10);const T=_.getImageData(0,0,10,10).data;let z=!1;for(let $=3;$<T.length;$+=4)if(T[$]>0&&T[$]<255){z=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",z)}showText(_){const T=this.current,z=T.font;if(z.isType3Font)return this.showType3Text(_);const $=T.fontSize;if($===0)return;const l=this.ctx,b=T.fontSizeScale,w=T.charSpacing,O=T.wordSpacing,W=T.fontDirection,H=T.textHScale*W,ee=_.length,ne=z.vertical,se=ne?1:-1,ue=z.defaultVMetrics,le=$*T.fontMatrix[0],de=T.textRenderingMode===o.TextRenderingMode.FILL&&!z.disableFontFace&&!T.patternFill;l.save(),l.transform(...T.textMatrix),l.translate(T.x,T.y+T.textRise),W>0?l.scale(H,-1):l.scale(H,1);let ge;if(T.patternFill){l.save();const _e=T.fillColor.getPattern(l,this,(0,n.getCurrentTransformInverse)(l),m.PathType.FILL);ge=(0,n.getCurrentTransform)(l),l.restore(),l.fillStyle=_e}let Se=T.lineWidth;const we=T.textMatrixScale;if(we===0||Se===0){const _e=T.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(_e===o.TextRenderingMode.STROKE||_e===o.TextRenderingMode.FILL_STROKE)&&(Se=this.getSinglePixelWidth())}else Se/=we;b!==1&&(l.scale(b,b),Se/=b),l.lineWidth=Se;let Pe=0,Ie;for(Ie=0;Ie<ee;++Ie){const _e=_[Ie];if(typeof _e=="number"){Pe+=se*_e*$/1e3;continue}let Xe=!1;const Qe=(_e.isSpace?O:0)+w,Oe=_e.fontChar,Ee=_e.accent;let ie,ye,Le=_e.width;if(ne){const ve=_e.vmetric||ue,xe=-(_e.vmetric?ve[1]:Le*.5)*le,Ne=ve[2]*le;Le=ve?-ve[0]:Le,ie=xe/b,ye=(Pe+Ne)/b}else ie=Pe/b,ye=0;if(z.remeasure&&Le>0){const ve=l.measureText(Oe).width*1e3/$*b;if(Le<ve&&this.isFontSubpixelAAEnabled){const xe=Le/ve;Xe=!0,l.save(),l.scale(xe,1),ie/=xe}else Le!==ve&&(ie+=(Le-ve)/2e3*$/b)}if(this.contentVisible&&(_e.isInFont||z.missingFile)){if(de&&!Ee)l.fillText(Oe,ie,ye);else if(this.paintChar(Oe,ie,ye,ge),Ee){const ve=ie+$*Ee.offset.x/b,xe=ye-$*Ee.offset.y/b;this.paintChar(Ee.fontChar,ve,xe,ge)}}let Ke;ne?Ke=Le*le-Qe*W:Ke=Le*le+Qe*W,Pe+=Ke,Xe&&l.restore()}ne?T.y-=Pe:T.x+=Pe*H,l.restore(),this.compose()}showType3Text(_){const T=this.ctx,z=this.current,$=z.font,l=z.fontSize,b=z.fontDirection,w=$.vertical?1:-1,O=z.charSpacing,W=z.wordSpacing,H=z.textHScale*b,ee=z.fontMatrix||o.FONT_IDENTITY_MATRIX,ne=_.length,se=z.textRenderingMode===o.TextRenderingMode.INVISIBLE;let ue,le,de,ge;if(!(se||l===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,T.save(),T.transform(...z.textMatrix),T.translate(z.x,z.y),T.scale(H,b),ue=0;ue<ne;++ue){if(le=_[ue],typeof le=="number"){ge=w*le*l/1e3,this.ctx.translate(ge,0),z.x+=ge*H;continue}const Se=(le.isSpace?W:0)+O,we=$.charProcOperatorList[le.operatorListId];if(!we){(0,o.warn)(`Type3 character "${le.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=le,this.save(),T.scale(l,l),T.transform(...ee),this.executeOperatorList(we),this.restore()),de=o.Util.applyTransform([le.width,0],ee)[0]*l+Se,T.translate(de,0),z.x+=de*H}T.restore(),this.processingType3=null}}setCharWidth(_,T){}setCharWidthAndBounds(_,T,z,$,l,b){this.ctx.rect(z,$,l-z,b-$),this.ctx.clip(),this.endPath()}getColorN_Pattern(_){let T;if(_[0]==="TilingPattern"){const z=_[1],$=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),l={createCanvasGraphics:b=>new be(b,this.commonObjs,this.objs,this.canvasFactory)};T=new m.TilingPattern(_,z,this.ctx,l,$)}else T=this._getPattern(_[1],_[2]);return T}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(_,T,z){var $;const l=(($=this.selectColor)===null||$===void 0?void 0:$.call(this,_,T,z))||o.Util.makeHexColor(_,T,z);this.ctx.strokeStyle=l,this.current.strokeColor=l}setFillRGBColor(_,T,z){var $;const l=(($=this.selectColor)===null||$===void 0?void 0:$.call(this,_,T,z))||o.Util.makeHexColor(_,T,z);this.ctx.fillStyle=l,this.current.fillColor=l,this.current.patternFill=!1}_getPattern(_){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,z;return this.cachedPatterns.has(_)?z=this.cachedPatterns.get(_):(z=(0,m.getShadingPattern)(this.objs.get(_)),this.cachedPatterns.set(_,z)),T&&(z.matrix=T),z}shadingFill(_){if(!this.contentVisible)return;const T=this.ctx;this.save();const z=this._getPattern(_);T.fillStyle=z.getPattern(T,this,(0,n.getCurrentTransformInverse)(T),m.PathType.SHADING);const $=(0,n.getCurrentTransformInverse)(T);if($){const l=T.canvas,b=l.width,w=l.height,O=o.Util.applyTransform([0,0],$),W=o.Util.applyTransform([0,w],$),H=o.Util.applyTransform([b,0],$),ee=o.Util.applyTransform([b,w],$),ne=Math.min(O[0],W[0],H[0],ee[0]),se=Math.min(O[1],W[1],H[1],ee[1]),ue=Math.max(O[0],W[0],H[0],ee[0]),le=Math.max(O[1],W[1],H[1],ee[1]);this.ctx.fillRect(ne,se,ue-ne,le-se)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(_,T){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(_)&&_.length===6&&this.transform(..._),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),T)){const z=T[2]-T[0],$=T[3]-T[1];this.ctx.rect(T[0],T[1],z,$),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),T),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(_){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const T=this.ctx;_.isolated||(0,o.info)("TODO: Support non-isolated groups."),_.knockout&&(0,o.warn)("Knockout groups not supported.");const z=(0,n.getCurrentTransform)(T);if(_.matrix&&T.transform(..._.matrix),!_.bbox)throw new Error("Bounding box is required.");let $=o.Util.getAxialAlignedBoundingBox(_.bbox,(0,n.getCurrentTransform)(T));const l=[0,0,T.canvas.width,T.canvas.height];$=o.Util.intersect($,l)||[0,0,0,0];const b=Math.floor($[0]),w=Math.floor($[1]);let O=Math.max(Math.ceil($[2])-b,1),W=Math.max(Math.ceil($[3])-w,1),H=1,ee=1;O>P&&(H=O/P,O=P),W>P&&(ee=W/P,W=P),this.current.startNewPathAndClipBox([0,0,O,W]);let ne="groupAt"+this.groupLevel;_.smask&&(ne+="_smask_"+this.smaskCounter++%2);const se=this.cachedCanvases.getCanvas(ne,O,W),ue=se.context;ue.scale(1/H,1/ee),ue.translate(-b,-w),ue.transform(...z),_.smask?this.smaskStack.push({canvas:se.canvas,context:ue,offsetX:b,offsetY:w,scaleX:H,scaleY:ee,subtype:_.smask.subtype,backdrop:_.smask.backdrop,transferMap:_.smask.transferMap||null,startTransformInverse:null}):(T.setTransform(1,0,0,1,0,0),T.translate(b,w),T.scale(H,ee),T.save()),C(T,ue),this.ctx=ue,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(T),this.groupLevel++}endGroup(_){if(!this.contentVisible)return;this.groupLevel--;const T=this.ctx,z=this.groupStack.pop();if(this.ctx=z,this.ctx.imageSmoothingEnabled=!1,_.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const $=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...$);const l=o.Util.getAxialAlignedBoundingBox([0,0,T.canvas.width,T.canvas.height],$);this.ctx.drawImage(T.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(_,T,z,$,l){if(v(this,ce,Re).call(this),B(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(T)&&T.length===4){const b=T[2]-T[0],w=T[3]-T[1];if(l&&this.annotationCanvasMap){z=z.slice(),z[4]-=T[0],z[5]-=T[1],T=T.slice(),T[0]=T[1]=0,T[2]=b,T[3]=w;const[O,W]=o.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:H}=this,ee=Math.ceil(b*this.outputScaleX*H),ne=Math.ceil(w*this.outputScaleY*H);this.annotationCanvas=this.canvasFactory.create(ee,ne);const{canvas:se,context:ue}=this.annotationCanvas;this.annotationCanvasMap.set(_,se),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ue,this.ctx.setTransform(O,0,0,-W,0,w*W),B(this.ctx,this.foregroundColor)}else B(this.ctx,this.foregroundColor),this.ctx.rect(T[0],T[1],b,w),this.ctx.clip(),this.endPath()}this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...z),this.transform(...$)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(_){if(!this.contentVisible)return;const T=_.count;_=this.getObject(_.data,_),_.count=T;const z=this.ctx,$=this.processingType3;if($&&($.compiled===void 0&&($.compiled=a(_)),$.compiled)){$.compiled(z);return}const l=this._createMaskCanvas(_),b=l.canvas;z.save(),z.setTransform(1,0,0,1,0,0),z.drawImage(b,l.offsetX,l.offsetY),z.restore(),this.compose()}paintImageMaskXObjectRepeat(_,T){let z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,$=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0,b=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;_=this.getObject(_.data,_);const w=this.ctx;w.save();const O=(0,n.getCurrentTransform)(w);w.transform(T,z,$,l,0,0);const W=this._createMaskCanvas(_);w.setTransform(1,0,0,1,0,0);for(let H=0,ee=b.length;H<ee;H+=2){const ne=o.Util.transform(O,[T,z,$,l,b[H],b[H+1]]),[se,ue]=o.Util.applyTransform([0,0],ne);w.drawImage(W.canvas,se,ue)}w.restore(),this.compose()}paintImageMaskXObjectGroup(_){if(!this.contentVisible)return;const T=this.ctx,z=this.current.fillColor,$=this.current.patternFill;for(const l of _){const{data:b,width:w,height:O,transform:W}=l,H=this.cachedCanvases.getCanvas("maskCanvas",w,O),ee=H.context;ee.save();const ne=this.getObject(b,l);p(ee,ne),ee.globalCompositeOperation="source-in",ee.fillStyle=$?z.getPattern(ee,this,(0,n.getCurrentTransformInverse)(T),m.PathType.FILL):z,ee.fillRect(0,0,w,O),ee.restore(),T.save(),T.transform(...W),T.scale(1,-1),d(T,H.canvas,0,0,w,O,0,-1,1,1),T.restore()}this.compose()}paintImageXObject(_){if(!this.contentVisible)return;const T=this.getObject(_);if(!T){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(T)}paintImageXObjectRepeat(_,T,z,$){if(!this.contentVisible)return;const l=this.getObject(_);if(!l){(0,o.warn)("Dependent image isn't ready yet");return}const b=l.width,w=l.height,O=[];for(let W=0,H=$.length;W<H;W+=2)O.push({transform:[T,0,0,z,$[W],$[W+1]],x:0,y:0,w:b,h:w});this.paintInlineImageXObjectGroup(l,O)}paintInlineImageXObject(_){if(!this.contentVisible)return;const T=_.width,z=_.height,$=this.ctx;this.save(),$.scale(1/T,-1/z);let l;if(typeof HTMLElement=="function"&&_ instanceof HTMLElement||!_.data)l=_;else{const W=this.cachedCanvases.getCanvas("inlineImage",T,z),H=W.context;g(H,_,this.current.transferMaps),l=W.canvas}const b=this._scaleImage(l,(0,n.getCurrentTransformInverse)($));$.imageSmoothingEnabled=V((0,n.getCurrentTransform)($),_.interpolate);const[w,O]=d($,b.img,0,0,b.paintWidth,b.paintHeight,0,-z,T,z);if(this.imageLayer){const[W,H]=o.Util.applyTransform([0,-z],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:_,left:W,top:H,width:w,height:O})}this.compose(),this.restore()}paintInlineImageXObjectGroup(_,T){if(!this.contentVisible)return;const z=this.ctx,$=_.width,l=_.height,b=this.cachedCanvases.getCanvas("inlineImage",$,l),w=b.context;g(w,_,this.current.transferMaps);for(const O of T){if(z.save(),z.transform(...O.transform),z.scale(1,-1),d(z,b.canvas,O.x,O.y,O.w,O.h,0,-1,1,1),this.imageLayer){const[W,H]=o.Util.applyTransform([O.x,O.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:_,left:W,top:H,width:$,height:l})}z.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(_){}markPointProps(_,T){}beginMarkedContent(_){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(_,T){_==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(T)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(_){const T=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(_);const z=this.ctx;this.pendingClip&&(T||(this.pendingClip===Z?z.clip("evenodd"):z.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),z.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const _=(0,n.getCurrentTransform)(this.ctx);if(_[1]===0&&_[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(_[0]),Math.abs(_[3]));else{const T=Math.abs(_[0]*_[3]-_[2]*_[1]),z=Math.hypot(_[0],_[2]),$=Math.hypot(_[1],_[3]);this._cachedGetSinglePixelWidth=Math.max(z,$)/T}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:_}=this.current,T=(0,n.getCurrentTransform)(this.ctx);let z,$;if(T[1]===0&&T[2]===0){const l=Math.abs(T[0]),b=Math.abs(T[3]);if(_===0)z=1/l,$=1/b;else{const w=l*_,O=b*_;z=w<1?1/w:1,$=O<1?1/O:1}}else{const l=Math.abs(T[0]*T[3]-T[2]*T[1]),b=Math.hypot(T[0],T[1]),w=Math.hypot(T[2],T[3]);if(_===0)z=w/l,$=b/l;else{const O=_*l;z=w>O?w/O:1,$=b>O?b/O:1}}this._cachedScaleForStroking=[z,$]}return this._cachedScaleForStroking}rescaleAndStroke(_){const{ctx:T}=this,{lineWidth:z}=this.current,[$,l]=this.getScaleForStroking();if(T.lineWidth=z||1,$===1&&l===1){T.stroke();return}let b,w,O;_&&(b=(0,n.getCurrentTransform)(T),w=T.getLineDash().slice(),O=T.lineDashOffset),T.scale($,l);const W=Math.max($,l);T.setLineDash(T.getLineDash().map(H=>H/W)),T.lineDashOffset/=W,T.stroke(),_&&(T.setTransform(...b),T.setLineDash(w),T.lineDashOffset=O)}isContentVisible(){for(let _=this.markedContentStack.length-1;_>=0;_--)if(!this.markedContentStack[_].visible)return!1;return!0}}i.CanvasGraphics=be;function Re(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(const X in o.OPS)be.prototype[X]!==void 0&&(be.prototype[o.OPS[X]]=be.prototype[X])},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=M;var n=t(1),o=t(133),m=t(3);const S={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=S;function x(N,c){if(!c||m.isNodeJS)return;const h=c[2]-c[0],d=c[3]-c[1],a=new Path2D;a.rect(c[0],c[1],h,d),N.clip(a)}class R{constructor(){this.constructor===R&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class y extends R{constructor(c){super(),this._type=c[1],this._bbox=c[2],this._colorStops=c[3],this._p0=c[4],this._p1=c[5],this._r0=c[6],this._r1=c[7],this.matrix=null}_createGradient(c){let h;this._type==="axial"?h=c.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(h=c.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)h.addColorStop(d[0],d[1]);return h}getPattern(c,h,d,a){let s;if(a===S.STROKE||a===S.FILL){const g=h.current.getClippedPathBoundingBox(a,(0,o.getCurrentTransform)(c))||[0,0,0,0],p=Math.ceil(g[2]-g[0])||1,C=Math.ceil(g[3]-g[1])||1,B=h.cachedCanvases.getCanvas("pattern",p,C,!0),I=B.context;I.clearRect(0,0,I.canvas.width,I.canvas.height),I.beginPath(),I.rect(0,0,I.canvas.width,I.canvas.height),I.translate(-g[0],-g[1]),d=n.Util.transform(d,[1,0,0,1,g[0],g[1]]),I.transform(...h.baseTransform),this.matrix&&I.transform(...this.matrix),x(I,this._bbox),I.fillStyle=this._createGradient(I),I.fill(),s=c.createPattern(B.canvas,"no-repeat");const J=new DOMMatrix(d);try{s.setTransform(J)}catch(Y){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${Y==null?void 0:Y.message}".`)}}else x(c,this._bbox),s=this._createGradient(c);return s}}function v(N,c,h,d,a,s,g,p){const C=c.coords,B=c.colors,I=N.data,J=N.width*4;let Y;C[h+1]>C[d+1]&&(Y=h,h=d,d=Y,Y=s,s=g,g=Y),C[d+1]>C[a+1]&&(Y=d,d=a,a=Y,Y=g,g=p,p=Y),C[h+1]>C[d+1]&&(Y=h,h=d,d=Y,Y=s,s=g,g=Y);const q=(C[h]+c.offsetX)*c.scaleX,Q=(C[h+1]+c.offsetY)*c.scaleY,V=(C[d]+c.offsetX)*c.scaleX,j=(C[d+1]+c.offsetY)*c.scaleY,U=(C[a]+c.offsetX)*c.scaleX,L=(C[a+1]+c.offsetY)*c.scaleY;if(Q>=L)return;const Z=B[s],ce=B[s+1],be=B[s+2],Re=B[g],X=B[g+1],_=B[g+2],T=B[p],z=B[p+1],$=B[p+2],l=Math.round(Q),b=Math.round(L);let w,O,W,H,ee,ne,se,ue;for(let le=l;le<=b;le++){if(le<j){let Pe;le<Q?Pe=0:Pe=(Q-le)/(Q-j),w=q-(q-V)*Pe,O=Z-(Z-Re)*Pe,W=ce-(ce-X)*Pe,H=be-(be-_)*Pe}else{let Pe;le>L?Pe=1:j===L?Pe=0:Pe=(j-le)/(j-L),w=V-(V-U)*Pe,O=Re-(Re-T)*Pe,W=X-(X-z)*Pe,H=_-(_-$)*Pe}let de;le<Q?de=0:le>L?de=1:de=(Q-le)/(Q-L),ee=q-(q-U)*de,ne=Z-(Z-T)*de,se=ce-(ce-z)*de,ue=be-(be-$)*de;const ge=Math.round(Math.min(w,ee)),Se=Math.round(Math.max(w,ee));let we=J*le+ge*4;for(let Pe=ge;Pe<=Se;Pe++)de=(w-Pe)/(w-ee),de<0?de=0:de>1&&(de=1),I[we++]=O-(O-ne)*de|0,I[we++]=W-(W-se)*de|0,I[we++]=H-(H-ue)*de|0,I[we++]=255}}function D(N,c,h){const d=c.coords,a=c.colors;let s,g;switch(c.type){case"lattice":const p=c.verticesPerRow,C=Math.floor(d.length/p)-1,B=p-1;for(s=0;s<C;s++){let I=s*p;for(let J=0;J<B;J++,I++)v(N,h,d[I],d[I+1],d[I+p],a[I],a[I+1],a[I+p]),v(N,h,d[I+p+1],d[I+1],d[I+p],a[I+p+1],a[I+1],a[I+p])}break;case"triangles":for(s=0,g=d.length;s<g;s+=3)v(N,h,d[s],d[s+1],d[s+2],a[s],a[s+1],a[s+2]);break;default:throw new Error("illegal figure")}}class u extends R{constructor(c){super(),this._coords=c[2],this._colors=c[3],this._figures=c[4],this._bounds=c[5],this._bbox=c[7],this._background=c[8],this.matrix=null}_createMeshCanvas(c,h,d){const p=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),B=Math.ceil(this._bounds[2])-p,I=Math.ceil(this._bounds[3])-C,J=Math.min(Math.ceil(Math.abs(B*c[0]*1.1)),3e3),Y=Math.min(Math.ceil(Math.abs(I*c[1]*1.1)),3e3),q=B/J,Q=I/Y,V={coords:this._coords,colors:this._colors,offsetX:-p,offsetY:-C,scaleX:1/q,scaleY:1/Q},j=J+2*2,U=Y+2*2,L=d.getCanvas("mesh",j,U,!1),Z=L.context,ce=Z.createImageData(J,Y);if(h){const Re=ce.data;for(let X=0,_=Re.length;X<_;X+=4)Re[X]=h[0],Re[X+1]=h[1],Re[X+2]=h[2],Re[X+3]=255}for(const Re of this._figures)D(ce,Re,V);return Z.putImageData(ce,2,2),{canvas:L.canvas,offsetX:p-2*q,offsetY:C-2*Q,scaleX:q,scaleY:Q}}getPattern(c,h,d,a){x(c,this._bbox);let s;if(a===S.SHADING)s=n.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(c));else if(s=n.Util.singularValueDecompose2dScale(h.baseTransform),this.matrix){const p=n.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*p[0],s[1]*p[1]]}const g=this._createMeshCanvas(s,a===S.SHADING?null:this._background,h.cachedCanvases);return a!==S.SHADING&&(c.setTransform(...h.baseTransform),this.matrix&&c.transform(...this.matrix)),c.translate(g.offsetX,g.offsetY),c.scale(g.scaleX,g.scaleY),c.createPattern(g.canvas,"no-repeat")}}class P extends R{getPattern(){return"hotpink"}}function M(N){switch(N[0]){case"RadialAxial":return new y(N);case"Mesh":return new u(N);case"Dummy":return new P}throw new Error(`Unknown IR type: ${N[0]}`)}const A={COLORED:1,UNCOLORED:2};class F{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(c,h,d,a,s){this.operatorList=c[2],this.matrix=c[3]||[1,0,0,1,0,0],this.bbox=c[4],this.xstep=c[5],this.ystep=c[6],this.paintType=c[7],this.tilingType=c[8],this.color=h,this.ctx=d,this.canvasGraphicsFactory=a,this.baseTransform=s}createPatternCanvas(c){const h=this.operatorList,d=this.bbox,a=this.xstep,s=this.ystep,g=this.paintType,p=this.tilingType,C=this.color,B=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+p);const I=d[0],J=d[1],Y=d[2],q=d[3],Q=n.Util.singularValueDecompose2dScale(this.matrix),V=n.Util.singularValueDecompose2dScale(this.baseTransform),j=[Q[0]*V[0],Q[1]*V[1]],U=this.getSizeAndScale(a,this.ctx.canvas.width,j[0]),L=this.getSizeAndScale(s,this.ctx.canvas.height,j[1]),Z=c.cachedCanvases.getCanvas("pattern",U.size,L.size,!0),ce=Z.context,be=B.createCanvasGraphics(ce);be.groupLevel=c.groupLevel,this.setFillAndStrokeStyleToContext(be,g,C);let Re=I,X=J,_=Y,T=q;return I<0&&(Re=0,_+=Math.abs(I)),J<0&&(X=0,T+=Math.abs(J)),ce.translate(-(U.scale*Re),-(L.scale*X)),be.transform(U.scale,0,0,L.scale,0,0),ce.save(),this.clipBbox(be,Re,X,_,T),be.baseTransform=(0,o.getCurrentTransform)(be.ctx),be.executeOperatorList(h),be.endDrawing(),{canvas:Z.canvas,scaleX:U.scale,scaleY:L.scale,offsetX:Re,offsetY:X}}getSizeAndScale(c,h,d){c=Math.abs(c);const a=Math.max(F.MAX_PATTERN_SIZE,h);let s=Math.ceil(c*d);return s>=a?s=a:d=s/c,{scale:d,size:s}}clipBbox(c,h,d,a,s){const g=a-h,p=s-d;c.ctx.rect(h,d,g,p),c.current.updateRectMinMax((0,o.getCurrentTransform)(c.ctx),[h,d,a,s]),c.clip(),c.endPath()}setFillAndStrokeStyleToContext(c,h,d){const a=c.ctx,s=c.current;switch(h){case A.COLORED:const g=this.ctx;a.fillStyle=g.fillStyle,a.strokeStyle=g.strokeStyle,s.fillColor=g.fillStyle,s.strokeColor=g.strokeStyle;break;case A.UNCOLORED:const p=n.Util.makeHexColor(d[0],d[1],d[2]);a.fillStyle=p,a.strokeStyle=p,s.fillColor=p,s.strokeColor=p;break;default:throw new n.FormatError(`Unsupported paint type: ${h}`)}}getPattern(c,h,d,a){let s=d;a!==S.SHADING&&(s=n.Util.transform(s,h.baseTransform),this.matrix&&(s=n.Util.transform(s,this.matrix)));const g=this.createPatternCanvas(h);let p=new DOMMatrix(s);p=p.translate(g.offsetX,g.offsetY),p=p.scale(1/g.scaleX,1/g.scaleY);const C=c.createPattern(g.canvas,"repeat");try{C.setTransform(p)}catch(B){(0,n.warn)(`TilingPattern.getPattern: "${B==null?void 0:B.message}".`)}return C}}i.TilingPattern=F},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.applyMaskImageData=o;var n=t(1);function o(m){let{src:S,srcPos:x=0,dest:R,destPos:y=0,width:v,height:D,inverseDecode:u=!1}=m;const P=n.FeatureTest.isLittleEndian?4278190080:255,[M,A]=u?[0,P]:[P,0],F=v>>3,N=v&7,c=S.length;R=new Uint32Array(R.buffer);for(let h=0;h<D;h++){for(const a=x+F;x<a;x++){const s=x<c?S[x]:255;R[y++]=s&128?A:M,R[y++]=s&64?A:M,R[y++]=s&32?A:M,R[y++]=s&16?A:M,R[y++]=s&8?A:M,R[y++]=s&4?A:M,R[y++]=s&2?A:M,R[y++]=s&1?A:M}if(N===0)continue;const d=x<c?S[x++]:255;for(let a=0;a<N;a++)R[y++]=d&1<<7-a?A:M}return{srcPos:x,destPos:y}}},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const t=Object.create(null);i.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var n=t(1);const o={UNKNOWN:0,DATA:1,ERROR:2},m={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S(R){switch(R instanceof Error||typeof R=="object"&&R!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),R.name){case"AbortException":return new n.AbortException(R.message);case"MissingPDFException":return new n.MissingPDFException(R.message);case"PasswordException":return new n.PasswordException(R.message,R.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(R.message,R.status);case"UnknownErrorException":return new n.UnknownErrorException(R.message,R.details);default:return new n.UnknownErrorException(R.message,R.toString())}}class x{constructor(y,v,D){this.sourceName=y,this.targetName=v,this.comObj=D,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=u=>{const P=u.data;if(P.targetName!==this.sourceName)return;if(P.stream){this._processStreamMessage(P);return}if(P.callback){const A=P.callbackId,F=this.callbackCapabilities[A];if(!F)throw new Error(`Cannot resolve callback ${A}`);if(delete this.callbackCapabilities[A],P.callback===o.DATA)F.resolve(P.data);else if(P.callback===o.ERROR)F.reject(S(P.reason));else throw new Error("Unexpected callback case");return}const M=this.actionHandler[P.action];if(!M)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const A=this.sourceName,F=P.sourceName;new Promise(function(N){N(M(P.data))}).then(function(N){D.postMessage({sourceName:A,targetName:F,callback:o.DATA,callbackId:P.callbackId,data:N})},function(N){D.postMessage({sourceName:A,targetName:F,callback:o.ERROR,callbackId:P.callbackId,reason:S(N)})});return}if(P.streamId){this._createStreamSink(P);return}M(P.data)},D.addEventListener("message",this._onComObjOnMessage)}on(y,v){const D=this.actionHandler;if(D[y])throw new Error(`There is already an actionName called "${y}"`);D[y]=v}send(y,v,D){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:v},D)}sendWithPromise(y,v,D){const u=this.callbackId++,P=(0,n.createPromiseCapability)();this.callbackCapabilities[u]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:u,data:v},D)}catch(M){P.reject(M)}return P.promise}sendWithStream(y,v,D,u){const P=this.streamId++,M=this.sourceName,A=this.targetName,F=this.comObj;return new ReadableStream({start:N=>{const c=(0,n.createPromiseCapability)();return this.streamControllers[P]={controller:N,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},F.postMessage({sourceName:M,targetName:A,action:y,streamId:P,data:v,desiredSize:N.desiredSize},u),c.promise},pull:N=>{const c=(0,n.createPromiseCapability)();return this.streamControllers[P].pullCall=c,F.postMessage({sourceName:M,targetName:A,stream:m.PULL,streamId:P,desiredSize:N.desiredSize}),c.promise},cancel:N=>{(0,n.assert)(N instanceof Error,"cancel must have a valid reason");const c=(0,n.createPromiseCapability)();return this.streamControllers[P].cancelCall=c,this.streamControllers[P].isClosed=!0,F.postMessage({sourceName:M,targetName:A,stream:m.CANCEL,streamId:P,reason:S(N)}),c.promise}},D)}_createStreamSink(y){const v=y.streamId,D=this.sourceName,u=y.sourceName,P=this.comObj,M=this,A=this.actionHandler[y.action],F={enqueue(N){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),P.postMessage({sourceName:D,targetName:u,stream:m.ENQUEUE,streamId:v,chunk:N},h)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:D,targetName:u,stream:m.CLOSE,streamId:v}),delete M.streamSinks[v])},error(N){(0,n.assert)(N instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:D,targetName:u,stream:m.ERROR,streamId:v,reason:S(N)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};F.sinkCapability.resolve(),F.ready=F.sinkCapability.promise,this.streamSinks[v]=F,new Promise(function(N){N(A(y.data,F))}).then(function(){P.postMessage({sourceName:D,targetName:u,stream:m.START_COMPLETE,streamId:v,success:!0})},function(N){P.postMessage({sourceName:D,targetName:u,stream:m.START_COMPLETE,streamId:v,reason:S(N)})})}_processStreamMessage(y){const v=y.streamId,D=this.sourceName,u=y.sourceName,P=this.comObj,M=this.streamControllers[v],A=this.streamSinks[v];switch(y.stream){case m.START_COMPLETE:y.success?M.startCall.resolve():M.startCall.reject(S(y.reason));break;case m.PULL_COMPLETE:y.success?M.pullCall.resolve():M.pullCall.reject(S(y.reason));break;case m.PULL:if(!A){P.postMessage({sourceName:D,targetName:u,stream:m.PULL_COMPLETE,streamId:v,success:!0});break}A.desiredSize<=0&&y.desiredSize>0&&A.sinkCapability.resolve(),A.desiredSize=y.desiredSize,new Promise(function(F){F(A.onPull&&A.onPull())}).then(function(){P.postMessage({sourceName:D,targetName:u,stream:m.PULL_COMPLETE,streamId:v,success:!0})},function(F){P.postMessage({sourceName:D,targetName:u,stream:m.PULL_COMPLETE,streamId:v,reason:S(F)})});break;case m.ENQUEUE:if((0,n.assert)(M,"enqueue should have stream controller"),M.isClosed)break;M.controller.enqueue(y.chunk);break;case m.CLOSE:if((0,n.assert)(M,"close should have stream controller"),M.isClosed)break;M.isClosed=!0,M.controller.close(),this._deleteStreamController(M,v);break;case m.ERROR:(0,n.assert)(M,"error should have stream controller"),M.controller.error(S(y.reason)),this._deleteStreamController(M,v);break;case m.CANCEL_COMPLETE:y.success?M.cancelCall.resolve():M.cancelCall.reject(S(y.reason)),this._deleteStreamController(M,v);break;case m.CANCEL:if(!A)break;new Promise(function(F){F(A.onCancel&&A.onCancel(S(y.reason)))}).then(function(){P.postMessage({sourceName:D,targetName:u,stream:m.CANCEL_COMPLETE,streamId:v,success:!0})},function(F){P.postMessage({sourceName:D,targetName:u,stream:m.CANCEL_COMPLETE,streamId:v,reason:S(F)})}),A.sinkCapability.reject(S(y.reason)),A.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(y,v){await Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete this.streamControllers[v]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}i.MessageHandler=x},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var n=t(1);function o(M,A,F){m(M,A),A.set(M,F)}function m(M,A){if(A.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(M,A){var F=y(M,A,"get");return x(M,F)}function x(M,A){return A.get?A.get.call(M):A.value}function R(M,A,F){var N=y(M,A,"set");return v(M,N,F),F}function y(M,A,F){if(!A.has(M))throw new TypeError("attempted to "+F+" private field on non-instance");return A.get(M)}function v(M,A,F){if(A.set)A.set.call(M,F);else{if(!A.writable)throw new TypeError("attempted to set read only private field");A.value=F}}var D=new WeakMap,u=new WeakMap;class P{constructor(A){let{parsedData:F,rawData:N}=A;o(this,D,{writable:!0,value:void 0}),o(this,u,{writable:!0,value:void 0}),R(this,D,F),R(this,u,N)}getRaw(){return S(this,u)}get(A){var F;return(F=S(this,D).get(A))!==null&&F!==void 0?F:null}getAll(){return(0,n.objectFromMap)(S(this,D))}has(A){return S(this,D).has(A)}}i.Metadata=P},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var n=t(1);function o(g,p){x(g,p),p.add(g)}function m(g,p,C){if(!p.has(g))throw new TypeError("attempted to get private field on non-instance");return C}function S(g,p,C){x(g,p),p.set(g,C)}function x(g,p){if(p.has(g))throw new TypeError("Cannot initialize the same private elements twice on an object")}function R(g,p,C){var B=D(g,p,"set");return y(g,B,C),C}function y(g,p,C){if(p.set)p.set.call(g,C);else{if(!p.writable)throw new TypeError("attempted to set read only private field");p.value=C}}function v(g,p){var C=D(g,p,"get");return u(g,C)}function D(g,p,C){if(!p.has(g))throw new TypeError("attempted to "+C+" private field on non-instance");return p.get(g)}function u(g,p){return p.get?p.get.call(g):p.value}const P=Symbol("INTERNAL");var M=new WeakMap;class A{constructor(p,C){S(this,M,{writable:!0,value:!0}),this.name=p,this.intent=C}get visible(){return v(this,M)}_setVisible(p,C){p!==P&&(0,n.unreachable)("Internal method `_setVisible` called."),R(this,M,C)}}var F=new WeakMap,N=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakSet;class a{constructor(p){if(o(this,d),S(this,F,{writable:!0,value:!0}),S(this,N,{writable:!0,value:new Map}),S(this,c,{writable:!0,value:null}),S(this,h,{writable:!0,value:null}),this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,R(this,h,p.order);for(const C of p.groups)v(this,N).set(C.id,new A(C.name,C.intent));if(p.baseState==="OFF")for(const C of v(this,N).values())C._setVisible(P,!1);for(const C of p.on)v(this,N).get(C)._setVisible(P,!0);for(const C of p.off)v(this,N).get(C)._setVisible(P,!1);R(this,c,new Map);for(const[C,B]of v(this,N))v(this,c).set(C,B.visible)}}isVisible(p){if(v(this,N).size===0)return!0;if(!p)return(0,n.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return v(this,N).has(p.id)?v(this,N).get(p.id).visible:((0,n.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return m(this,d,s).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const C of p.ids){if(!v(this,N).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(v(this,N).get(C).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const C of p.ids){if(!v(this,N).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!v(this,N).get(C).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const C of p.ids){if(!v(this,N).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!v(this,N).get(C).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const C of p.ids){if(!v(this,N).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(v(this,N).get(C).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,n.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!v(this,N).has(p)){(0,n.warn)(`Optional content group not found: ${p}`);return}v(this,N).get(p)._setVisible(P,!!C),R(this,F,null)}get hasInitialVisibility(){if(v(this,F)!==null)return v(this,F);for(const[p,C]of v(this,N)){const B=v(this,c).get(p);if(C.visible!==B)return R(this,F,!1)}return R(this,F,!0)}getOrder(){return v(this,N).size?v(this,h)?v(this,h).slice():[...v(this,N).keys()]:null}getGroups(){return v(this,N).size>0?(0,n.objectFromMap)(v(this,N)):null}getGroup(p){return v(this,N).get(p)||null}}i.OptionalContentConfig=a;function s(g){const p=g.length;if(p<2)return!0;const C=g[0];for(let B=1;B<p;B++){const I=g[B];let J;if(Array.isArray(I))J=m(this,d,s).call(this,I);else if(v(this,N).has(I))J=v(this,N).get(I).visible;else return(0,n.warn)(`Optional content group not found: ${I}`),!0;switch(C){case"And":if(!J)return!1;break;case"Or":if(J)return!0;break;case"Not":return!J;default:return!0}}return C==="And"}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var n=t(1),o=t(133);class m{constructor(y,v){(0,n.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=y.progressiveDone||!1,this._contentDispositionFilename=y.contentDispositionFilename||null;const D=y.initialData;if((D==null?void 0:D.length)>0){const u=new Uint8Array(D).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._contentLength=y.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,P)=>{this._onReceiveData({begin:u,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((u,P)=>{this._onProgress({loaded:u,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){const v=new Uint8Array(y.chunk).buffer;if(y.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(v):this._queuedChunks.push(v);else{const D=this._rangeReaders.some(function(u){return u._begin!==y.begin?!1:(u._enqueue(v),!0)});(0,n.assert)(D,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y,v;return(y=(v=this._fullRequestReader)===null||v===void 0?void 0:v._loaded)!==null&&y!==void 0?y:0}_onProgress(y){if(y.total===void 0){const v=this._rangeReaders[0];v!=null&&v.onProgress&&v.onProgress({loaded:y.loaded})}else{const v=this._fullRequestReader;v!=null&&v.onProgress&&v.onProgress({loaded:y.loaded,total:y.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const v=this._rangeReaders.indexOf(y);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new S(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,v){if(v<=this._progressiveDataLength)return null;const D=new x(this,y,v);return this._pdfDataRangeTransport.requestDataRange(y,v),this._rangeReaders.push(D),D}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const v of this._rangeReaders.slice(0))v.cancel(y);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=m;class S{constructor(y,v){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=y,this._done=D||!1,this._filename=(0,o.isPdfFile)(u)?u:null,this._queuedChunks=v||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,n.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class x{constructor(y,v,D){this._stream=y,this._begin=v,this._end=D,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,n.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class t{static textContent(o){const m=[],S={items:m,styles:Object.create(null)};function x(R){var y;if(!R)return;let v=null;const D=R.name;if(D==="#text")v=R.value;else if(t.shouldBuildText(D))R!=null&&(y=R.attributes)!==null&&y!==void 0&&y.textContent?v=R.attributes.textContent:R.value&&(v=R.value);else return;if(v!==null&&m.push({str:v}),!!R.children)for(const u of R.children)x(u)}return x(o),S}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}i.XfaText=t},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var n=t(134);const o=function(R){return new Promise((y,v)=>{require$$7.readFile(R,(u,P)=>{if(u||!P){v(new Error(u));return}y(new Uint8Array(P))})})};class m extends n.BaseCanvasFactory{_createCanvas(y,v){return require$$7.createCanvas(y,v)}}i.NodeCanvasFactory=m;class S extends n.BaseCMapReaderFactory{_fetchData(y,v){return o(y).then(D=>({cMapData:D,compressionType:v}))}}i.NodeCMapReaderFactory=S;class x extends n.BaseStandardFontDataFactory{_fetchData(y){return o(y)}}i.NodeStandardFontDataFactory=x},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var n=t(132),o=t(1),m=t(148),S=t(149);function x(U,L){v(U,L),L.add(U)}function R(U,L,Z){return L in U?Object.defineProperty(U,L,{value:Z,enumerable:!0,configurable:!0,writable:!0}):U[L]=Z,U}function y(U,L,Z){v(U,L),L.set(U,Z)}function v(U,L){if(L.has(U))throw new TypeError("Cannot initialize the same private elements twice on an object")}function D(U,L,Z){if(!L.has(U))throw new TypeError("attempted to get private field on non-instance");return Z}function u(U,L){var Z=A(U,L,"get");return P(U,Z)}function P(U,L){return L.get?L.get.call(U):L.value}function M(U,L,Z){var ce=A(U,L,"set");return F(U,ce,Z),Z}function A(U,L,Z){if(!L.has(U))throw new TypeError("attempted to "+Z+" private field on non-instance");return L.get(U)}function F(U,L,Z){if(L.set)L.set.call(U,Z);else{if(!L.writable)throw new TypeError("attempted to set read only private field");L.value=Z}}var N=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,a=new WeakMap,s=new WeakMap,g=new WeakMap,p=new WeakMap,C=new WeakSet,B=new WeakSet,I=new WeakSet,J=new WeakSet;class Y{constructor(L){x(this,J),x(this,I),x(this,B),x(this,C),y(this,N,{writable:!0,value:void 0}),y(this,c,{writable:!0,value:!1}),y(this,h,{writable:!0,value:this.pointerup.bind(this)}),y(this,d,{writable:!0,value:this.pointerdown.bind(this)}),y(this,a,{writable:!0,value:new Map}),y(this,s,{writable:!0,value:!1}),y(this,g,{writable:!0,value:!1}),y(this,p,{writable:!0,value:void 0}),Y._initialized||(Y._initialized=!0,m.FreeTextEditor.initialize(L.l10n),S.InkEditor.initialize(L.l10n),L.uiManager.registerEditorTypes([m.FreeTextEditor,S.InkEditor])),M(this,p,L.uiManager),this.annotationStorage=L.annotationStorage,this.pageIndex=L.pageIndex,this.div=L.div,M(this,N,L.accessibilityManager),u(this,p).addLayer(this)}updateToolbar(L){u(this,p).updateToolbar(L)}updateMode(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u(this,p).getMode();D(this,J,j).call(this),L===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),u(this,p).unselectAll()}addInkEditorIfNeeded(L){if(!L&&u(this,p).getMode()!==o.AnnotationEditorType.INK)return;if(!L){for(const ce of u(this,a).values())if(ce.isEmpty()){ce.setInBackground();return}}D(this,I,V).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(L){u(this,p).setEditingState(L)}addCommands(L){u(this,p).addCommands(L)}enable(){this.div.style.pointerEvents="auto";for(const L of u(this,a).values())L.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const L of u(this,a).values())L.disableEditing()}setActiveEditor(L){u(this,p).getActive()!==L&&u(this,p).setActiveEditor(L)}enableClick(){this.div.addEventListener("pointerdown",u(this,d)),this.div.addEventListener("pointerup",u(this,h))}disableClick(){this.div.removeEventListener("pointerdown",u(this,d)),this.div.removeEventListener("pointerup",u(this,h))}attach(L){u(this,a).set(L.id,L)}detach(L){var Z;u(this,a).delete(L.id),(Z=u(this,N))===null||Z===void 0||Z.removePointerInTextLayer(L.contentDiv)}remove(L){u(this,p).removeEditor(L),this.detach(L),this.annotationStorage.remove(L.id),L.div.style.display="none",setTimeout(()=>{L.div.style.display="",L.div.remove(),L.isAttachedToDOM=!1,document.activeElement===document.body&&u(this,p).focusMainContainer()},0),u(this,g)||this.addInkEditorIfNeeded(!1)}add(L){if(D(this,C,q).call(this,L),u(this,p).addEditor(L),this.attach(L),!L.isAttachedToDOM){const Z=L.render();this.div.append(Z),L.isAttachedToDOM=!0}this.moveEditorInDOM(L),L.onceAdded(),this.addToAnnotationStorage(L)}moveEditorInDOM(L){var Z;(Z=u(this,N))===null||Z===void 0||Z.moveElementInDOM(this.div,L.div,L.contentDiv,!0)}addToAnnotationStorage(L){!L.isEmpty()&&!this.annotationStorage.has(L.id)&&this.annotationStorage.setValue(L.id,L)}addOrRebuild(L){L.needsToBeRebuilt()?L.rebuild():this.add(L)}addANewEditor(L){const Z=()=>{this.addOrRebuild(L)},ce=()=>{L.remove()};this.addCommands({cmd:Z,undo:ce,mustExec:!0})}addUndoableEditor(L){const Z=()=>{this.addOrRebuild(L)},ce=()=>{L.remove()};this.addCommands({cmd:Z,undo:ce,mustExec:!1})}getNextId(){return u(this,p).getId()}deserialize(L){switch(L.annotationType){case o.AnnotationEditorType.FREETEXT:return m.FreeTextEditor.deserialize(L,this);case o.AnnotationEditorType.INK:return S.InkEditor.deserialize(L,this)}return null}setSelected(L){u(this,p).setSelected(L)}toggleSelected(L){u(this,p).toggleSelected(L)}isSelected(L){return u(this,p).isSelected(L)}unselect(L){u(this,p).unselect(L)}pointerup(L){const Z=n.KeyboardManager.platform.isMac;if(!(L.button!==0||L.ctrlKey&&Z)&&L.target===this.div&&u(this,s)){if(M(this,s,!1),!u(this,c)){M(this,c,!0);return}D(this,I,V).call(this,L)}}pointerdown(L){const Z=n.KeyboardManager.platform.isMac;if(L.button!==0||L.ctrlKey&&Z||L.target!==this.div)return;M(this,s,!0);const ce=u(this,p).getActive();M(this,c,!ce||ce.isEmpty())}drop(L){const Z=L.dataTransfer.getData("text/plain"),ce=u(this,p).getEditor(Z);if(!ce)return;L.preventDefault(),L.dataTransfer.dropEffect="move",D(this,C,q).call(this,ce);const be=this.div.getBoundingClientRect(),Re=L.clientX-be.x,X=L.clientY-be.y;ce.translate(Re-ce.startX,X-ce.startY),this.moveEditorInDOM(ce),ce.div.focus()}dragover(L){L.preventDefault()}destroy(){var L;((L=u(this,p).getActive())===null||L===void 0?void 0:L.parent)===this&&u(this,p).setActiveEditor(null);for(const ce of u(this,a).values()){var Z;(Z=u(this,N))===null||Z===void 0||Z.removePointerInTextLayer(ce.contentDiv),ce.isAttachedToDOM=!1,ce.div.remove(),ce.parent=null}this.div=null,u(this,a).clear(),u(this,p).removeLayer(this)}render(L){this.viewport=L.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const Z of u(this,p).getEditors(this.pageIndex))this.add(Z);this.updateMode()}update(L){this.viewport=L.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[L,Z,ce,be]=this.viewport.viewBox,Re=ce-L,X=be-Z;return[Re,X]}get viewportBaseDimensions(){const{width:L,height:Z,rotation:ce}=this.viewport;return ce%180===0?[L,Z]:[Z,L]}setDimensions(){const{width:L,height:Z,rotation:ce}=this.viewport,be=ce%180!==0,Re=Math.floor(L)+"px",X=Math.floor(Z)+"px";this.div.style.width=be?X:Re,this.div.style.height=be?Re:X,this.div.setAttribute("data-main-rotation",ce)}}i.AnnotationEditorLayer=Y;function q(U){var L;U.parent!==this&&(this.attach(U),U.pageIndex=this.pageIndex,(L=U.parent)===null||L===void 0||L.detach(U),U.parent=this,U.div&&U.isAttachedToDOM&&(U.div.remove(),this.div.append(U.div)))}function Q(U){switch(u(this,p).getMode()){case o.AnnotationEditorType.FREETEXT:return new m.FreeTextEditor(U);case o.AnnotationEditorType.INK:return new S.InkEditor(U)}return null}function V(U){const L=this.getNextId(),Z=D(this,B,Q).call(this,{parent:this,id:L,x:U.offsetX,y:U.offsetY});return Z&&this.add(Z),Z}function j(){M(this,g,!0);for(const U of u(this,a).values())U.isEmpty()&&U.remove();M(this,g,!1)}R(Y,"_initialized",!1)},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var n=t(1),o=t(132),m=t(131);function S(V,j){y(V,j),j.add(V)}function x(V,j,U){return j in V?Object.defineProperty(V,j,{value:U,enumerable:!0,configurable:!0,writable:!0}):V[j]=U,V}function R(V,j,U){y(V,j),j.set(V,U)}function y(V,j){if(j.has(V))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(V,j){var U=M(V,j,"get");return D(V,U)}function D(V,j){return j.get?j.get.call(V):j.value}function u(V,j,U){if(!j.has(V))throw new TypeError("attempted to get private field on non-instance");return U}function P(V,j,U){var L=M(V,j,"set");return A(V,L,U),U}function M(V,j,U){if(!j.has(V))throw new TypeError("attempted to "+U+" private field on non-instance");return j.get(V)}function A(V,j,U){if(j.set)j.set.call(V,U);else{if(!j.writable)throw new TypeError("attempted to set read only private field");j.value=U}}var F=new WeakMap,N=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,a=new WeakMap,s=new WeakMap,g=new WeakSet,p=new WeakSet,C=new WeakSet,B=new WeakSet;class I extends m.AnnotationEditor{constructor(j){super({...j,name:"freeTextEditor"}),S(this,B),S(this,C),S(this,p),S(this,g),R(this,F,{writable:!0,value:this.editorDivBlur.bind(this)}),R(this,N,{writable:!0,value:this.editorDivFocus.bind(this)}),R(this,c,{writable:!0,value:this.editorDivKeydown.bind(this)}),R(this,h,{writable:!0,value:void 0}),R(this,d,{writable:!0,value:""}),R(this,a,{writable:!0,value:!1}),R(this,s,{writable:!0,value:void 0}),P(this,h,j.color||I._defaultColor||m.AnnotationEditor._defaultLineColor),P(this,s,j.fontSize||I._defaultFontSize)}static initialize(j){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(L=>[L,j.get(L)]));const U=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(U.getPropertyValue("--freetext-padding"))}static updateDefaultParams(j,U){switch(j){case n.AnnotationEditorParamsType.FREETEXT_SIZE:I._defaultFontSize=U;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:I._defaultColor=U;break}}updateParams(j,U){switch(j){case n.AnnotationEditorParamsType.FREETEXT_SIZE:u(this,g,J).call(this,U);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:u(this,p,Y).call(this,U);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,I._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,I._defaultColor||m.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,v(this,s)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,v(this,h)]]}getInitialTranslation(){return[-I._internalPadding*this.parent.scaleFactor,-(I._internalPadding+v(this,s))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",v(this,c)),this.editorDiv.addEventListener("focus",v(this,N)),this.editorDiv.addEventListener("blur",v(this,F)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",v(this,c)),this.editorDiv.removeEventListener("focus",v(this,N)),this.editorDiv.removeEventListener("blur",v(this,F)),this.div.focus(),this.isEditing=!1)}focusin(j){super.focusin(j),j.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),v(this,a)||(P(this,a,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),P(this,d,u(this,C,q).call(this).trimEnd()),u(this,B,Q).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(j){this.enableEditMode(),this.editorDiv.focus()}keydown(j){j.target===this.div&&j.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(j){I._keyboardManager.exec(this,j)}editorDivFocus(j){this.isEditing=!0}editorDivBlur(j){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let j,U;this.width&&(j=this.x,U=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),I._l10nPromise.get("editor_free_text_aria_label").then(Z=>{var ce;return(ce=this.editorDiv)===null||ce===void 0?void 0:ce.setAttribute("aria-label",Z)}),I._l10nPromise.get("free_text_default_content").then(Z=>{var ce;return(ce=this.editorDiv)===null||ce===void 0?void 0:ce.setAttribute("default-content",Z)}),this.editorDiv.contentEditable=!0;const{style:L}=this.editorDiv;if(L.fontSize=`calc(${v(this,s)}px * var(--scale-factor))`,L.color=v(this,h),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Z,ce]=this.parent.viewportBaseDimensions;this.setAt(j*Z,U*ce,this.width*Z,this.height*ce);for(const be of v(this,d).split(`
`)){const Re=document.createElement("div");Re.append(be?document.createTextNode(be):document.createElement("br")),this.editorDiv.append(Re)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(j,U){const L=super.deserialize(j,U);return P(L,s,j.fontSize),P(L,h,n.Util.makeHexColor(...j.color)),P(L,d,j.value),L}serialize(){if(this.isEmpty())return null;const j=I._internalPadding*this.parent.scaleFactor,U=this.getRect(j,j),L=m.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:L,fontSize:v(this,s),value:v(this,d),pageIndex:this.parent.pageIndex,rect:U,rotation:this.rotation}}}i.FreeTextEditor=I;function J(V){const j=L=>{this.editorDiv.style.fontSize=`calc(${L}px * var(--scale-factor))`,this.translate(0,-(L-v(this,s))*this.parent.scaleFactor),P(this,s,L),u(this,B,Q).call(this)},U=v(this,s);this.parent.addCommands({cmd:()=>{j(V)},undo:()=>{j(U)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Y(V){const j=v(this,h);this.parent.addCommands({cmd:()=>{P(this,h,V),this.editorDiv.style.color=V},undo:()=>{P(this,h,j),this.editorDiv.style.color=j},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function q(){const V=this.editorDiv.getElementsByTagName("div");if(V.length===0)return this.editorDiv.innerText;const j=[];for(let U=0,L=V.length;U<L;U++){const ce=V[U].firstChild;(ce==null?void 0:ce.nodeName)==="#text"?j.push(ce.data):j.push("")}return j.join(`
`)}function Q(){const[V,j]=this.parent.viewportBaseDimensions,U=this.div.getBoundingClientRect();this.width=U.width/V,this.height=U.height/j}x(I,"_freeTextDefaultContent",""),x(I,"_l10nPromise",void 0),x(I,"_internalPadding",0),x(I,"_defaultColor",null),x(I,"_defaultFontSize",10),x(I,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],I.prototype.commitOrRemove]])),x(I,"_type","freetext")},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,Object.defineProperty(i,"fitCurve",{enumerable:!0,get:function(){return m.fitCurve}});var n=t(1),o=t(131),m=t(150),S=t(132);function x(fe,oe){v(fe,oe),oe.add(fe)}function R(fe,oe,Ae){return oe in fe?Object.defineProperty(fe,oe,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):fe[oe]=Ae,fe}function y(fe,oe,Ae){v(fe,oe),oe.set(fe,Ae)}function v(fe,oe){if(oe.has(fe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function D(fe,oe,Ae){return u(fe,oe),Ae}function u(fe,oe){if(fe!==oe)throw new TypeError("Private static access of wrong provenance")}function P(fe,oe,Ae){var ke=F(fe,oe,"set");return M(fe,ke,Ae),Ae}function M(fe,oe,Ae){if(oe.set)oe.set.call(fe,Ae);else{if(!oe.writable)throw new TypeError("attempted to set read only private field");oe.value=Ae}}function A(fe,oe){var Ae=F(fe,oe,"get");return N(fe,Ae)}function F(fe,oe,Ae){if(!oe.has(fe))throw new TypeError("attempted to "+Ae+" private field on non-instance");return oe.get(fe)}function N(fe,oe){return oe.get?oe.get.call(fe):oe.value}function c(fe,oe,Ae){if(!oe.has(fe))throw new TypeError("attempted to get private field on non-instance");return Ae}const h=16;var d=new WeakMap,a=new WeakMap,s=new WeakMap,g=new WeakMap,p=new WeakMap,C=new WeakMap,B=new WeakMap,I=new WeakMap,J=new WeakMap,Y=new WeakMap,q=new WeakMap,Q=new WeakMap,V=new WeakMap,j=new WeakMap,U=new WeakSet,L=new WeakSet,Z=new WeakSet,ce=new WeakSet,be=new WeakSet,Re=new WeakSet,X=new WeakSet,_=new WeakSet,T=new WeakSet,z=new WeakSet,$=new WeakSet,l=new WeakSet,b=new WeakSet,w=new WeakSet,O=new WeakSet,W=new WeakSet,H=new WeakSet,ee=new WeakSet,ne=new WeakSet,se=new WeakSet,ue=new WeakSet,le=new WeakSet;class de extends o.AnnotationEditor{constructor(oe){super({...oe,name:"inkEditor"}),x(this,le),x(this,ue),x(this,se),x(this,ne),x(this,ee),x(this,H),x(this,W),x(this,O),x(this,w),x(this,b),x(this,l),x(this,$),x(this,z),x(this,T),x(this,_),x(this,X),x(this,Re),x(this,be),x(this,ce),x(this,Z),x(this,L),x(this,U),y(this,d,{writable:!0,value:0}),y(this,a,{writable:!0,value:0}),y(this,s,{writable:!0,value:0}),y(this,g,{writable:!0,value:this.canvasPointermove.bind(this)}),y(this,p,{writable:!0,value:this.canvasPointerleave.bind(this)}),y(this,C,{writable:!0,value:this.canvasPointerup.bind(this)}),y(this,B,{writable:!0,value:this.canvasPointerdown.bind(this)}),y(this,I,{writable:!0,value:!1}),y(this,J,{writable:!0,value:!1}),y(this,Y,{writable:!0,value:null}),y(this,q,{writable:!0,value:null}),y(this,Q,{writable:!0,value:0}),y(this,V,{writable:!0,value:0}),y(this,j,{writable:!0,value:null}),this.color=oe.color||null,this.thickness=oe.thickness||null,this.opacity=oe.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(oe){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(Ae=>[Ae,oe.get(Ae)]))}static updateDefaultParams(oe,Ae){switch(oe){case n.AnnotationEditorParamsType.INK_THICKNESS:de._defaultThickness=Ae;break;case n.AnnotationEditorParamsType.INK_COLOR:de._defaultColor=Ae;break;case n.AnnotationEditorParamsType.INK_OPACITY:de._defaultOpacity=Ae/100;break}}updateParams(oe,Ae){switch(oe){case n.AnnotationEditorParamsType.INK_THICKNESS:c(this,U,ge).call(this,Ae);break;case n.AnnotationEditorParamsType.INK_COLOR:c(this,L,Se).call(this,Ae);break;case n.AnnotationEditorParamsType.INK_OPACITY:c(this,Z,we).call(this,Ae);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,de._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,de._defaultColor||o.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(de._defaultOpacity*100)]]}get propertiesToUpdate(){var oe;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||de._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||de._defaultColor||o.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((oe=this.opacity)!==null&&oe!==void 0?oe:de._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(c(this,$,ie).call(this),c(this,l,ye).call(this)),this.isAttachedToDOM||(this.parent.add(this),c(this,b,Le).call(this)),c(this,ue,Me).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,A(this,q).disconnect(),P(this,q,null),super.remove())}enableEditMode(){A(this,I)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",A(this,B)),this.canvas.addEventListener("pointerup",A(this,C)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",A(this,B)),this.canvas.removeEventListener("pointerup",A(this,C)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){A(this,I)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),P(this,I,!0),this.div.classList.add("disabled"),c(this,ue,Me).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(oe){super.focusin(oe),this.enableEditMode()}canvasPointerdown(oe){oe.button!==0||!this.isInEditMode()||A(this,I)||(this.setInForeground(),oe.type!=="mouse"&&this.div.focus(),oe.stopPropagation(),this.canvas.addEventListener("pointerleave",A(this,p)),this.canvas.addEventListener("pointermove",A(this,g)),c(this,Re,_e).call(this,oe.offsetX,oe.offsetY))}canvasPointermove(oe){oe.stopPropagation(),c(this,X,Xe).call(this,oe.offsetX,oe.offsetY)}canvasPointerup(oe){oe.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(oe.stopPropagation(),c(this,z,Ee).call(this,oe),this.setInBackground())}canvasPointerleave(oe){c(this,z,Ee).call(this,oe),this.setInBackground()}render(){if(this.div)return this.div;let oe,Ae;this.width&&(oe=this.x,Ae=this.y),super.render(),de._l10nPromise.get("editor_ink_aria_label").then($e=>{var De;return(De=this.div)===null||De===void 0?void 0:De.setAttribute("aria-label",$e)});const[ke,We,ze,je]=c(this,ce,Pe).call(this);if(this.setAt(ke,We,0,0),this.setDims(ze,je),c(this,$,ie).call(this),this.width){const[$e,De]=this.parent.viewportBaseDimensions;this.setAt(oe*$e,Ae*De,this.width*$e,this.height*De),P(this,J,!0),c(this,b,Le).call(this),this.setDims(this.width*$e,this.height*De),c(this,T,Oe).call(this),c(this,le,Be).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return c(this,l,ye).call(this),this.div}setDimensions(oe,Ae){const ke=Math.round(oe),We=Math.round(Ae);if(A(this,Q)===ke&&A(this,V)===We)return;P(this,Q,ke),P(this,V,We),this.canvas.style.visibility="hidden",A(this,d)&&Math.abs(A(this,d)-oe/Ae)>.01&&(Ae=Math.ceil(oe/A(this,d)),this.setDims(oe,Ae));const[ze,je]=this.parent.viewportBaseDimensions;this.width=oe/ze,this.height=Ae/je,A(this,I)&&c(this,w,Ke).call(this,oe,Ae),c(this,b,Le).call(this),c(this,T,Oe).call(this),this.canvas.style.visibility="visible"}static deserialize(oe,Ae){const ke=super.deserialize(oe,Ae);ke.thickness=oe.thickness,ke.color=n.Util.makeHexColor(...oe.color),ke.opacity=oe.opacity;const[We,ze]=Ae.pageDimensions,je=ke.width*We,$e=ke.height*ze,De=Ae.scaleFactor,Ye=oe.thickness/2;P(ke,d,je/$e),P(ke,I,!0),P(ke,Q,Math.round(je)),P(ke,V,Math.round($e));for(const{bezier:qe}of oe.paths){const Ze=[];ke.paths.push(Ze);let it=De*(qe[0]-Ye),et=De*($e-qe[1]-Ye);for(let tt=2,gt=qe.length;tt<gt;tt+=6){const Ct=De*(qe[tt]-Ye),ut=De*($e-qe[tt+1]-Ye),It=De*(qe[tt+2]-Ye),zt=De*($e-qe[tt+3]-Ye),Dt=De*(qe[tt+4]-Ye),dt=De*($e-qe[tt+5]-Ye);Ze.push([[it,et],[Ct,ut],[It,zt],[Dt,dt]]),it=Dt,et=dt}const ot=D(this,de,xe).call(this,Ze);ke.bezierPath2D.push(ot)}const at=c(ke,ne,ae).call(ke);return P(ke,s,Math.max(h,at[2]-at[0])),P(ke,a,Math.max(h,at[3]-at[1])),c(ke,w,Ke).call(ke,je,$e),ke}serialize(){if(this.isEmpty())return null;const oe=this.getRect(0,0),Ae=this.rotation%180===0?oe[3]-oe[1]:oe[2]-oe[0],ke=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:ke,thickness:this.thickness,opacity:this.opacity,paths:c(this,W,Ne).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Ae),pageIndex:this.parent.pageIndex,rect:oe,rotation:this.rotation}}}i.InkEditor=de;function ge(fe){const oe=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=fe,c(this,ue,Me).call(this)},undo:()=>{this.thickness=oe,c(this,ue,Me).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Se(fe){const oe=this.color;this.parent.addCommands({cmd:()=>{this.color=fe,c(this,T,Oe).call(this)},undo:()=>{this.color=oe,c(this,T,Oe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function we(fe){fe/=100;const oe=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=fe,c(this,T,Oe).call(this)},undo:()=>{this.opacity=oe,c(this,T,Oe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Pe(){const{width:fe,height:oe,rotation:Ae}=this.parent.viewport;switch(Ae){case 90:return[0,fe,fe,oe];case 180:return[fe,oe,fe,oe];case 270:return[oe,0,fe,oe];default:return[0,0,fe,oe]}}function Ie(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,S.opacityToHex)(this.opacity)}`}function _e(fe,oe){if(this.isEditing=!0,!A(this,J)){var Ae;P(this,J,!0),c(this,b,Le).call(this),this.thickness||(this.thickness=de._defaultThickness),this.color||(this.color=de._defaultColor||o.AnnotationEditor._defaultLineColor),(Ae=this.opacity)!==null&&Ae!==void 0||(this.opacity=de._defaultOpacity)}this.currentPath.push([fe,oe]),P(this,Y,null),c(this,be,Ie).call(this),this.ctx.beginPath(),this.ctx.moveTo(fe,oe),P(this,j,()=>{A(this,j)&&(A(this,Y)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):c(this,T,Oe).call(this),this.ctx.lineTo(...A(this,Y)),P(this,Y,null),this.ctx.stroke()),window.requestAnimationFrame(A(this,j)))}),window.requestAnimationFrame(A(this,j))}function Xe(fe,oe){const[Ae,ke]=this.currentPath.at(-1);fe===Ae&&oe===ke||(this.currentPath.push([fe,oe]),P(this,Y,[fe,oe]))}function Qe(fe,oe){this.ctx.closePath(),P(this,j,null),fe=Math.min(Math.max(fe,0),this.canvas.width),oe=Math.min(Math.max(oe,0),this.canvas.height);const[Ae,ke]=this.currentPath.at(-1);(fe!==Ae||oe!==ke)&&this.currentPath.push([fe,oe]);let We;if(this.currentPath.length!==1)We=(0,m.fitCurve)(this.currentPath,30,null);else{const De=[fe,oe];We=[[De,De.slice(),De.slice(),De]]}const ze=D(de,de,xe).call(de,We);this.currentPath.length=0;const je=()=>{this.paths.push(We),this.bezierPath2D.push(ze),this.rebuild()},$e=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(c(this,$,ie).call(this),c(this,l,ye).call(this)),c(this,ue,Me).call(this))};this.parent.addCommands({cmd:je,undo:$e,mustExec:!0})}function Oe(){if(this.isEmpty()){c(this,O,ve).call(this);return}c(this,be,Ie).call(this);const{canvas:fe,ctx:oe}=this;oe.setTransform(1,0,0,1,0,0),oe.clearRect(0,0,fe.width,fe.height),c(this,O,ve).call(this);for(const Ae of this.bezierPath2D)oe.stroke(Ae)}function Ee(fe){c(this,_,Qe).call(this,fe.offsetX,fe.offsetY),this.canvas.removeEventListener("pointerleave",A(this,p)),this.canvas.removeEventListener("pointermove",A(this,g)),this.parent.addToAnnotationStorage(this)}function ie(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",de._l10nPromise.get("editor_ink_canvas_aria_label").then(fe=>{var oe;return(oe=this.canvas)===null||oe===void 0?void 0:oe.setAttribute("aria-label",fe)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function ye(){P(this,q,new ResizeObserver(fe=>{const oe=fe[0].contentRect;oe.width&&oe.height&&this.setDimensions(oe.width,oe.height)})),A(this,q).observe(this.div)}function Le(){if(!A(this,J))return;const[fe,oe]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*fe),this.canvas.height=Math.ceil(this.height*oe),c(this,O,ve).call(this)}function Ke(fe,oe){const Ae=c(this,se,me).call(this),ke=(fe-Ae)/A(this,s),We=(oe-Ae)/A(this,a);this.scaleFactor=Math.min(ke,We)}function ve(){const fe=c(this,se,me).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+fe,this.translationY*this.scaleFactor+fe)}function xe(fe){const oe=new Path2D;for(let Ae=0,ke=fe.length;Ae<ke;Ae++){const[We,ze,je,$e]=fe[Ae];Ae===0&&oe.moveTo(...We),oe.bezierCurveTo(ze[0],ze[1],je[0],je[1],$e[0],$e[1])}return oe}function Ne(fe,oe,Ae,ke){const ze=[],je=this.thickness/2;let $e,De;for(const Ye of this.paths){$e=[],De=[];for(let at=0,qe=Ye.length;at<qe;at++){const[Ze,it,et,ot]=Ye[at],tt=fe*(Ze[0]+oe)+je,gt=ke-fe*(Ze[1]+Ae)-je,Ct=fe*(it[0]+oe)+je,ut=ke-fe*(it[1]+Ae)-je,It=fe*(et[0]+oe)+je,zt=ke-fe*(et[1]+Ae)-je,Dt=fe*(ot[0]+oe)+je,dt=ke-fe*(ot[1]+Ae)-je;at===0&&($e.push(tt,gt),De.push(tt,gt)),$e.push(Ct,ut,It,zt,Dt,dt),c(this,H,he).call(this,tt,gt,Ct,ut,It,zt,Dt,dt,4,De)}ze.push({bezier:$e,points:De})}return ze}function he(fe,oe,Ae,ke,We,ze,je,$e,De,Ye){if(c(this,ee,te).call(this,fe,oe,Ae,ke,We,ze,je,$e)){Ye.push(je,$e);return}for(let at=1;at<De-1;at++){const qe=at/De,Ze=1-qe;let it=qe*fe+Ze*Ae,et=qe*oe+Ze*ke,ot=qe*Ae+Ze*We,tt=qe*ke+Ze*ze;const gt=qe*We+Ze*je,Ct=qe*ze+Ze*$e;it=qe*it+Ze*ot,et=qe*et+Ze*tt,ot=qe*ot+Ze*gt,tt=qe*tt+Ze*Ct,it=qe*it+Ze*ot,et=qe*et+Ze*tt,Ye.push(it,et)}Ye.push(je,$e)}function te(fe,oe,Ae,ke,We,ze,je,$e){const Ye=(3*Ae-2*fe-je)**2,at=(3*ke-2*oe-$e)**2,qe=(3*We-fe-2*je)**2,Ze=(3*ze-oe-2*$e)**2;return Math.max(Ye,qe)+Math.max(at,Ze)<=10}function ae(){let fe=1/0,oe=-1/0,Ae=1/0,ke=-1/0;for(const We of this.paths)for(const[ze,je,$e,De]of We){const Ye=n.Util.bezierBoundingBox(...ze,...je,...$e,...De);fe=Math.min(fe,Ye[0]),Ae=Math.min(Ae,Ye[1]),oe=Math.max(oe,Ye[2]),ke=Math.max(ke,Ye[3])}return[fe,Ae,oe,ke]}function me(){return A(this,I)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function Me(){let fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!A(this,I)){c(this,T,Oe).call(this);return}const oe=c(this,ne,ae).call(this),Ae=c(this,se,me).call(this);P(this,s,Math.max(h,oe[2]-oe[0])),P(this,a,Math.max(h,oe[3]-oe[1]));const ke=Math.ceil(Ae+A(this,s)*this.scaleFactor),We=Math.ceil(Ae+A(this,a)*this.scaleFactor),[ze,je]=this.parent.viewportBaseDimensions;this.width=ke/ze,this.height=We/je,P(this,d,ke/We),c(this,le,Be).call(this);const $e=this.translationX,De=this.translationY;this.translationX=-oe[0],this.translationY=-oe[1],c(this,b,Le).call(this),c(this,T,Oe).call(this),P(this,Q,ke),P(this,V,We),this.setDims(ke,We);const Ye=fe?Ae/this.scaleFactor/2:0;this.translate($e-this.translationX-Ye,De-this.translationY-Ye)}function Be(){const{style:fe}=this.div;A(this,d)>=1?(fe.minHeight=`${h}px`,fe.minWidth=`${Math.round(A(this,d)*h)}px`):(fe.minWidth=`${h}px`,fe.minHeight=`${Math.round(h/A(this,d))}px`)}R(de,"_defaultColor",null),R(de,"_defaultOpacity",1),R(de,"_defaultThickness",1),R(de,"_l10nPromise",void 0),R(de,"_type","ink")},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fitCurve=void 0;const n=t(151);i.fitCurve=n},k=>{function i(M,A,F){if(!Array.isArray(M))throw new TypeError("First argument should be an array");if(M.forEach(d=>{if(!Array.isArray(d)||d.some(a=>typeof a!="number")||d.length!==M[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),M=M.filter((d,a)=>a===0||!d.every((s,g)=>s===M[a-1][g])),M.length<2)return[];const N=M.length,c=D(M[1],M[0]),h=D(M[N-2],M[N-1]);return t(M,c,h,A,F)}function t(M,A,F,N,c){var d,a,s,g,p,C,B,I,J,Y,q,Q,V;if(M.length===2)return Q=u.vectorLen(u.subtract(M[0],M[1]))/3,d=[M[0],u.addArrays(M[0],u.mulItems(A,Q)),u.addArrays(M[1],u.mulItems(F,Q)),M[1]],[d];if(a=x(M),[d,g,C]=n(M,a,a,A,F,c),g===0||g<N)return[d];if(g<N*N)for(s=a,p=g,B=C,V=0;V<20;V++){if(s=m(d,M,s),[d,g,C]=n(M,a,s,A,F,c),g<N)return[d];if(C===B){let j=g/p;if(j>.9999&&j<1.0001)break}p=g,B=C}return q=[],I=u.subtract(M[C-1],M[C+1]),I.every(j=>j===0)&&(I=u.subtract(M[C-1],M[C]),[I[0],I[1]]=[-I[1],I[0]]),J=u.normalize(I),Y=u.mulItems(J,-1),q=q.concat(t(M.slice(0,C+1),A,J,N,c)),q=q.concat(t(M.slice(C),Y,F,N,c)),q}function n(M,A,F,N,c,h){var d,a,s;return d=o(M,F,N,c),[a,s]=R(M,d,A),h&&h({bez:d,points:M,params:A,maxErr:a,maxPoint:s}),[d,a,s]}function o(M,A,F,N){var c,h,d,a,s,g,p,C,B,I,J,Y,q,Q,V,j,U,L=M[0],Z=M[M.length-1];for(c=[L,null,null,Z],h=u.zeros_Xx2x2(A.length),q=0,Q=A.length;q<Q;q++)j=A[q],U=1-j,d=h[q],d[0]=u.mulItems(F,3*j*(U*U)),d[1]=u.mulItems(N,3*U*(j*j));for(a=[[0,0],[0,0]],s=[0,0],q=0,Q=M.length;q<Q;q++)j=A[q],d=h[q],a[0][0]+=u.dot(d[0],d[0]),a[0][1]+=u.dot(d[0],d[1]),a[1][0]+=u.dot(d[0],d[1]),a[1][1]+=u.dot(d[1],d[1]),V=u.subtract(M[q],P.q([L,L,Z,Z],j)),s[0]+=u.dot(d[0],V),s[1]+=u.dot(d[1],V);return g=a[0][0]*a[1][1]-a[1][0]*a[0][1],p=a[0][0]*s[1]-a[1][0]*s[0],C=s[0]*a[1][1]-s[1]*a[0][1],B=g===0?0:C/g,I=g===0?0:p/g,Y=u.vectorLen(u.subtract(L,Z)),J=1e-6*Y,B<J||I<J?(c[1]=u.addArrays(L,u.mulItems(F,Y/3)),c[2]=u.addArrays(Z,u.mulItems(N,Y/3))):(c[1]=u.addArrays(L,u.mulItems(F,B)),c[2]=u.addArrays(Z,u.mulItems(N,I))),c}function m(M,A,F){return F.map((N,c)=>S(M,A[c],N))}function S(M,A,F){var N=u.subtract(P.q(M,F),A),c=P.qprime(M,F),h=u.mulMatrix(N,c),d=u.sum(u.squareItems(c))+2*u.mulMatrix(N,P.qprimeprime(M,F));return d===0?F:F-h/d}function x(M){var A=[],F,N,c;return M.forEach((h,d)=>{F=d?N+u.vectorLen(u.subtract(h,c)):0,A.push(F),N=F,c=h}),A=A.map(h=>h/N),A}function R(M,A,F){var N,c,h,d,a,s,g,p;c=0,h=Math.floor(M.length/2);const C=y(A,10);for(a=0,s=M.length;a<s;a++)g=M[a],p=v(A,F[a],C,10),d=u.subtract(P.q(A,p),g),N=d[0]*d[0]+d[1]*d[1],N>c&&(c=N,h=a);return[c,h]}var y=function(M,A){for(var F,N=[0],c=M[0],h=0,d=1;d<=A;d++)F=P.q(M,d/A),h+=u.vectorLen(u.subtract(F,c)),N.push(h),c=F;return N=N.map(a=>a/h),N};function v(M,A,F,N){if(A<0)return 0;if(A>1)return 1;for(var c,h,d,a,s,g=1;g<=N;g++)if(A<=F[g]){a=(g-1)/N,d=g/N,h=F[g-1],c=F[g],s=(A-h)/(c-h)*(d-a)+a;break}return s}function D(M,A){return u.normalize(u.subtract(M,A))}class u{static zeros_Xx2x2(A){for(var F=[];A--;)F.push([0,0]);return F}static mulItems(A,F){return A.map(N=>N*F)}static mulMatrix(A,F){return A.reduce((N,c,h)=>N+c*F[h],0)}static subtract(A,F){return A.map((N,c)=>N-F[c])}static addArrays(A,F){return A.map((N,c)=>N+F[c])}static addItems(A,F){return A.map(N=>N+F)}static sum(A){return A.reduce((F,N)=>F+N)}static dot(A,F){return u.mulMatrix(A,F)}static vectorLen(A){return Math.hypot(...A)}static divItems(A,F){return A.map(N=>N/F)}static squareItems(A){return A.map(F=>F*F)}static normalize(A){return this.divItems(A,this.vectorLen(A))}}class P{static q(A,F){var N=1-F,c=u.mulItems(A[0],N*N*N),h=u.mulItems(A[1],3*N*N*F),d=u.mulItems(A[2],3*N*F*F),a=u.mulItems(A[3],F*F*F);return u.addArrays(u.addArrays(c,h),u.addArrays(d,a))}static qprime(A,F){var N=1-F,c=u.mulItems(u.subtract(A[1],A[0]),3*N*N),h=u.mulItems(u.subtract(A[2],A[1]),6*N*F),d=u.mulItems(u.subtract(A[3],A[2]),3*F*F);return u.addArrays(u.addArrays(c,h),d)}static qprimeprime(A,F){return u.addArrays(u.mulItems(u.addArrays(u.subtract(A[2],u.mulItems(A[1],2)),A[0]),6*(1-F)),u.mulItems(u.addArrays(u.subtract(A[3],u.mulItems(A[2],2)),A[1]),6*F))}}k.exports=i,k.exports.fitCubic=t,k.exports.createTangent=D},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationLayer=void 0;var n=t(1),o=t(133),m=t(130),S=t(153),x=t(154);function R($,l,b){return y($,l),b}function y($,l){if($!==l)throw new TypeError("Private static access of wrong provenance")}const v=1e3,D=9,u=new WeakSet;function P($){return{width:$[2]-$[0],height:$[3]-$[1]}}class M{static create(l){switch(l.data.annotationType){case n.AnnotationType.LINK:return new F(l);case n.AnnotationType.TEXT:return new N(l);case n.AnnotationType.WIDGET:switch(l.data.fieldType){case"Tx":return new h(l);case"Btn":return l.data.radioButton?new a(l):l.data.checkBox?new d(l):new s(l);case"Ch":return new g(l)}return new c(l);case n.AnnotationType.POPUP:return new p(l);case n.AnnotationType.FREETEXT:return new B(l);case n.AnnotationType.LINE:return new I(l);case n.AnnotationType.SQUARE:return new J(l);case n.AnnotationType.CIRCLE:return new Y(l);case n.AnnotationType.POLYLINE:return new q(l);case n.AnnotationType.CARET:return new V(l);case n.AnnotationType.INK:return new j(l);case n.AnnotationType.POLYGON:return new Q(l);case n.AnnotationType.HIGHLIGHT:return new U(l);case n.AnnotationType.UNDERLINE:return new L(l);case n.AnnotationType.SQUIGGLY:return new Z(l);case n.AnnotationType.STRIKEOUT:return new ce(l);case n.AnnotationType.STAMP:return new be(l);case n.AnnotationType.FILEATTACHMENT:return new Re(l);default:return new A(l)}}}class A{constructor(l){let{isRenderable:b=!1,ignoreBorder:w=!1,createQuadrilaterals:O=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=b,this.data=l.data,this.layer=l.layer,this.page=l.page,this.viewport=l.viewport,this.linkService=l.linkService,this.downloadManager=l.downloadManager,this.imageResourcesPath=l.imageResourcesPath,this.renderForms=l.renderForms,this.svgFactory=l.svgFactory,this.annotationStorage=l.annotationStorage,this.enableScripting=l.enableScripting,this.hasJSActions=l.hasJSActions,this._fieldObjects=l.fieldObjects,this._mouseState=l.mouseState,b&&(this.container=this._createContainer(w)),O&&(this.quadrilaterals=this._createQuadrilaterals(w))}_createContainer(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const b=this.data,w=this.page,O=this.viewport,W=document.createElement("section"),{width:H,height:ee}=P(b.rect),[ne,se,ue,le]=O.viewBox,de=ue-ne,ge=le-se;W.setAttribute("data-annotation-id",b.id);const Se=n.Util.normalizeRect([b.rect[0],w.view[3]-b.rect[1]+w.view[1],b.rect[2],w.view[3]-b.rect[3]+w.view[1]]);if(!l&&b.borderStyle.width>0){W.style.borderWidth=`${b.borderStyle.width}px`;const Pe=b.borderStyle.horizontalCornerRadius,Ie=b.borderStyle.verticalCornerRadius;if(Pe>0||Ie>0){const Xe=`calc(${Pe}px * var(--scale-factor)) / calc(${Ie}px * var(--scale-factor))`;W.style.borderRadius=Xe}else if(this instanceof a){const Xe=`calc(${H}px * var(--scale-factor)) / calc(${ee}px * var(--scale-factor))`;W.style.borderRadius=Xe}switch(b.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:W.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:W.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:W.style.borderBottomStyle="solid";break}const _e=b.borderColor||null;_e?W.style.borderColor=n.Util.makeHexColor(_e[0]|0,_e[1]|0,_e[2]|0):W.style.borderWidth=0}W.style.left=`${100*(Se[0]-ne)/de}%`,W.style.top=`${100*(Se[1]-se)/ge}%`;const{rotation:we}=b;return b.hasOwnCanvas||we===0?(W.style.width=`${100*H/de}%`,W.style.height=`${100*ee/ge}%`):this.setRotation(we,W),W}setRotation(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const[w,O,W,H]=this.viewport.viewBox,ee=W-w,ne=H-O,{width:se,height:ue}=P(this.data.rect);let le,de;l%180===0?(le=100*se/ee,de=100*ue/ne):(le=100*ue/ee,de=100*se/ne),b.style.width=`${le}%`,b.style.height=`${de}%`,b.setAttribute("data-main-rotation",(360-l)%360)}get _commonActions(){const l=(b,w,O)=>{const W=O.detail[b];O.target.style[w]=S.ColorConverters[`${W[0]}_HTML`](W.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:b=>{const w=b.detail.display%2===1;this.container.style.visibility=w?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:w,print:b.detail.display===0||b.detail.display===3})},print:b=>{this.annotationStorage.setValue(this.data.id,{print:b.detail.print})},hidden:b=>{this.container.style.visibility=b.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:b.detail.hidden})},focus:b=>{setTimeout(()=>b.target.focus({preventScroll:!1}),0)},userName:b=>{b.target.title=b.detail.userName},readonly:b=>{b.detail.readonly?b.target.setAttribute("readonly",""):b.target.removeAttribute("readonly")},required:b=>{this._setRequired(b.target,b.detail.required)},bgColor:b=>{l("bgColor","backgroundColor",b)},fillColor:b=>{l("fillColor","backgroundColor",b)},fgColor:b=>{l("fgColor","color",b)},textColor:b=>{l("textColor","color",b)},borderColor:b=>{l("borderColor","borderColor",b)},strokeColor:b=>{l("strokeColor","borderColor",b)},rotation:b=>{const w=b.detail.rotation;this.setRotation(w),this.annotationStorage.setValue(this.data.id,{rotation:w})}})}_dispatchEventFromSandbox(l,b){const w=this._commonActions;for(const O of Object.keys(b.detail)){const W=l[O]||w[O];W&&W(b)}}_setDefaultPropertiesFromJS(l){if(!this.enableScripting)return;const b=this.annotationStorage.getRawValue(this.data.id);if(!b)return;const w=this._commonActions;for(const[O,W]of Object.entries(b)){const H=w[O];if(H){const ee={detail:{[O]:W},target:l};H(ee),delete b[O]}}}_createQuadrilaterals(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;const b=[],w=this.data.rect;for(const O of this.data.quadPoints)this.data.rect=[O[2].x,O[2].y,O[1].x,O[1].y],b.push(this._createContainer(l));return this.data.rect=w,b}_createPopup(l,b){let w=this.container;this.quadrilaterals&&(l=l||this.quadrilaterals,w=this.quadrilaterals[0]),l||(l=document.createElement("div"),l.className="popupTriggerArea",w.append(l));const W=new C({container:w,trigger:l,color:b.color,titleObj:b.titleObj,modificationDate:b.modificationDate,contentsObj:b.contentsObj,richText:b.richText,hideWrapper:!0}).render();W.style.left="100%",w.append(W)}_renderQuadrilaterals(l){for(const b of this.quadrilaterals)b.className=l;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const w=[];if(this._fieldObjects){const O=this._fieldObjects[l];if(O)for(const{page:W,id:H,exportValues:ee}of O){if(W===-1||H===b)continue;const ne=typeof ee=="string"?ee:null,se=document.querySelector(`[data-element-id="${H}"]`);if(se&&!u.has(se)){(0,n.warn)(`_getElementsByName - element not allowed: ${H}`);continue}w.push({id:H,exportValue:ne,domElement:se})}return w}for(const O of document.getElementsByName(l)){const{id:W,exportValue:H}=O;W!==b&&u.has(O)&&w.push({id:W,exportValue:H,domElement:O})}return w}static get platform(){const l=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:l.includes("Win"),isMac:l.includes("Mac")})}}class F extends A{constructor(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(l,{isRenderable:!0,ignoreBorder:!!(b!=null&&b.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:b}=this,w=document.createElement("a");w.setAttribute("data-element-id",l.id);let O=!1;return l.url?(b.addLinkAttributes(w,l.url,l.newWindow),O=!0):l.action?(this._bindNamedAction(w,l.action),O=!0):l.dest?(this._bindLink(w,l.dest),O=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(w,l),O=!0),l.resetForm?(this._bindResetFormAction(w,l.resetForm),O=!0):this.isTooltipOnly&&!O&&(this._bindLink(w,""),O=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((W,H)=>{const ee=H===0?w:w.cloneNode();return W.append(ee),W}):(this.container.className="linkAnnotation",O&&this.container.append(w),this.container)}_bindLink(l,b){l.href=this.linkService.getDestinationHash(b),l.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&(l.className="internalLink")}_bindNamedAction(l,b){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(b),!1),l.className="internalLink"}_bindJSAction(l,b){l.href=this.linkService.getAnchorUrl("");const w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const O of Object.keys(b.actions)){const W=w.get(O);W&&(l[W]=()=>{var H;return(H=this.linkService.eventBus)===null||H===void 0||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:O}}),!1})}l.onclick||(l.onclick=()=>!1),l.className="internalLink"}_bindResetFormAction(l,b){const w=l.onclick;if(w||(l.href=this.linkService.getAnchorUrl("")),l.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),w||(l.onclick=()=>!1);return}l.onclick=()=>{w&&w();const{fields:O,refs:W,include:H}=b,ee=[];if(O.length!==0||W.length!==0){const le=new Set(W);for(const de of O){const ge=this._fieldObjects[de]||[];for(const{id:Se}of ge)le.add(Se)}for(const de of Object.values(this._fieldObjects))for(const ge of de)le.has(ge.id)===H&&ee.push(ge)}else for(const le of Object.values(this._fieldObjects))ee.push(...le);const ne=this.annotationStorage,se=[];for(const le of ee){const{id:de}=le;switch(se.push(de),le.type){case"text":{const Se=le.defaultValue||"";ne.setValue(de,{value:Se});break}case"checkbox":case"radiobutton":{const Se=le.defaultValue===le.exportValues;ne.setValue(de,{value:Se});break}case"combobox":case"listbox":{const Se=le.defaultValue||"";ne.setValue(de,{value:Se});break}default:continue}const ge=document.querySelector(`[data-element-id="${de}"]`);if(ge){if(!u.has(ge)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${de}`);continue}}else continue;ge.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var ue;(ue=this.linkService.eventBus)===null||ue===void 0||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:se,name:"ResetForm"}})}return!1}}}class N extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W})}render(){this.container.className="textAnnotation";const l=document.createElement("img");return l.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",l.alt="[{{type}} Annotation]",l.dataset.l10nId="text_annotation_type",l.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(l,this.data),this.container.append(l),this.container}}class c extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(l){const{isWin:b,isMac:w}=A.platform;return b&&l.ctrlKey||w&&l.metaKey}_setEventListener(l,b,w,O){b.includes("mouse")?l.addEventListener(b,W=>{var H;(H=this.linkService.eventBus)===null||H===void 0||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:O(W),shift:W.shiftKey,modifier:this._getKeyModifier(W)}})}):l.addEventListener(b,W=>{var H;(H=this.linkService.eventBus)===null||H===void 0||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:O(W)}})})}_setEventListeners(l,b,w){for(const[W,H]of b){var O;(H==="Action"||(O=this.data.actions)!==null&&O!==void 0&&O[H])&&this._setEventListener(l,W,H,w)}}_setBackgroundColor(l){const b=this.data.backgroundColor||null;l.style.backgroundColor=b===null?"transparent":n.Util.makeHexColor(b[0],b[1],b[2])}_setTextStyle(l){const b=["left","center","right"],{fontColor:w}=this.data.defaultAppearanceData,O=this.data.defaultAppearanceData.fontSize||D,W=l.style;let H;if(this.data.multiLine){const ee=Math.abs(this.data.rect[3]-this.data.rect[1]),ne=Math.round(ee/(n.LINE_FACTOR*O))||1,se=ee/ne;H=Math.min(O,Math.round(se/n.LINE_FACTOR))}else{const ee=Math.abs(this.data.rect[3]-this.data.rect[1]);H=Math.min(O,Math.round(ee/n.LINE_FACTOR))}W.fontSize=`calc(${H}px * var(--scale-factor))`,W.color=n.Util.makeHexColor(w[0],w[1],w[2]),this.data.textAlignment!==null&&(W.textAlign=b[this.data.textAlignment])}_setRequired(l,b){b?l.setAttribute("required",!0):l.removeAttribute("required"),l.setAttribute("aria-required",b)}}class h extends c{constructor(l){const b=l.renderForms||!l.data.hasAppearance&&!!l.data.fieldValue;super(l,{isRenderable:b})}setPropertyOnSiblings(l,b,w,O){const W=this.annotationStorage;for(const H of this._getElementsByName(l.name,l.id))H.domElement&&(H.domElement[b]=w),W.setValue(H.id,{[O]:w})}render(){const l=this.annotationStorage,b=this.data.id;this.container.className="textWidgetAnnotation";let w=null;if(this.renderForms){const W=l.getValue(b,{value:this.data.fieldValue});let H=W.formattedValue||W.value||"";const ee=l.getValue(b,{charLimit:this.data.maxLen}).charLimit;ee&&H.length>ee&&(H=H.slice(0,ee));const ne={userValue:H,formattedValue:null,valueOnFocus:""};this.data.multiLine?(w=document.createElement("textarea"),w.textContent=H,this.data.doNotScroll&&(w.style.overflowY="hidden")):(w=document.createElement("input"),w.type="text",w.setAttribute("value",H),this.data.doNotScroll&&(w.style.overflowX="hidden")),u.add(w),w.setAttribute("data-element-id",b),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=v,this._setRequired(w,this.data.required),ee&&(w.maxLength=ee),w.addEventListener("input",ue=>{l.setValue(b,{value:ue.target.value}),this.setPropertyOnSiblings(w,"value",ue.target.value,"value")}),w.addEventListener("resetform",ue=>{var le;const de=(le=this.data.defaultFieldValue)!==null&&le!==void 0?le:"";w.value=ne.userValue=de,ne.formattedValue=null});let se=ue=>{const{formattedValue:le}=ne;le!=null&&(ue.target.value=le),ue.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var O;w.addEventListener("focus",le=>{ne.userValue&&(le.target.value=ne.userValue),ne.valueOnFocus=le.target.value}),w.addEventListener("updatefromsandbox",le=>{const de={value(ge){var Se;ne.userValue=(Se=ge.detail.value)!==null&&Se!==void 0?Se:"",l.setValue(b,{value:ne.userValue.toString()}),ge.target.value=ne.userValue},formattedValue(ge){const{formattedValue:Se}=ge.detail;ne.formattedValue=Se,Se!=null&&ge.target!==document.activeElement&&(ge.target.value=Se),l.setValue(b,{formattedValue:Se})},selRange(ge){ge.target.setSelectionRange(...ge.detail.selRange)},charLimit:ge=>{var Se;const{charLimit:we}=ge.detail,{target:Pe}=ge;if(we===0){Pe.removeAttribute("maxLength");return}Pe.setAttribute("maxLength",we);let Ie=ne.userValue;!Ie||Ie.length<=we||(Ie=Ie.slice(0,we),Pe.value=ne.userValue=Ie,l.setValue(b,{value:Ie}),(Se=this.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:Ie,willCommit:!0,commitKey:1,selStart:Pe.selectionStart,selEnd:Pe.selectionEnd}}))}};this._dispatchEventFromSandbox(de,le)}),w.addEventListener("keydown",le=>{var de;let ge=-1;if(le.key==="Escape"?ge=0:le.key==="Enter"?ge=2:le.key==="Tab"&&(ge=3),ge===-1)return;const{value:Se}=le.target;ne.valueOnFocus!==Se&&(ne.userValue=Se,(de=this.linkService.eventBus)===null||de===void 0||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:Se,willCommit:!0,commitKey:ge,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}}))});const ue=se;se=null,w.addEventListener("blur",le=>{const{value:de}=le.target;if(ne.userValue=de,this._mouseState.isDown&&ne.valueOnFocus!==de){var ge;(ge=this.linkService.eventBus)===null||ge===void 0||ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:de,willCommit:!0,commitKey:1,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}})}ue(le)}),(O=this.data.actions)!==null&&O!==void 0&&O.Keystroke&&w.addEventListener("beforeinput",le=>{var de;const{data:ge,target:Se}=le,{value:we,selectionStart:Pe,selectionEnd:Ie}=Se;let _e=Pe,Xe=Ie;switch(le.inputType){case"deleteWordBackward":{const Qe=we.substring(0,Pe).match(/\w*[^\w]*$/);Qe&&(_e-=Qe[0].length);break}case"deleteWordForward":{const Qe=we.substring(Pe).match(/^[^\w]*\w*/);Qe&&(Xe+=Qe[0].length);break}case"deleteContentBackward":Pe===Ie&&(_e-=1);break;case"deleteContentForward":Pe===Ie&&(Xe+=1);break}le.preventDefault(),(de=this.linkService.eventBus)===null||de===void 0||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:we,change:ge||"",willCommit:!1,selStart:_e,selEnd:Xe}})}),this._setEventListeners(w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],le=>le.target.value)}if(se&&w.addEventListener("blur",se),this.data.comb){const le=(this.data.rect[2]-this.data.rect[0])/ee;w.classList.add("comb"),w.style.letterSpacing=`calc(${le}px * var(--scale-factor) - 1ch)`}}else w=document.createElement("div"),w.textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class d extends c{constructor(l){super(l,{isRenderable:l.renderForms})}render(){const l=this.annotationStorage,b=this.data,w=b.id;let O=l.getValue(w,{value:b.exportValue===b.fieldValue}).value;typeof O=="string"&&(O=O!=="Off",l.setValue(w,{value:O})),this.container.className="buttonWidgetAnnotation checkBox";const W=document.createElement("input");return u.add(W),W.setAttribute("data-element-id",w),W.disabled=b.readOnly,this._setRequired(W,this.data.required),W.type="checkbox",W.name=b.fieldName,O&&W.setAttribute("checked",!0),W.setAttribute("exportValue",b.exportValue),W.tabIndex=v,W.addEventListener("change",H=>{const{name:ee,checked:ne}=H.target;for(const se of this._getElementsByName(ee,w)){const ue=ne&&se.exportValue===b.exportValue;se.domElement&&(se.domElement.checked=ue),l.setValue(se.id,{value:ue})}l.setValue(w,{value:ne})}),W.addEventListener("resetform",H=>{const ee=b.defaultFieldValue||"Off";H.target.checked=ee===b.exportValue}),this.enableScripting&&this.hasJSActions&&(W.addEventListener("updatefromsandbox",H=>{const ee={value(ne){ne.target.checked=ne.detail.value!=="Off",l.setValue(w,{value:ne.target.checked})}};this._dispatchEventFromSandbox(ee,H)}),this._setEventListeners(W,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class a extends c{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const l=this.annotationStorage,b=this.data,w=b.id;let O=l.getValue(w,{value:b.fieldValue===b.buttonValue}).value;typeof O=="string"&&(O=O!==b.buttonValue,l.setValue(w,{value:O}));const W=document.createElement("input");if(u.add(W),W.setAttribute("data-element-id",w),W.disabled=b.readOnly,this._setRequired(W,this.data.required),W.type="radio",W.name=b.fieldName,O&&W.setAttribute("checked",!0),W.tabIndex=v,W.addEventListener("change",H=>{const{name:ee,checked:ne}=H.target;for(const se of this._getElementsByName(ee,w))l.setValue(se.id,{value:!1});l.setValue(w,{value:ne})}),W.addEventListener("resetform",H=>{const ee=b.defaultFieldValue;H.target.checked=ee!=null&&ee===b.buttonValue}),this.enableScripting&&this.hasJSActions){const H=b.buttonValue;W.addEventListener("updatefromsandbox",ee=>{const ne={value:se=>{const ue=H===se.detail.value;for(const le of this._getElementsByName(se.target.name)){const de=ue&&le.id===w;le.domElement&&(le.domElement.checked=de),l.setValue(le.id,{value:de})}}};this._dispatchEventFromSandbox(ne,ee)}),this._setEventListeners(W,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ee=>ee.target.checked)}return this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class s extends F{constructor(l){super(l,{ignoreBorder:l.data.hasAppearance})}render(){const l=super.render();l.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(l.title=this.data.alternativeText);const b=l.lastChild;return this.enableScripting&&this.hasJSActions&&b&&(this._setDefaultPropertiesFromJS(b),b.addEventListener("updatefromsandbox",w=>{this._dispatchEventFromSandbox({},w)})),l}}class g extends c{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const l=this.annotationStorage,b=this.data.id,w=l.getValue(b,{value:this.data.fieldValue}),O=document.createElement("select");u.add(O),O.setAttribute("data-element-id",b),O.disabled=this.data.readOnly,this._setRequired(O,this.data.required),O.name=this.data.fieldName,O.tabIndex=v;let W=this.data.combo&&this.data.options.length>0;this.data.combo||(O.size=this.data.options.length,this.data.multiSelect&&(O.multiple=!0)),O.addEventListener("resetform",se=>{const ue=this.data.defaultFieldValue;for(const le of O.options)le.selected=le.value===ue});for(const se of this.data.options){const ue=document.createElement("option");ue.textContent=se.displayValue,ue.value=se.exportValue,w.value.includes(se.exportValue)&&(ue.setAttribute("selected",!0),W=!1),O.append(ue)}let H=null;if(W){const se=document.createElement("option");se.value=" ",se.setAttribute("hidden",!0),se.setAttribute("selected",!0),O.prepend(se),H=()=>{se.remove(),O.removeEventListener("input",H),H=null},O.addEventListener("input",H)}const ee=(se,ue)=>{const le=ue?"value":"textContent",de=se.target.options;return se.target.multiple?Array.prototype.filter.call(de,ge=>ge.selected).map(ge=>ge[le]):de.selectedIndex===-1?null:de[de.selectedIndex][le]},ne=se=>{const ue=se.target.options;return Array.prototype.map.call(ue,le=>({displayValue:le.textContent,exportValue:le.value}))};return this.enableScripting&&this.hasJSActions?(O.addEventListener("updatefromsandbox",se=>{const ue={value(le){var de;(de=H)===null||de===void 0||de();const ge=le.detail.value,Se=new Set(Array.isArray(ge)?ge:[ge]);for(const we of O.options)we.selected=Se.has(we.value);l.setValue(b,{value:ee(le,!0)})},multipleSelection(le){O.multiple=!0},remove(le){const de=O.options,ge=le.detail.remove;de[ge].selected=!1,O.remove(ge),de.length>0&&Array.prototype.findIndex.call(de,we=>we.selected)===-1&&(de[0].selected=!0),l.setValue(b,{value:ee(le,!0),items:ne(le)})},clear(le){for(;O.length!==0;)O.remove(0);l.setValue(b,{value:null,items:[]})},insert(le){const{index:de,displayValue:ge,exportValue:Se}=le.detail.insert,we=O.children[de],Pe=document.createElement("option");Pe.textContent=ge,Pe.value=Se,we?we.before(Pe):O.append(Pe),l.setValue(b,{value:ee(le,!0),items:ne(le)})},items(le){const{items:de}=le.detail;for(;O.length!==0;)O.remove(0);for(const ge of de){const{displayValue:Se,exportValue:we}=ge,Pe=document.createElement("option");Pe.textContent=Se,Pe.value=we,O.append(Pe)}O.options.length>0&&(O.options[0].selected=!0),l.setValue(b,{value:ee(le,!0),items:ne(le)})},indices(le){const de=new Set(le.detail.indices);for(const ge of le.target.options)ge.selected=de.has(ge.index);l.setValue(b,{value:ee(le,!0)})},editable(le){le.target.disabled=!le.detail.editable}};this._dispatchEventFromSandbox(ue,se)}),O.addEventListener("input",se=>{var ue;const le=ee(se,!0),de=ee(se,!1);l.setValue(b,{value:le}),(ue=this.linkService.eventBus)===null||ue===void 0||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:de,changeEx:le,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(O,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],se=>se.target.checked)):O.addEventListener("input",function(se){l.setValue(b,{value:ee(se,!0)})}),this.data.combo&&this._setTextStyle(O),this._setBackgroundColor(O),this._setDefaultPropertiesFromJS(O),this.container.append(O),this.container}}class p extends A{constructor(l){var b,w,O;const W=!!((b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W})}render(){const l=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",l.includes(this.data.parentType))return this.container;const b=`[data-annotation-id="${this.data.parentId}"]`,w=this.layer.querySelectorAll(b);if(w.length===0)return this.container;const O=new C({container:this.container,trigger:Array.from(w),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),W=this.page,H=n.Util.normalizeRect([this.data.parentRect[0],W.view[3]-this.data.parentRect[1]+W.view[1],this.data.parentRect[2],W.view[3]-this.data.parentRect[3]+W.view[1]]),ee=H[0]+this.data.parentRect[2]-this.data.parentRect[0],ne=H[1],[se,ue,le,de]=this.viewport.viewBox,ge=le-se,Se=de-ue;return this.container.style.left=`${100*(ee-se)/ge}%`,this.container.style.top=`${100*(ne-ue)/Se}%`,this.container.append(O.render()),this.container}}class C{constructor(l){this.container=l.container,this.trigger=l.trigger,this.color=l.color,this.titleObj=l.titleObj,this.modificationDate=l.modificationDate,this.contentsObj=l.contentsObj,this.richText=l.richText,this.hideWrapper=l.hideWrapper||!1,this.pinned=!1}render(){var l,b;const O=document.createElement("div");O.className="popupWrapper",this.hideElement=this.hideWrapper?O:this.container,this.hideElement.hidden=!0;const W=document.createElement("div");W.className="popup";const H=this.color;if(H){const se=.7*(255-H[0])+H[0],ue=.7*(255-H[1])+H[1],le=.7*(255-H[2])+H[2];W.style.backgroundColor=n.Util.makeHexColor(se|0,ue|0,le|0)}const ee=document.createElement("h1");ee.dir=this.titleObj.dir,ee.textContent=this.titleObj.str,W.append(ee);const ne=o.PDFDateString.toDateObject(this.modificationDate);if(ne){const se=document.createElement("span");se.className="popupDate",se.textContent="{{date}}, {{time}}",se.dataset.l10nId="annotation_date_string",se.dataset.l10nArgs=JSON.stringify({date:ne.toLocaleDateString(),time:ne.toLocaleTimeString()}),W.append(se)}if((l=this.richText)!==null&&l!==void 0&&l.str&&(!((b=this.contentsObj)!==null&&b!==void 0&&b.str)||this.contentsObj.str===this.richText.str))x.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:W}),W.lastChild.className="richText popupContent";else{const se=this._formatContents(this.contentsObj);W.append(se)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const se of this.trigger)se.addEventListener("click",this._toggle.bind(this)),se.addEventListener("mouseover",this._show.bind(this,!1)),se.addEventListener("mouseout",this._hide.bind(this,!1));return W.addEventListener("click",this._hide.bind(this,!0)),O.append(W),O}_formatContents(l){let{str:b,dir:w}=l;const O=document.createElement("p");O.className="popupContent",O.dir=w;const W=b.split(/(?:\r\n?|\n)/);for(let H=0,ee=W.length;H<ee;++H){const ne=W[H];O.append(document.createTextNode(ne)),H<ee-1&&O.append(document.createElement("br"))}return O}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class B extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0}),this.textContent=l.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const l=document.createElement("div");l.className="annotationTextContent",l.setAttribute("role","comment");for(const b of this.textContent){const w=document.createElement("span");w.textContent=b,l.append(w)}this.container.append(l)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const l=this.data,{width:b,height:w}=P(l.rect),O=this.svgFactory.create(b,w,!0),W=this.svgFactory.createElement("svg:line");return W.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),W.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),W.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),W.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),W.setAttribute("stroke-width",l.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),O.append(W),this.container.append(O),this._createPopup(W,l),this.container}}class J extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const l=this.data,{width:b,height:w}=P(l.rect),O=this.svgFactory.create(b,w,!0),W=l.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",W/2),H.setAttribute("y",W/2),H.setAttribute("width",b-W),H.setAttribute("height",w-W),H.setAttribute("stroke-width",W||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),O.append(H),this.container.append(O),this._createPopup(H,l),this.container}}class Y extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const l=this.data,{width:b,height:w}=P(l.rect),O=this.svgFactory.create(b,w,!0),W=l.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",b/2),H.setAttribute("cy",w/2),H.setAttribute("rx",b/2-W/2),H.setAttribute("ry",w/2-W/2),H.setAttribute("stroke-width",W||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),O.append(H),this.container.append(O),this._createPopup(H,l),this.container}}class q extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:b,height:w}=P(l.rect),O=this.svgFactory.create(b,w,!0);let W=[];for(const ee of l.vertices){const ne=ee.x-l.rect[0],se=l.rect[3]-ee.y;W.push(ne+","+se)}W=W.join(" ");const H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",W),H.setAttribute("stroke-width",l.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),O.append(H),this.container.append(O),this._createPopup(H,l),this.container}}class Q extends q{constructor(l){super(l),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class V extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class j extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:b,height:w}=P(l.rect),O=this.svgFactory.create(b,w,!0);for(const W of l.inkLists){let H=[];for(const ne of W){const se=ne.x-l.rect[0],ue=l.rect[3]-ne.y;H.push(`${se},${ue}`)}H=H.join(" ");const ee=this.svgFactory.createElement(this.svgElementName);ee.setAttribute("points",H),ee.setAttribute("stroke-width",l.borderStyle.width||1),ee.setAttribute("stroke","transparent"),ee.setAttribute("fill","transparent"),this._createPopup(ee,l),O.append(ee)}return this.container.append(O),this.container}}class U extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class L extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Z extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ce extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class be extends A{constructor(l){var b,w,O;const W=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:W,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Re extends A{constructor(l){var b;super(l,{isRenderable:!0});const{filename:w,content:O}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(w),this.content=O,(b=this.linkService.eventBus)===null||b===void 0||b.dispatch("fileattachmentannotation",{source:this,filename:w,content:O})}render(){var l,b;this.container.className="fileAttachmentAnnotation";const w=document.createElement("div");return w.className="popupTriggerArea",w.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((l=this.data.titleObj)!==null&&l!==void 0&&l.str||(b=this.data.contentsObj)!==null&&b!==void 0&&b.str||this.data.richText)&&this._createPopup(w,this.data),this.container.append(w),this.container}_download(){var l;(l=this.downloadManager)===null||l===void 0||l.openOrDownloadData(this.container,this.content,this.filename)}}class X{static render(l){const{annotations:b,div:w,viewport:O,accessibilityManager:W}=l;R(this,X,T).call(this,w,O);let H=0;for(const ee of b){if(ee.annotationType!==n.AnnotationType.POPUP){const{width:se,height:ue}=P(ee.rect);if(se<=0||ue<=0)continue}const ne=M.create({data:ee,layer:w,page:l.page,viewport:O,linkService:l.linkService,downloadManager:l.downloadManager,imageResourcesPath:l.imageResourcesPath||"",renderForms:l.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:l.annotationStorage||new m.AnnotationStorage,enableScripting:l.enableScripting,hasJSActions:l.hasJSActions,fieldObjects:l.fieldObjects,mouseState:l.mouseState||{isDown:!1}});if(ne.isRenderable){const se=ne.render();if(ee.hidden&&(se.style.visibility="hidden"),Array.isArray(se))for(const ue of se)ue.style.zIndex=H++,R(X,X,_).call(X,ue,ee.id,w,W);else se.style.zIndex=H++,ne instanceof p?w.prepend(se):R(X,X,_).call(X,se,ee.id,w,W)}}R(this,X,z).call(this,w,l.annotationCanvasMap)}static update(l){const{annotationCanvasMap:b,div:w,viewport:O}=l;R(this,X,T).call(this,w,O),R(this,X,z).call(this,w,b),w.hidden=!1}}i.AnnotationLayer=X;function _($,l,b,w){const O=$.firstChild||$;O.id=`${o.AnnotationPrefix}${l}`,b.append($),w==null||w.moveElementInDOM(b,$,O,!1)}function T($,l){let{width:b,height:w,rotation:O}=l;const{style:W}=$,H=O%180!==0,ee=Math.floor(b)+"px",ne=Math.floor(w)+"px";W.width=H?ne:ee,W.height=H?ee:ne,$.setAttribute("data-main-rotation",O)}function z($,l){if(l){for(const[b,w]of l){const O=$.querySelector(`[data-annotation-id="${b}"]`);if(!O)continue;const{firstChild:W}=O;W?W.nodeName==="CANVAS"?W.replaceWith(w):W.before(w):O.append(w)}l.clear()}}},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function t(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}class n{static CMYK_G(m){let[S,x,R,y]=m;return["G",1-Math.min(1,.3*S+.59*R+.11*x+y)]}static G_CMYK(m){let[S]=m;return["CMYK",0,0,0,1-S]}static G_RGB(m){let[S]=m;return["RGB",S,S,S]}static G_HTML(m){let[S]=m;const x=t(S);return`#${x}${x}${x}`}static RGB_G(m){let[S,x,R]=m;return["G",.3*S+.59*x+.11*R]}static RGB_HTML(m){let[S,x,R]=m;const y=t(S),v=t(x),D=t(R);return`#${y}${v}${D}`}static T_HTML(){return"#00000000"}static CMYK_RGB(m){let[S,x,R,y]=m;return["RGB",1-Math.min(1,S+y),1-Math.min(1,R+y),1-Math.min(1,x+y)]}static CMYK_HTML(m){const S=this.CMYK_RGB(m).slice(1);return this.RGB_HTML(S)}static RGB_CMYK(m){let[S,x,R]=m;const y=1-S,v=1-x,D=1-R,u=Math.min(y,v,D);return["CMYK",y,v,D,u]}}i.ColorConverters=n},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var n=t(145);class o{static setupStorage(S,x,R,y,v){const D=y.getValue(x,{value:null});switch(R.name){case"textarea":if(D.value!==null&&(S.textContent=D.value),v==="print")break;S.addEventListener("input",u=>{y.setValue(x,{value:u.target.value})});break;case"input":if(R.attributes.type==="radio"||R.attributes.type==="checkbox"){if(D.value===R.attributes.xfaOn?S.setAttribute("checked",!0):D.value===R.attributes.xfaOff&&S.removeAttribute("checked"),v==="print")break;S.addEventListener("change",u=>{y.setValue(x,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(D.value!==null&&S.setAttribute("value",D.value),v==="print")break;S.addEventListener("input",u=>{y.setValue(x,{value:u.target.value})})}break;case"select":if(D.value!==null)for(const u of R.children)u.attributes.value===D.value&&(u.attributes.selected=!0);S.addEventListener("input",u=>{const P=u.target.options,M=P.selectedIndex===-1?"":P[P.selectedIndex].value;y.setValue(x,{value:M})});break}}static setAttributes(S){let{html:x,element:R,storage:y=null,intent:v,linkService:D}=S;const{attributes:u}=R,P=x instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${v}`);for(const[M,A]of Object.entries(u))if(A!=null)switch(M){case"class":A.length&&x.setAttribute(M,A.join(" "));break;case"dataId":break;case"id":x.setAttribute("data-element-id",A);break;case"style":Object.assign(x.style,A);break;case"textContent":x.textContent=A;break;default:(!P||M!=="href"&&M!=="newWindow")&&x.setAttribute(M,A)}P&&D.addLinkAttributes(x,u.href,u.newWindow),y&&u.dataId&&this.setupStorage(x,u.dataId,R,y)}static render(S){const x=S.annotationStorage,R=S.linkService,y=S.xfaHtml,v=S.intent||"display",D=document.createElement(y.name);y.attributes&&this.setAttributes({html:D,element:y,intent:v,linkService:R});const u=[[y,-1,D]],P=S.div;if(P.append(D),S.viewport){const F=`matrix(${S.viewport.transform.join(",")})`;P.style.transform=F}v!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const M=[];for(;u.length>0;){var A;const[F,N,c]=u.at(-1);if(N+1===F.children.length){u.pop();continue}const h=F.children[++u.at(-1)[1]];if(h===null)continue;const{name:d}=h;if(d==="#text"){const s=document.createTextNode(h.value);M.push(s),c.append(s);continue}let a;if(h!=null&&(A=h.attributes)!==null&&A!==void 0&&A.xmlns?a=document.createElementNS(h.attributes.xmlns,d):a=document.createElement(d),c.append(a),h.attributes&&this.setAttributes({html:a,element:h,storage:x,intent:v,linkService:R}),h.children&&h.children.length>0)u.push([h,-1,a]);else if(h.value){const s=document.createTextNode(h.value);n.XfaText.shouldBuildText(d)&&M.push(s),a.append(s)}}for(const F of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))F.setAttribute("readOnly",!0);return{textDivs:M}}static update(S){const x=`matrix(${S.viewport.transform.join(",")})`;S.div.style.transform=x,S.div.hidden=!1}}i.XfaLayer=o},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=c;var n=t(1),o=t(133);const m=1e5,S=30,x=.8,R=new Map,y=/^\s+$/g;function v(h,d){const a=R.get(h);if(a)return a;d.save(),d.font=`${S}px ${h}`;const s=d.measureText("");let g=s.fontBoundingBoxAscent,p=Math.abs(s.fontBoundingBoxDescent);if(g){d.restore();const B=g/(g+p);return R.set(h,B),B}d.strokeStyle="red",d.clearRect(0,0,S,S),d.strokeText("g",0,0);let C=d.getImageData(0,0,S,S).data;p=0;for(let B=C.length-1-3;B>=0;B-=4)if(C[B]>0){p=Math.ceil(B/4/S);break}d.clearRect(0,0,S,S),d.strokeText("A",0,S),C=d.getImageData(0,0,S,S).data,g=0;for(let B=0,I=C.length;B<I;B+=4)if(C[B]>0){g=S-Math.floor(B/4/S);break}if(d.restore(),g){const B=g/(g+p);return R.set(h,B),B}return R.set(h,x),x}function D(h,d,a,s){const g=document.createElement("span"),p=h._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:d.str!=="",hasEOL:d.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:d.str!=="",hasEOL:d.hasEOL,fontSize:0};h._textDivs.push(g);const C=n.Util.transform(h._viewport.transform,d.transform);let B=Math.atan2(C[1],C[0]);const I=a[d.fontName];I.vertical&&(B+=Math.PI/2);const J=Math.hypot(C[2],C[3]),Y=J*v(I.fontFamily,s);let q,Q;B===0?(q=C[4],Q=C[5]-Y):(q=C[4]+Y*Math.sin(B),Q=C[5]-Y*Math.cos(B)),g.style.left=`${q}px`,g.style.top=`${Q}px`,g.style.fontSize=`${J}px`,g.style.fontFamily=I.fontFamily,p.fontSize=J,g.setAttribute("role","presentation"),g.textContent=d.str,g.dir=d.dir,h._fontInspectorEnabled&&(g.dataset.fontName=d.fontName),B!==0&&(p.angle=B*(180/Math.PI));let V=!1;if(d.str.length>1||h._enhanceTextSelection&&y.test(d.str))V=!0;else if(d.str!==" "&&d.transform[0]!==d.transform[3]){const j=Math.abs(d.transform[0]),U=Math.abs(d.transform[3]);j!==U&&Math.max(j,U)/Math.min(j,U)>1.5&&(V=!0)}if(V&&(I.vertical?p.canvasWidth=d.height*h._viewport.scale:p.canvasWidth=d.width*h._viewport.scale),h._textDivProperties.set(g,p),h._textContentStream&&h._layoutText(g),h._enhanceTextSelection&&p.hasText){let j=1,U=0;B!==0&&(j=Math.cos(B),U=Math.sin(B));const L=(I.vertical?d.height:d.width)*h._viewport.scale,Z=J;let ce,be;B!==0?(ce=[j,U,-U,j,q,Q],be=n.Util.getAxialAlignedBoundingBox([0,0,L,Z],ce)):be=[q,Q,q+L,Q+Z],h._bounds.push({left:be[0],top:be[1],right:be[2],bottom:be[3],div:g,size:[L,Z],m:ce})}}function u(h){if(h._canceled)return;const d=h._textDivs,a=h._capability,s=d.length;if(s>m){h._renderingDone=!0,a.resolve();return}if(!h._textContentStream)for(let g=0;g<s;g++)h._layoutText(d[g]);h._renderingDone=!0,a.resolve()}function P(h,d,a){let s=0;for(let g=0;g<a;g++){const p=h[d++];p>0&&(s=s?Math.min(p,s):p)}return s}function M(h){const d=h._bounds,a=h._viewport,s=A(a.width,a.height,d);for(let g=0;g<s.length;g++){const p=d[g].div,C=h._textDivProperties.get(p);if(C.angle===0){C.paddingLeft=d[g].left-s[g].left,C.paddingTop=d[g].top-s[g].top,C.paddingRight=s[g].right-d[g].right,C.paddingBottom=s[g].bottom-d[g].bottom,h._textDivProperties.set(p,C);continue}const B=s[g],I=d[g],J=I.m,Y=J[0],q=J[1],Q=[[0,0],[0,I.size[1]],[I.size[0],0],I.size],V=new Float64Array(64);for(let U=0,L=Q.length;U<L;U++){const Z=n.Util.applyTransform(Q[U],J);V[U+0]=Y&&(B.left-Z[0])/Y,V[U+4]=q&&(B.top-Z[1])/q,V[U+8]=Y&&(B.right-Z[0])/Y,V[U+12]=q&&(B.bottom-Z[1])/q,V[U+16]=q&&(B.left-Z[0])/-q,V[U+20]=Y&&(B.top-Z[1])/Y,V[U+24]=q&&(B.right-Z[0])/-q,V[U+28]=Y&&(B.bottom-Z[1])/Y,V[U+32]=Y&&(B.left-Z[0])/-Y,V[U+36]=q&&(B.top-Z[1])/-q,V[U+40]=Y&&(B.right-Z[0])/-Y,V[U+44]=q&&(B.bottom-Z[1])/-q,V[U+48]=q&&(B.left-Z[0])/q,V[U+52]=Y&&(B.top-Z[1])/-Y,V[U+56]=q&&(B.right-Z[0])/q,V[U+60]=Y&&(B.bottom-Z[1])/-Y}const j=1+Math.min(Math.abs(Y),Math.abs(q));C.paddingLeft=P(V,32,16)/j,C.paddingTop=P(V,48,16)/j,C.paddingRight=P(V,0,16)/j,C.paddingBottom=P(V,16,16)/j,h._textDivProperties.set(p,C)}}function A(h,d,a){const s=a.map(function(p,C){return{x1:p.left,y1:p.top,x2:p.right,y2:p.bottom,index:C,x1New:void 0,x2New:void 0}});F(h,s);const g=new Array(a.length);for(const p of s){const C=p.index;g[C]={left:p.x1New,top:0,right:p.x2New,bottom:0}}a.map(function(p,C){const B=g[C],I=s[C];I.x1=p.top,I.y1=h-B.right,I.x2=p.bottom,I.y2=h-B.left,I.index=C,I.x1New=void 0,I.x2New=void 0}),F(d,s);for(const p of s){const C=p.index;g[C].top=p.x1New,g[C].bottom=p.x2New}return g}function F(h,d){d.sort(function(g,p){return g.x1-p.x1||g.index-p.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const g of d){let p=0;for(;p<s.length&&s[p].end<=g.y1;)p++;let C=s.length-1;for(;C>=0&&s[C].start>=g.y2;)C--;let B,I,J,Y,q=-1/0;for(J=p;J<=C;J++){B=s[J],I=B.boundary;let j;I.x2>g.x1?j=I.index>g.index?I.x1New:g.x1:I.x2New===void 0?j=(I.x2+g.x1)/2:j=I.x2New,j>q&&(q=j)}for(g.x1New=q,J=p;J<=C;J++)B=s[J],I=B.boundary,I.x2New===void 0?I.x2>g.x1?I.index>g.index&&(I.x2New=I.x2):I.x2New=q:I.x2New>q&&(I.x2New=Math.max(q,I.x2));const Q=[];let V=null;for(J=p;J<=C;J++){B=s[J],I=B.boundary;const j=I.x2>g.x2?I:g;V===j?Q.at(-1).end=B.end:(Q.push({start:B.start,end:B.end,boundary:j}),V=j)}for(s[p].start<g.y1&&(Q[0].start=g.y1,Q.unshift({start:s[p].start,end:g.y1,boundary:s[p].boundary})),g.y2<s[C].end&&(Q.at(-1).end=g.y2,Q.push({start:g.y2,end:s[C].end,boundary:s[C].boundary})),J=p;J<=C;J++){if(B=s[J],I=B.boundary,I.x2New!==void 0)continue;let j=!1;for(Y=p-1;!j&&Y>=0&&s[Y].start>=I.y1;Y--)j=s[Y].boundary===I;for(Y=C+1;!j&&Y<s.length&&s[Y].end<=I.y2;Y++)j=s[Y].boundary===I;for(Y=0;!j&&Y<Q.length;Y++)j=Q[Y].boundary===I;j||(I.x2New=q)}Array.prototype.splice.apply(s,[p,C-p+1,...Q])}for(const g of s){const p=g.boundary;p.x2New===void 0&&(p.x2New=Math.max(h,p.x2))}}class N{constructor(d){var a;let{textContent:s,textContentStream:g,container:p,viewport:C,textDivs:B,textContentItemsStr:I,enhanceTextSelection:J}=d;J&&(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=s,this._textContentStream=g,this._container=p,this._document=p.ownerDocument,this._viewport=C,this._textDivs=B||[],this._textContentItemsStr=I||[],this._enhanceTextSelection=!!J,this._fontInspectorEnabled=!!((a=globalThis.FontInspector)!==null&&a!==void 0&&a.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(d,a){for(let s=0,g=d.length;s<g;s++){if(d[s].str===void 0){if(d[s].type==="beginMarkedContentProps"||d[s].type==="beginMarkedContent"){const p=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),d[s].id!==null&&this._container.setAttribute("id",`${d[s].id}`),p.append(this._container)}else d[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(d[s].str),D(this,d[s],a,this._layoutTextCtx)}}_layoutText(d){const a=this._textDivProperties.get(d);let s="";if(a.canvasWidth!==0&&a.hasText){const{fontFamily:g}=d.style,{fontSize:p}=a;(p!==this._layoutTextLastFontSize||g!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${p*this._devicePixelRatio}px ${g}`,this._layoutTextLastFontSize=p,this._layoutTextLastFontFamily=g);const{width:C}=this._layoutTextCtx.measureText(d.textContent);if(C>0){const B=this._devicePixelRatio*a.canvasWidth/C;this._enhanceTextSelection&&(a.scale=B),s=`scaleX(${B})`}}if(a.angle!==0&&(s=`rotate(${a.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(a.originalTransform=s),d.style.transform=s),a.hasText&&this._container.append(d),a.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.append(g)}}_render(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const a=(0,n.createPromiseCapability)();let s=Object.create(null);const g=this._document.createElement("canvas");if(g.height=g.width=S,this._layoutTextCtx=g.getContext("2d",{alpha:!1}),this._textContent){const p=this._textContent.items,C=this._textContent.styles;this._processItems(p,C),a.resolve()}else if(this._textContentStream){const p=()=>{this._reader.read().then(C=>{let{value:B,done:I}=C;if(I){a.resolve();return}Object.assign(s,B.styles),this._processItems(B.items,s),p()},a.reject)};this._reader=this._textContentStream.getReader(),p()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');a.promise.then(()=>{s=null,d?this._renderTimer=setTimeout(()=>{u(this),this._renderTimer=null},d):u(this)},this._capability.reject)}expandTextDivs(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(M(this),this._bounds=null);const a=[],s=[];for(let g=0,p=this._textDivs.length;g<p;g++){const C=this._textDivs[g],B=this._textDivProperties.get(C);B.hasText&&(d?(a.length=0,s.length=0,B.originalTransform&&a.push(B.originalTransform),B.paddingTop>0?(s.push(`${B.paddingTop}px`),a.push(`translateY(${-B.paddingTop}px)`)):s.push(0),B.paddingRight>0?s.push(`${B.paddingRight/B.scale}px`):s.push(0),B.paddingBottom>0?s.push(`${B.paddingBottom}px`):s.push(0),B.paddingLeft>0?(s.push(`${B.paddingLeft/B.scale}px`),a.push(`translateX(${-B.paddingLeft/B.scale}px)`)):s.push(0),C.style.padding=s.join(" "),a.length&&(C.style.transform=a.join(" "))):(C.style.padding=null,C.style.transform=B.originalTransform))}}}i.TextLayerRenderTask=N;function c(h){const d=new N({textContent:h.textContent,textContentStream:h.textContentStream,container:h.container,viewport:h.viewport,textDivs:h.textDivs,textContentItemsStr:h.textContentItemsStr,enhanceTextSelection:h.enhanceTextSelection});return d._render(h.timeout),d}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var n=t(133),o=t(1),m=t(3);let S=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};i.SVGGraphics=S;{let A=function(a){let s=[];const g=[];for(const p of a){if(p.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),g.push(s),s=s.at(-1).items;continue}p.fn==="restore"?s=g.pop():s.push(p)}return s},F=function(a){if(Number.isInteger(a))return a.toString();const s=a.toFixed(10);let g=s.length-1;if(s[g]!=="0")return s;do g--;while(s[g]==="0");return s.substring(0,s[g]==="."?g:g+1)},N=function(a){if(a[4]===0&&a[5]===0){if(a[1]===0&&a[2]===0)return a[0]===1&&a[3]===1?"":`scale(${F(a[0])} ${F(a[3])})`;if(a[0]===a[3]&&a[1]===-a[2]){const s=Math.acos(a[0])*180/Math.PI;return`rotate(${F(s)})`}}else if(a[0]===1&&a[1]===0&&a[2]===0&&a[3]===1)return`translate(${F(a[4])} ${F(a[5])})`;return`matrix(${F(a[0])} ${F(a[1])} ${F(a[2])} ${F(a[3])} ${F(a[4])} ${F(a[5])})`};const x={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},R="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",v=["butt","round","square"],D=["miter","round","bevel"],u=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([a],{type:s}));const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${s};base64,`;for(let B=0,I=a.length;B<I;B+=3){const J=a[B]&255,Y=a[B+1]&255,q=a[B+2]&255,Q=J>>2,V=(J&3)<<4|Y>>4,j=B+1<I?(Y&15)<<2|q>>6:64,U=B+2<I?q&63:64;C+=p[Q]+p[V]+p[j]+p[U]}return C},P=function(){const a=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,g=new Int32Array(256);for(let q=0;q<256;q++){let Q=q;for(let V=0;V<8;V++)Q&1?Q=3988292384^Q>>1&2147483647:Q=Q>>1&2147483647;g[q]=Q}function p(q,Q,V){let j=-1;for(let U=Q;U<V;U++){const L=(j^q[U])&255,Z=g[L];j=j>>>8^Z}return j^-1}function C(q,Q,V,j){let U=j;const L=Q.length;V[U]=L>>24&255,V[U+1]=L>>16&255,V[U+2]=L>>8&255,V[U+3]=L&255,U+=4,V[U]=q.charCodeAt(0)&255,V[U+1]=q.charCodeAt(1)&255,V[U+2]=q.charCodeAt(2)&255,V[U+3]=q.charCodeAt(3)&255,U+=4,V.set(Q,U),U+=Q.length;const Z=p(V,j+4,U);V[U]=Z>>24&255,V[U+1]=Z>>16&255,V[U+2]=Z>>8&255,V[U+3]=Z&255}function B(q,Q,V){let j=1,U=0;for(let L=Q;L<V;++L)j=(j+(q[L]&255))%65521,U=(U+j)%65521;return U<<16|j}function I(q){if(!m.isNodeJS)return J(q);try{let Q;parseInt(process.versions.node)>=8?Q=q:Q=Buffer.from(q);const V=require$$7.deflateSync(Q,{level:9});return V instanceof Uint8Array?V:new Uint8Array(V)}catch(Q){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return J(q)}function J(q){let Q=q.length;const V=65535,j=Math.ceil(Q/V),U=new Uint8Array(2+Q+j*5+4);let L=0;U[L++]=120,U[L++]=156;let Z=0;for(;Q>V;)U[L++]=0,U[L++]=255,U[L++]=255,U[L++]=0,U[L++]=0,U.set(q.subarray(Z,Z+V),L),L+=V,Z+=V,Q-=V;U[L++]=1,U[L++]=Q&255,U[L++]=Q>>8&255,U[L++]=~Q&65535&255,U[L++]=(~Q&65535)>>8&255,U.set(q.subarray(Z),L),L+=q.length-Z;const ce=B(q,0,q.length);return U[L++]=ce>>24&255,U[L++]=ce>>16&255,U[L++]=ce>>8&255,U[L++]=ce&255,U}function Y(q,Q,V,j){const U=q.width,L=q.height;let Z,ce,be;const Re=q.data;switch(Q){case o.ImageKind.GRAYSCALE_1BPP:ce=0,Z=1,be=U+7>>3;break;case o.ImageKind.RGB_24BPP:ce=2,Z=8,be=U*3;break;case o.ImageKind.RGBA_32BPP:ce=6,Z=8,be=U*4;break;default:throw new Error("invalid format")}const X=new Uint8Array((1+be)*L);let _=0,T=0;for(let O=0;O<L;++O)X[_++]=0,X.set(Re.subarray(T,T+be),_),T+=be,_+=be;if(Q===o.ImageKind.GRAYSCALE_1BPP&&j){_=0;for(let O=0;O<L;O++){_++;for(let W=0;W<be;W++)X[_++]^=255}}const z=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,U&255,L>>24&255,L>>16&255,L>>8&255,L&255,Z,ce,0,0,0]),$=I(X),l=a.length+s*3+z.length+$.length,b=new Uint8Array(l);let w=0;return b.set(a,w),w+=a.length,C("IHDR",z,b,w),w+=s+z.length,C("IDATA",$,b,w),w+=s+$.length,C("IEND",new Uint8Array(0),b,w),u(b,"image/png",V)}return function(Q,V,j){const U=Q.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:Q.kind;return Y(Q,U,V,j)}}();class M{constructor(){this.fontSizeScale=1,this.fontWeight=x.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=x.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,g){this.x=s,this.y=g}}let c=0,h=0,d=0;i.SVGGraphics=S=class{constructor(a,s){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new M,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=a,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!g,this._operatorIdMapping=[];for(const p in o.OPS)this._operatorIdMapping[o.OPS[p]]=p}save(){this.transformStack.push(this.transformMatrix);const a=this.current;this.extraStack.push(a),this.current=a.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(a){this.save(),this.executeOpTree(a),this.restore()}loadDependencies(a){const s=a.fnArray,g=a.argsArray;for(let p=0,C=s.length;p<C;p++)if(s[p]===o.OPS.dependency)for(const B of g[p]){const I=B.startsWith("g_")?this.commonObjs:this.objs,J=new Promise(Y=>{I.get(B,Y)});this.current.dependencies.push(J)}return Promise.all(this.current.dependencies)}transform(a,s,g,p,C,B){const I=[a,s,g,p,C,B];this.transformMatrix=o.Util.transform(this.transformMatrix,I),this.tgrp=null}getSVG(a,s){this.viewport=s;const g=this._initialize(s);return this.loadDependencies(a).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(a)),g))}convertOpList(a){const s=this._operatorIdMapping,g=a.argsArray,p=a.fnArray,C=[];for(let B=0,I=p.length;B<I;B++){const J=p[B];C.push({fnId:J,fn:s[J],args:g[B]})}return A(C)}executeOpTree(a){for(const s of a){const g=s.fn,p=s.fnId,C=s.args;switch(p|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(C);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case o.OPS.setFont:this.setFont(C);break;case o.OPS.showText:this.showText(C[0]);break;case o.OPS.showSpacedText:this.showText(C[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(C[0],C[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case o.OPS.setHScale:this.setHScale(C[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case o.OPS.setTextRise:this.setTextRise(C[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case o.OPS.setLineWidth:this.setLineWidth(C[0]);break;case o.OPS.setLineJoin:this.setLineJoin(C[0]);break;case o.OPS.setLineCap:this.setLineCap(C[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case o.OPS.setFillColorN:this.setFillColorN(C);break;case o.OPS.shadingFill:this.shadingFill(C[0]);break;case o.OPS.setDash:this.setDash(C[0],C[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case o.OPS.setFlatness:this.setFlatness(C[0]);break;case o.OPS.setGState:this.setGState(C[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case o.OPS.constructPath:this.constructPath(C[0],C[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,o.warn)(`Unimplemented operator ${g}`);break}}}setWordSpacing(a){this.current.wordSpacing=a}setCharSpacing(a){this.current.charSpacing=a}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,s,g,p,C,B){const I=this.current;I.textMatrix=I.lineMatrix=[a,s,g,p,C,B],I.textMatrixScale=Math.hypot(a,s),I.x=I.lineX=0,I.y=I.lineY=0,I.xcoords=[],I.ycoords=[],I.tspan=this.svgFactory.createElement("svg:tspan"),I.tspan.setAttributeNS(null,"font-family",I.fontFamily),I.tspan.setAttributeNS(null,"font-size",`${F(I.fontSize)}px`),I.tspan.setAttributeNS(null,"y",F(-I.y)),I.txtElement=this.svgFactory.createElement("svg:text"),I.txtElement.append(I.tspan)}beginText(){const a=this.current;a.x=a.lineX=0,a.y=a.lineY=0,a.textMatrix=o.IDENTITY_MATRIX,a.lineMatrix=o.IDENTITY_MATRIX,a.textMatrixScale=1,a.tspan=this.svgFactory.createElement("svg:tspan"),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtgrp=this.svgFactory.createElement("svg:g"),a.xcoords=[],a.ycoords=[]}moveText(a,s){const g=this.current;g.x=g.lineX+=a,g.y=g.lineY+=s,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${F(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",F(-g.y))}showText(a){const s=this.current,g=s.font,p=s.fontSize;if(p===0)return;const C=s.fontSizeScale,B=s.charSpacing,I=s.wordSpacing,J=s.fontDirection,Y=s.textHScale*J,q=g.vertical,Q=q?1:-1,V=g.defaultVMetrics,j=p*s.fontMatrix[0];let U=0;for(const ce of a){if(ce===null){U+=J*I;continue}else if(typeof ce=="number"){U+=Q*ce*p/1e3;continue}const be=(ce.isSpace?I:0)+B,Re=ce.fontChar;let X,_,T=ce.width;if(q){let $;const l=ce.vmetric||V;$=ce.vmetric?l[1]:T*.5,$=-$*j;const b=l[2]*j;T=l?-l[0]:T,X=$/C,_=(U+b)/C}else X=U/C,_=0;(ce.isInFont||g.missingFile)&&(s.xcoords.push(s.x+X),q&&s.ycoords.push(-s.y+_),s.tspan.textContent+=Re);let z;q?z=T*j-be*J:z=T*j+be*J,U+=z}s.tspan.setAttributeNS(null,"x",s.xcoords.map(F).join(" ")),q?s.tspan.setAttributeNS(null,"y",s.ycoords.map(F).join(" ")):s.tspan.setAttributeNS(null,"y",F(-s.y)),q?s.y-=U:s.x+=U*Y,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${F(s.fontSize)}px`),s.fontStyle!==x.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==x.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const L=s.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(L===o.TextRenderingMode.FILL||L===o.TextRenderingMode.FILL_STROKE?(s.fillColor!==x.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),L===o.TextRenderingMode.STROKE||L===o.TextRenderingMode.FILL_STROKE){const ce=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,ce)}let Z=s.textMatrix;s.textRise!==0&&(Z=Z.slice(),Z[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${N(Z)} scale(${F(Y)}, -1)`),s.txtElement.setAttributeNS(R,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(a,s){this.setLeading(-s),this.moveText(a,s)}addFontStyle(a){if(!a.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=u(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${a.loadedName}"; src: url(${s}); }
`}setFont(a){const s=this.current,g=this.commonObjs.get(a[0]);let p=a[1];s.font=g,this.embedFonts&&!g.missingFile&&!this.embeddedFonts[g.loadedName]&&(this.addFontStyle(g),this.embeddedFonts[g.loadedName]=g),s.fontMatrix=g.fontMatrix||o.FONT_IDENTITY_MATRIX;let C="normal";g.black?C="900":g.bold&&(C="bold");const B=g.italic?"italic":"normal";p<0?(p=-p,s.fontDirection=-1):s.fontDirection=1,s.fontSize=p,s.fontFamily=g.loadedName,s.fontWeight=C,s.fontStyle=B,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",F(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var a;const s=this.current;s.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&(a=s.txtElement)!==null&&a!==void 0&&a.hasChildNodes()&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(a){a>0&&(this.current.lineWidth=a)}setLineCap(a){this.current.lineCap=v[a]}setLineJoin(a){this.current.lineJoin=D[a]}setMiterLimit(a){this.current.miterLimit=a}setStrokeAlpha(a){this.current.strokeAlpha=a}setStrokeRGBColor(a,s,g){this.current.strokeColor=o.Util.makeHexColor(a,s,g)}setFillAlpha(a){this.current.fillAlpha=a}setFillRGBColor(a,s,g){this.current.fillColor=o.Util.makeHexColor(a,s,g),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(a){this.current.strokeColor=this._makeColorN_Pattern(a)}setFillColorN(a){this.current.fillColor=this._makeColorN_Pattern(a)}shadingFill(a){const s=this.viewport.width,g=this.viewport.height,p=o.Util.inverseTransform(this.transformMatrix),C=o.Util.applyTransform([0,0],p),B=o.Util.applyTransform([0,g],p),I=o.Util.applyTransform([s,0],p),J=o.Util.applyTransform([s,g],p),Y=Math.min(C[0],B[0],I[0],J[0]),q=Math.min(C[1],B[1],I[1],J[1]),Q=Math.max(C[0],B[0],I[0],J[0]),V=Math.max(C[1],B[1],I[1],J[1]),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",Y),j.setAttributeNS(null,"y",q),j.setAttributeNS(null,"width",Q-Y),j.setAttributeNS(null,"height",V-q),j.setAttributeNS(null,"fill",this._makeShadingPattern(a)),this.current.fillAlpha<1&&j.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(j)}_makeColorN_Pattern(a){return a[0]==="TilingPattern"?this._makeTilingPattern(a):this._makeShadingPattern(a)}_makeTilingPattern(a){const s=a[1],g=a[2],p=a[3]||o.IDENTITY_MATRIX,[C,B,I,J]=a[4],Y=a[5],q=a[6],Q=a[7],V=`shading${d++}`,[j,U,L,Z]=o.Util.normalizeRect([...o.Util.applyTransform([C,B],p),...o.Util.applyTransform([I,J],p)]),[ce,be]=o.Util.singularValueDecompose2dScale(p),Re=Y*ce,X=q*be,_=this.svgFactory.createElement("svg:pattern");_.setAttributeNS(null,"id",V),_.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_.setAttributeNS(null,"width",Re),_.setAttributeNS(null,"height",X),_.setAttributeNS(null,"x",`${j}`),_.setAttributeNS(null,"y",`${U}`);const T=this.svg,z=this.transformMatrix,$=this.current.fillColor,l=this.current.strokeColor,b=this.svgFactory.create(L-j,Z-U);if(this.svg=b,this.transformMatrix=p,Q===2){const w=o.Util.makeHexColor(...s);this.current.fillColor=w,this.current.strokeColor=w}return this.executeOpTree(this.convertOpList(g)),this.svg=T,this.transformMatrix=z,this.current.fillColor=$,this.current.strokeColor=l,_.append(b.childNodes[0]),this.defs.append(_),`url(#${V})`}_makeShadingPattern(a){switch(typeof a=="string"&&(a=this.objs.get(a)),a[0]){case"RadialAxial":const s=`shading${d++}`,g=a[3];let p;switch(a[1]){case"axial":const C=a[4],B=a[5];p=this.svgFactory.createElement("svg:linearGradient"),p.setAttributeNS(null,"id",s),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"x1",C[0]),p.setAttributeNS(null,"y1",C[1]),p.setAttributeNS(null,"x2",B[0]),p.setAttributeNS(null,"y2",B[1]);break;case"radial":const I=a[4],J=a[5],Y=a[6],q=a[7];p=this.svgFactory.createElement("svg:radialGradient"),p.setAttributeNS(null,"id",s),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"cx",J[0]),p.setAttributeNS(null,"cy",J[1]),p.setAttributeNS(null,"r",q),p.setAttributeNS(null,"fx",I[0]),p.setAttributeNS(null,"fy",I[1]),p.setAttributeNS(null,"fr",Y);break;default:throw new Error(`Unknown RadialAxial type: ${a[1]}`)}for(const C of g){const B=this.svgFactory.createElement("svg:stop");B.setAttributeNS(null,"offset",C[0]),B.setAttributeNS(null,"stop-color",C[1]),p.append(B)}return this.defs.append(p),`url(#${s})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${a[0]}`)}}setDash(a,s){this.current.dashArray=a,this.current.dashPhase=s}constructPath(a,s){const g=this.current;let p=g.x,C=g.y,B=[],I=0;for(const J of a)switch(J|0){case o.OPS.rectangle:p=s[I++],C=s[I++];const Y=s[I++],q=s[I++],Q=p+Y,V=C+q;B.push("M",F(p),F(C),"L",F(Q),F(C),"L",F(Q),F(V),"L",F(p),F(V),"Z");break;case o.OPS.moveTo:p=s[I++],C=s[I++],B.push("M",F(p),F(C));break;case o.OPS.lineTo:p=s[I++],C=s[I++],B.push("L",F(p),F(C));break;case o.OPS.curveTo:p=s[I+4],C=s[I+5],B.push("C",F(s[I]),F(s[I+1]),F(s[I+2]),F(s[I+3]),F(p),F(C)),I+=6;break;case o.OPS.curveTo2:B.push("C",F(p),F(C),F(s[I]),F(s[I+1]),F(s[I+2]),F(s[I+3])),p=s[I+2],C=s[I+3],I+=4;break;case o.OPS.curveTo3:p=s[I+2],C=s[I+3],B.push("C",F(s[I]),F(s[I+1]),F(p),F(C),F(p),F(C)),I+=4;break;case o.OPS.closePath:B.push("Z");break}B=B.join(" "),g.path&&a.length>0&&a[0]!==o.OPS.rectangle&&a[0]!==o.OPS.moveTo?B=g.path.getAttributeNS(null,"d")+B:(g.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(g.path)),g.path.setAttributeNS(null,"d",B),g.path.setAttributeNS(null,"fill","none"),g.element=g.path,g.setCurrentPoint(p,C)}endPath(){const a=this.current;if(a.path=null,!this.pendingClip)return;if(!a.element){this.pendingClip=null;return}const s=`clippath${c++}`,g=this.svgFactory.createElement("svg:clipPath");g.setAttributeNS(null,"id",s),g.setAttributeNS(null,"transform",N(this.transformMatrix));const p=a.element.cloneNode(!0);if(this.pendingClip==="evenodd"?p.setAttributeNS(null,"clip-rule","evenodd"):p.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,g.append(p),this.defs.append(g),a.activeClipUrl){a.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;g.setAttributeNS(null,"clip-path",a.activeClipUrl)}a.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(a){this.pendingClip=a}closePath(){const a=this.current;if(a.path){const s=`${a.path.getAttributeNS(null,"d")}Z`;a.path.setAttributeNS(null,"d",s)}}setLeading(a){this.current.leading=-a}setTextRise(a){this.current.textRise=a}setTextRenderingMode(a){this.current.textRenderingMode=a}setHScale(a){this.current.textHScale=a/100}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[s,g]of a)switch(s){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g);break;case"CA":this.setStrokeAlpha(g);break;case"ca":this.setFillAlpha(g);break;default:(0,o.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const a=this.current;a.element&&(a.element.setAttributeNS(null,"fill",a.fillColor),a.element.setAttributeNS(null,"fill-opacity",a.fillAlpha),this.endPath())}stroke(){const a=this.current;a.element&&(this._setStrokeAttributes(a.element),a.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const g=this.current;let p=g.dashArray;s!==1&&p.length>0&&(p=p.map(function(C){return s*C})),a.setAttributeNS(null,"stroke",g.strokeColor),a.setAttributeNS(null,"stroke-opacity",g.strokeAlpha),a.setAttributeNS(null,"stroke-miterlimit",F(g.miterLimit)),a.setAttributeNS(null,"stroke-linecap",g.lineCap),a.setAttributeNS(null,"stroke-linejoin",g.lineJoin),a.setAttributeNS(null,"stroke-width",F(s*g.lineWidth)+"px"),a.setAttributeNS(null,"stroke-dasharray",p.map(F).join(" ")),a.setAttributeNS(null,"stroke-dashoffset",F(s*g.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width","1px"),a.setAttributeNS(null,"height","1px"),a.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(a)}paintImageXObject(a){const s=a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a);if(!s){(0,o.warn)(`Dependent image with object ID ${a} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(a,s){const g=a.width,p=a.height,C=P(a,this.forceDataSchema,!!s),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",F(g)),B.setAttributeNS(null,"height",F(p)),this.current.element=B,this.clip("nonzero");const I=this.svgFactory.createElement("svg:image");I.setAttributeNS(y,"xlink:href",C),I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y",F(-p)),I.setAttributeNS(null,"width",F(g)+"px"),I.setAttributeNS(null,"height",F(p)+"px"),I.setAttributeNS(null,"transform",`scale(${F(1/g)} ${F(-1/p)})`),s?s.append(I):this._ensureTransformGroup().append(I)}paintImageMaskXObject(a){const s=this.current,g=a.width,p=a.height,C=s.fillColor;s.maskId=`mask${h++}`;const B=this.svgFactory.createElement("svg:mask");B.setAttributeNS(null,"id",s.maskId);const I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",F(g)),I.setAttributeNS(null,"height",F(p)),I.setAttributeNS(null,"fill",C),I.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.append(B),this._ensureTransformGroup().append(I),this.paintInlineImageXObject(a,B)}paintFormXObjectBegin(a,s){if(Array.isArray(a)&&a.length===6&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]),s){const g=s[2]-s[0],p=s[3]-s[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",s[0]),C.setAttributeNS(null,"y",s[1]),C.setAttributeNS(null,"width",F(g)),C.setAttributeNS(null,"height",F(p)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(a){const s=this.svgFactory.create(a.width,a.height),g=this.svgFactory.createElement("svg:defs");s.append(g),this.defs=g;const p=this.svgFactory.createElement("svg:g");return p.setAttributeNS(null,"transform",N(a.transform)),s.append(p),this.svg=p,s}_ensureClipGroup(){if(!this.current.clipGroup){const a=this.svgFactory.createElement("svg:g");a.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(a),this.current.clipGroup=a}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",N(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var n=t(1),o=t(158);const m=require$$7,S=require$$7,x=require$$7,R=require$$7,y=/^file:\/\/\/[a-zA-Z]:\//;function v(h){const d=R.parse(h);return d.protocol==="file:"||d.host?d:/^[a-z]:[/\\]/i.test(h)?R.parse(`file:///${h}`):(d.host||(d.protocol="file:"),d)}class D{constructor(d){this.source=d,this.url=v(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var d,a;return(d=(a=this._fullRequestReader)===null||a===void 0?void 0:a._loaded)!==null&&d!==void 0?d:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new N(this):new A(this),this._fullRequestReader}getRangeReader(d,a){if(a<=this._progressiveDataLength)return null;const s=this.isFsUrl?new c(this,d,a):new F(this,d,a);return this._rangeRequestReaders.push(s),s}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const a of this._rangeRequestReaders.slice(0))a.cancel(d)}}i.PDFNodeStream=D;class u{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const a=d.source;this._contentLength=a.length,this._loaded=0,this._filename=null,this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",a=>{this._error(a)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const a=d.source;this._isStreamingSupported=!a.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",a=>{this._error(a)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function M(h,d){return{protocol:h.protocol,auth:h.auth,host:h.hostname,port:h.port,path:h.path,method:"GET",headers:d}}class A extends u{constructor(d){super(d);const a=s=>{if(s.statusCode===404){const B=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=B,this._headersCapability.reject(B);return}this._headersCapability.resolve(),this._setReadableStream(s);const g=B=>this._readableStream.headers[B.toLowerCase()],{allowRangeRequests:p,suggestedLength:C}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=C||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(g)};this._request=null,this._url.protocol==="http:"?this._request=S.request(M(this._url,d.httpHeaders),a):this._request=x.request(M(this._url,d.httpHeaders),a),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class F extends P{constructor(d,a,s){super(d),this._httpHeaders={};for(const p in d.httpHeaders){const C=d.httpHeaders[p];typeof C>"u"||(this._httpHeaders[p]=C)}this._httpHeaders.Range=`bytes=${a}-${s-1}`;const g=p=>{if(p.statusCode===404){const C=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(p)};this._request=null,this._url.protocol==="http:"?this._request=S.request(M(this._url,this._httpHeaders),g):this._request=x.request(M(this._url,this._httpHeaders),g),this._request.on("error",p=>{this._storedError=p}),this._request.end()}}class N extends u{constructor(d){super(d);let a=decodeURIComponent(this._url.path);y.test(this._url.href)&&(a=a.replace(/^\//,"")),m.lstat(a,(s,g)=>{if(s){s.code==="ENOENT"&&(s=new n.MissingPDFException(`Missing PDF "${a}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=g.size,this._setReadableStream(m.createReadStream(a)),this._headersCapability.resolve()})}}class c extends P{constructor(d,a,s){super(d);let g=decodeURIComponent(this._url.path);y.test(this._url.href)&&(g=g.replace(/^\//,"")),this._setReadableStream(m.createReadStream(g,{start:a,end:s-1}))}}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=R,i.extractFilenameFromHeader=x,i.validateRangeRequestCapabilities=S,i.validateResponseStatus=y;var n=t(1),o=t(159),m=t(133);function S(v){let{getResponseHeader:D,isHttp:u,rangeChunkSize:P,disableRange:M}=v;const A={allowRangeRequests:!1,suggestedLength:void 0},F=parseInt(D("Content-Length"),10);return!Number.isInteger(F)||(A.suggestedLength=F,F<=2*P)||M||!u||D("Accept-Ranges")!=="bytes"||(D("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A}function x(v){const D=v("Content-Disposition");if(D){let u=(0,o.getFilenameFromContentDispositionHeader)(D);if(u.includes("%"))try{u=decodeURIComponent(u)}catch{}if((0,m.isPdfFile)(u))return u}return null}function R(v,D){return v===404||v===0&&D.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+D+'".'):new n.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${D}".`,v)}function y(v){return v===200||v===206}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=o;var n=t(1);function o(m){let S=!0,x=R("filename\\*","i").exec(m);if(x){x=x[1];let A=u(x);return A=unescape(A),A=P(A),A=M(A),v(A)}if(x=D(m),x){const A=M(x);return v(A)}if(x=R("filename","i").exec(m),x){x=x[1];let A=u(x);return A=M(A),v(A)}function R(A,F){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',F)}function y(A,F){if(A){if(!/^[\x00-\xFF]+$/.test(F))return F;try{const N=new TextDecoder(A,{fatal:!0}),c=(0,n.stringToBytes)(F);F=N.decode(c),S=!1}catch{}}return F}function v(A){return S&&/[\x80-\xff]/.test(A)&&(A=y("utf-8",A),S&&(A=y("iso-8859-1",A))),A}function D(A){const F=[];let N;const c=R("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(N=c.exec(A))!==null;){let[,d,a,s]=N;if(d=parseInt(d,10),d in F){if(d===0)break;continue}F[d]=[a,s]}const h=[];for(let d=0;d<F.length&&d in F;++d){let[a,s]=F[d];s=u(s),a&&(s=unescape(s),d===0&&(s=P(s))),h.push(s)}return h.join("")}function u(A){if(A.startsWith('"')){const F=A.slice(1).split('\\"');for(let N=0;N<F.length;++N){const c=F[N].indexOf('"');c!==-1&&(F[N]=F[N].slice(0,c),F.length=N+1),F[N]=F[N].replace(/\\(.)/g,"$1")}A=F.join('"')}return A}function P(A){const F=A.indexOf("'");if(F===-1)return A;const N=A.slice(0,F),h=A.slice(F+1).replace(/^[^']*'/,"");return y(N,h)}function M(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(F,N,c,h){if(c==="q"||c==="Q")return h=h.replace(/_/g," "),h=h.replace(/=([0-9a-fA-F]{2})/g,function(d,a){return String.fromCharCode(parseInt(a,16))}),y(N,h);try{h=atob(h)}catch{}return y(N,h)})}return""}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var n=t(1),o=t(158);const m=200,S=206;function x(u){const P=u.response;return typeof P!="string"?P:(0,n.stringToBytes)(P).buffer}class R{constructor(P){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&M.httpHeaders||Object.create(null),this.withCredentials=M.withCredentials||!1,this.getXhr=M.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,M,A){const F={begin:P,end:M};for(const N in A)F[N]=A[N];return this.request(F)}requestFull(P){return this.request(P)}request(P){const M=this.getXhr(),A=this.currXhrId++,F=this.pendingRequests[A]={xhr:M};M.open("GET",this.url),M.withCredentials=this.withCredentials;for(const N in this.httpHeaders){const c=this.httpHeaders[N];typeof c>"u"||M.setRequestHeader(N,c)}return this.isHttp&&"begin"in P&&"end"in P?(M.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),F.expectedStatus=S):F.expectedStatus=m,M.responseType="arraybuffer",P.onError&&(M.onerror=function(N){P.onError(M.status)}),M.onreadystatechange=this.onStateChange.bind(this,A),M.onprogress=this.onProgress.bind(this,A),F.onHeadersReceived=P.onHeadersReceived,F.onDone=P.onDone,F.onError=P.onError,F.onProgress=P.onProgress,M.send(null),A}onProgress(P,M){var A;const F=this.pendingRequests[P];F&&((A=F.onProgress)===null||A===void 0||A.call(F,M))}onStateChange(P,M){const A=this.pendingRequests[P];if(!A)return;const F=A.xhr;if(F.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),F.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],F.status===0&&this.isHttp){var N;(N=A.onError)===null||N===void 0||N.call(A,F.status);return}const c=F.status||m;if(!(c===m&&A.expectedStatus===S)&&c!==A.expectedStatus){var d;(d=A.onError)===null||d===void 0||d.call(A,F.status);return}const a=x(F);if(c===S){const g=F.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);A.onDone({begin:parseInt(p[1],10),chunk:a})}else if(a)A.onDone({begin:0,chunk:a});else{var s;(s=A.onError)===null||s===void 0||s.call(A,F.status)}}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const M=this.pendingRequests[P].xhr;delete this.pendingRequests[P],M.abort()}}class y{constructor(P){this._source=P,this._manager=new R(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const M=this._rangeRequestReaders.indexOf(P);M>=0&&this._rangeRequestReaders.splice(M,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(P,M){const A=new D(this._manager,P,M);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(P){var M;(M=this._fullRequestReader)===null||M===void 0||M.cancel(P);for(const A of this._rangeRequestReaders.slice(0))A.cancel(P)}}i.PDFNetworkStream=y;class v{constructor(P,M){this._manager=P;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._fullRequestId=P.requestFull(A),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=M.disableRange||!1,this._contentLength=M.length,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,M=this._manager.getRequestXhr(P),A=c=>M.getResponseHeader(c),{allowRangeRequests:F,suggestedLength:N}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});F&&(this._isRangeSupported=!0),this._contentLength=N||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,o.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var M;(M=this.onProgress)===null||M===void 0||M.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=(0,n.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class D{constructor(P,M,A){this._manager=P;const F={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(M,A,F),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)===null||P===void 0||P.call(this,this)}_onDone(P){const M=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunk=M,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,o.createResponseStatusError)(P,this._url);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){if(!this.isStreamingSupported){var M;(M=this.onProgress)===null||M===void 0||M.call(this,{loaded:P.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const M=this._queuedChunk;return this._queuedChunk=null,{value:M,done:!1}}if(this._done)return{value:void 0,done:!0};const P=(0,n.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var n=t(1),o=t(158);function m(v,D,u){return{method:"GET",headers:v,signal:u.signal,mode:"cors",credentials:D?"include":"same-origin",redirect:"follow"}}function S(v){const D=new Headers;for(const u in v){const P=v[u];typeof P>"u"||D.append(u,P)}return D}class x{constructor(D){this.source=D,this.isHttp=/^https?:/i.test(D.url),this.httpHeaders=this.isHttp&&D.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var D,u;return(D=(u=this._fullRequestReader)===null||u===void 0?void 0:u._loaded)!==null&&D!==void 0?D:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new R(this),this._fullRequestReader}getRangeReader(D,u){if(u<=this._progressiveDataLength)return null;const P=new y(this,D,u);return this._rangeRequestReaders.push(P),P}cancelAllRequests(D){this._fullRequestReader&&this._fullRequestReader.cancel(D);for(const u of this._rangeRequestReaders.slice(0))u.cancel(D)}}i.PDFFetchStream=x;class R{constructor(D){this._stream=D,this._reader=null,this._loaded=0,this._filename=null;const u=D.source;this._withCredentials=u.withCredentials||!1,this._contentLength=u.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._headers=S(this._stream.httpHeaders);const P=u.url;fetch(P,m(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,o.validateResponseStatus)(M.status))throw(0,o.createResponseStatusError)(M.status,P);this._reader=M.body.getReader(),this._headersCapability.resolve();const A=c=>M.headers.get(c),{allowRangeRequests:F,suggestedLength:N}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=F,this._contentLength=N||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(A),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:D,done:u}=await this._reader.read();return u?{value:D,done:u}:(this._loaded+=D.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(D).buffer,done:!1})}cancel(D){this._reader&&this._reader.cancel(D),this._abortController.abort()}}class y{constructor(D,u,P){this._stream=D,this._reader=null,this._loaded=0;const M=D.source;this._withCredentials=M.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!M.disableStream,this._abortController=new AbortController,this._headers=S(this._stream.httpHeaders),this._headers.append("Range",`bytes=${u}-${P-1}`);const A=M.url;fetch(A,m(this._headers,this._withCredentials,this._abortController)).then(F=>{if(!(0,o.validateResponseStatus)(F.status))throw(0,o.createResponseStatusError)(F.status,A);this._readCapability.resolve(),this._reader=F.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:D,done:u}=await this._reader.read();return u?{value:D,done:u}:(this._loaded+=D.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(D).buffer,done:!1})}cancel(D){this._reader&&this._reader.cancel(D),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(k){var i=__webpack_module_cache__[k];if(i!==void 0)return i.exports;var t=__webpack_module_cache__[k]={exports:{}};return __webpack_modules__[k](t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var k=__webpack_exports__;Object.defineProperty(k,"__esModule",{value:!0}),Object.defineProperty(k,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(k,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(k,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(k,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return m.AnnotationEditorUIManager}}),Object.defineProperty(k,"AnnotationLayer",{enumerable:!0,get:function(){return S.AnnotationLayer}}),Object.defineProperty(k,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(k,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(k,"GlobalWorkerOptions",{enumerable:!0,get:function(){return x.GlobalWorkerOptions}}),Object.defineProperty(k,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(k,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(k,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(k,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(k,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(k,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(k,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(k,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(k,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(k,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(k,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(k,"SVGGraphics",{enumerable:!0,get:function(){return v.SVGGraphics}}),Object.defineProperty(k,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(k,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(k,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(k,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(k,"XfaLayer",{enumerable:!0,get:function(){return D.XfaLayer}}),Object.defineProperty(k,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(k,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(k,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(k,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(k,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(k,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(k,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(k,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(k,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(k,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(k,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(k,"version",{enumerable:!0,get:function(){return t.version}});var i=__w_pdfjs_require__(1),t=__w_pdfjs_require__(129),n=__w_pdfjs_require__(133),o=__w_pdfjs_require__(147),m=__w_pdfjs_require__(132),S=__w_pdfjs_require__(152),x=__w_pdfjs_require__(140),R=__w_pdfjs_require__(3),y=__w_pdfjs_require__(155),v=__w_pdfjs_require__(156),D=__w_pdfjs_require__(154);if(R.isNodeJS){const{PDFNodeStream:u}=__w_pdfjs_require__(157);(0,t.setPDFNetworkStreamFactory)(P=>new u(P))}else{const{PDFNetworkStream:u}=__w_pdfjs_require__(160),{PDFFetchStream:P}=__w_pdfjs_require__(161);(0,t.setPDFNetworkStreamFactory)(M=>(0,n.isValidFetchUrl)(M.url)?new P(M):new u(M))}})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;pdfExports.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;async function extractTextFromPDF(k){try{const i=await k.arrayBuffer(),n=await pdfExports.getDocument({data:i}).promise,o=[];for(let m=1;m<=n.numPages;m++){const R=(await(await n.getPage(m)).getTextContent()).items.filter(y=>"str"in y).map(y=>y.str.trim()).filter(y=>y.length>0&&/[a-zA-ZÐ°-ÑÐ-Ð¯ÑÐ0-9]/.test(y));o.push(...R)}return[...new Set(o)].filter(m=>m.length>0).map(m=>m.replace(/\s+/g," ").trim())}catch(i){throw console.error("Error extracting text from PDF:",i),new Error("Failed to extract text from PDF")}}async function loadRequisitesFromPDF(k){try{return(await extractTextFromPDF(k)).map((t,n)=>({id:n,value:t.trim()}))}catch(i){throw console.error("Error loading requisites from PDF:",i),new Error("Failed to load requisites from PDF")}}async function createPDFFromDocx(k){try{const i=await k.arrayBuffer(),t=await lib.extractRawText({arrayBuffer:i}),n=new E,o=t.value.split(`
`),m=20;let S=m;return n.setFont("helvetica"),n.setFontSize(12),o.forEach(x=>{S>n.internal.pageSize.height-m&&(n.addPage(),S=m),x.trim()?(n.text(x,m,S),S+=10):S+=5}),n.output("blob")}catch(i){throw console.error("Error creating PDF from DOCX:",i),new Error("Failed to create PDF from DOCX")}}async function saveAsPDF(k,i){try{const t=await createPDFFromDocx(k);FileSaver_minExports.saveAs(t,i.replace(".docx",".pdf"))}catch(t){throw console.error("Error saving PDF:",t),new Error("Failed to save PDF")}}const convertDocxToPdf=createPDFFromDocx;export{convertDocxToPdf,createPDFFromDocx,extractTextFromPDF,loadRequisitesFromPDF,saveAsPDF};
